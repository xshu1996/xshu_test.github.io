window.__require=function e(t,n,i){function o(c,a){if(!n[c]){if(!t[c]){var r=c.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+c+"'")}}var h=n[c]={exports:{}};t[c][0].call(h.exports,function(e){return o(t[c][1][e]||e)},h,h.exports,e,t,n,i)}return n[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<i.length;c++)o(i[c]);return o}({AchieveCell:[function(e,t,n){"use strict";cc._RF.push(t,"d1073ere4pAWY6n9hvRzprm","AchieveCell");var i=e("EventConfig"),o=e("Game");cc.Class({extends:cc.Component,properties:{point:cc.Node,btnDouble:cc.Node,get:cc.Node,title:cc.Node,mask:cc.Node,progressText:cc.Node,rewardCoin:cc.Node},onLoad:function(){var e=this;this.isCompleted=!1,this.mask.originSize=this.mask.getContentSize(),this.btnDouble.on("click",function(){o.getInstance().openVedioAd(1,function(){o.gNode.emit(i.EVT_ACHIEVE_FINISHED,{type:e.achieveType,index:e.achieveIndex,fruitId:e.fruitId,double:!0})})}),this.get.on(cc.Node.EventType.TOUCH_END,function(){o.gNode.emit(i.EVT_ACHIEVE_FINISHED,{type:e.achieveType,index:e.achieveIndex,fruitId:e.fruitId})})},setButtonVisible:function(e){1==o.getInstance().isShareHide()?this.btnDouble.active=!1:this.btnDouble.active=e,this.get.active=e,this.isCompleted=e,this.btnDouble.active=0==e?e:cc.sys.platform!==cc.sys.VIVO_GAME,cc.sys.platform!==cc.sys.VIVO_GAME||o.getInstance().supportedVivoAd||(this.btnDouble.active=!1),1==o.getInstance().isShareHide()?this.get.getComponent(cc.Label).string="\u9886\u53d6":this.get.getComponent(cc.Label).string="1\u500d\u9886\u53d6"},setPointVisible:function(e){this.point.active=e},setTitle:function(e){this.title.getComponent(cc.Label).string=e},setRewardNum:function(e){this.rewardCoin.getComponent(cc.Label).string=e.toString()},setProgress:function(e,t){var n=e/t;this.mask.width=this.mask.originSize.width*n,this.progressText.getComponent(cc.Label).string=e+"/"+t},setAchieveType:function(e){this.achieveType=e},setAchieveIndex:function(e){this.achieveIndex=e},setAchieveFruitId:function(e){this.fruitId=e}}),cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game"}],AchieveDialog:[function(e,t,n){"use strict";cc._RF.push(t,"8a9d4Z2nX9OiINZixa3B7xy","AchieveDialog");var i=e("Game"),o=e("EventConfig");cc.Class({extends:cc.Component,properties:{btnClose:cc.Node,scrollView:cc.Node,cellPrefab:cc.Prefab,content:cc.Node},onLoad:function(){var e=this;this.btnClose.on("click",function(){e.node.destroy()}),i.gNode.on(o.EVT_ACHIEVE_FINISHED,function(t){e.updateScrollView()},this),this.initCells(),this.updateScrollView()},initCells:function(){var e=i.getInstance().getAttr(i.GAME_ATTR.ACHIEVE_FRUIT),t=JSON.parse(e);this.cellList=[];for(var n=1;n<=5+t.length;n++){var o=cc.instantiate(this.cellPrefab);this.cellList.push(o),o.parent=this.content}},updateScrollView:function(){var e;this.sortedCellList=[];for(var t=0;t<this.cellList.length;t++)this.cellList[t].active=!1;var n,o,s,c,a=-1,r=i.getInstance().getAttr(i.GAME_ATTR.ACHIEVE_SIGN);(e=(o=JSON.parse(r)).achieveIndex)<(n=i.getInstance().achieveSignConf).length&&(s=n[e],a++,(c=this.cellList[a]).parent=this.content,c.getComponent("AchieveCell").setTitle("\u7d2f\u8ba1\u767b\u5f557\u5929"),c.getComponent("AchieveCell").setRewardNum(s.reward),1==i.getInstance().isAllSign()?o.currentCount=1:o.currentCount=0,c.getComponent("AchieveCell").setProgress(o.currentCount,s.count),c.getComponent("AchieveCell").setAchieveType(i.GAME_ATTR.ACHIEVE_SIGN),c.getComponent("AchieveCell").setAchieveIndex(e),o.currentCount>=s.count?c.getComponent("AchieveCell").setButtonVisible(!0):c.getComponent("AchieveCell").setButtonVisible(!1),this.sortedCellList.push(c));var l=i.getInstance().getAttr(i.GAME_ATTR.ACHIEVE_VEDIO);if((e=(o=JSON.parse(l)).achieveIndex)<(n=i.getInstance().achieveVedioConf).length&&(s=n[e],a++,(c=this.cellList[a]).parent=this.content,c.getComponent("AchieveCell").setTitle("\u770b"+s.count+"\u6b21\u89c6\u9891"),c.getComponent("AchieveCell").setRewardNum(s.reward),c.getComponent("AchieveCell").setProgress(o.currentCount,s.count),c.getComponent("AchieveCell").setAchieveType(i.GAME_ATTR.ACHIEVE_VEDIO),c.getComponent("AchieveCell").setAchieveIndex(e),o.currentCount>=s.count?c.getComponent("AchieveCell").setButtonVisible(!0):c.getComponent("AchieveCell").setButtonVisible(!1),this.sortedCellList.push(c)),cc.sys.platform!==cc.sys.platform.OPPO_GAME&&cc.sys.platform!==cc.sys.platform.VIVO_GAME){var h=i.getInstance().getAttr(i.GAME_ATTR.ACHIEVE_SHARE);(e=(o=JSON.parse(h)).achieveIndex)<(n=i.getInstance().achieveShareConf).length&&(s=n[e],a++,(c=this.cellList[a]).parent=this.content,c.getComponent("AchieveCell").setTitle("\u5206\u4eab\u6e38\u620f"+s.count+"\u6b21"),c.getComponent("AchieveCell").setRewardNum(s.reward),c.getComponent("AchieveCell").setProgress(o.currentCount,s.count),c.getComponent("AchieveCell").setAchieveType(i.GAME_ATTR.ACHIEVE_SHARE),c.getComponent("AchieveCell").setAchieveIndex(e),o.currentCount>=s.count?c.getComponent("AchieveCell").setButtonVisible(!0):c.getComponent("AchieveCell").setButtonVisible(!1),this.sortedCellList.push(c))}var d=i.getInstance().getAttr(i.GAME_ATTR.ACHIEVE_WEAPON);(o=JSON.parse(d)).currentCount=i.getInstance().getSkinNum(),(e=o.achieveIndex)<(n=i.getInstance().achieveWeaponConf).length&&(s=n[e],a++,(c=this.cellList[a]).parent=this.content,c.getComponent("AchieveCell").setTitle("\u6536\u96c6\u6b66\u5668"+s.count+"\u4e2a"),c.getComponent("AchieveCell").setRewardNum(s.reward),c.getComponent("AchieveCell").setProgress(o.currentCount,s.count),c.getComponent("AchieveCell").setAchieveType(i.GAME_ATTR.ACHIEVE_WEAPON),c.getComponent("AchieveCell").setAchieveIndex(e),o.currentCount>=s.count?c.getComponent("AchieveCell").setButtonVisible(!0):c.getComponent("AchieveCell").setButtonVisible(!1),this.sortedCellList.push(c));var g=i.getInstance().getAttr(i.GAME_ATTR.ACHIEVE_SKILL);(e=(o=JSON.parse(g)).achieveIndex)<(n=i.getInstance().achieveSkillConf).length&&(s=n[e],a++,(c=this.cellList[a]).parent=this.content,c.getComponent("AchieveCell").setTitle(s.count+"\u6b21\u4e00\u5200\u8fc7\u5173"),c.getComponent("AchieveCell").setRewardNum(s.reward),c.getComponent("AchieveCell").setProgress(o.currentCount,s.count),c.getComponent("AchieveCell").setAchieveType(i.GAME_ATTR.ACHIEVE_SKILL),c.getComponent("AchieveCell").setAchieveIndex(e),o.currentCount>=s.count?c.getComponent("AchieveCell").setButtonVisible(!0):c.getComponent("AchieveCell").setButtonVisible(!1),this.sortedCellList.push(c));var u=i.getInstance().getAttr(i.GAME_ATTR.ACHIEVE_FRUIT),f=JSON.parse(u);n=i.getInstance().achieveFruitConf;for(var p=["\u5927\u767d\u83dc","\u571f\u8c46","\u897f\u7ea2\u67ff","\u9ec4\u74dc","\u8304\u5b50","\u9e21\u7fc5","\u80e1\u841d\u535c","\u83b2\u85d5","\u8c4c\u8c46","\u5357\u74dc","\u7389\u7c73","\u897f\u5170\u82b1","\u6d77\u5e26\u7ed3","\u9999\u83c7","\u725b\u6392","\u8c46\u8150","\u51ac\u74dc","\u82e6\u74dc","\u5c0f\u767d\u83dc","\u9f99\u867e"],m=0;m<f.length;m++)(e=(o=f[m]).achieveIndex)<n.length&&(s=n[e],a++,(c=this.cellList[a]).parent=this.content,c.getComponent("AchieveCell").setTitle("\u5207"+s.count+"\u4e2a"+p[m]),c.getComponent("AchieveCell").setRewardNum(s.reward),c.getComponent("AchieveCell").setProgress(o.currentCount,s.count),c.getComponent("AchieveCell").setAchieveType(i.GAME_ATTR.ACHIEVE_FRUIT),c.getComponent("AchieveCell").setAchieveIndex(e),c.getComponent("AchieveCell").setAchieveFruitId(m+1),o.currentCount>=s.count?c.getComponent("AchieveCell").setButtonVisible(!0):c.getComponent("AchieveCell").setButtonVisible(!1),this.sortedCellList.push(c));this.sortAchieveList();for(var v=this.sortedCellList.length,A=0;A<v;A++){var I=this.sortedCellList[A];I.y=200*-A,I.active=!0}this.content.setContentSize(cc.size(this.content.getContentSize().width,200*(a+1)))},sortAchieveList:function(){for(var e=this.sortedCellList.length,t=0,n=0;n<e;n++)if(this.sortedCellList[n].getComponent("AchieveCell").isCompleted){if(t!==n){var i=this.sortedCellList[n];this.sortedCellList[n]=this.sortedCellList[t],this.sortedCellList[t]=i}t++}},onDestroy:function(){i.gNode.targetOff(this),this.cellList=[],i.achieveDialog=null}}),cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game"}],Avatar:[function(e,t,n){"use strict";cc._RF.push(t,"ba6c5aEKA5NxoqJU3bJR5pd","Avatar");var i=cc._decorator,o=i.ccclass,s=(i.menu,i.property),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._portraitSprite=null,t._portrait="1",t}return __extends(t,e),Object.defineProperty(t.prototype,"portraitSprite",{get:function(){return this._portraitSprite||(this._portraitSprite=this.node.getChildByName("bg").getChildByName("portrait").getComponent(cc.Sprite)),this._portraitSprite},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"portrait",{get:function(){return this._portrait},set:function(e){var t=this;this._portrait=e.toString(),cc.loader.load({url:this._portrait,type:"png"},function(e,n){!e&&cc.isValid(t)&&n.url===t._portrait&&(t.portraitSprite.spriteFrame=new cc.SpriteFrame(n))})},enumerable:!0,configurable:!0}),__decorate([s],t.prototype,"_portrait",void 0),__decorate([s],t.prototype,"portrait",null),t=__decorate([o],t)}(cc.Component);t.exports=c,cc._RF.pop()},{}],CircleRoundDialog:[function(e,t,n){"use strict";cc._RF.push(t,"26d8bBUXphAn7d72Uj77xZP","CircleRoundDialog");var i=e("Game"),o=e("EventConfig");cc.Class({extends:cc.Component,properties:{btnClose:cc.Node,btnAppy:cc.Node,knife:cc.Node,buttonFrameList:[cc.SpriteFrame],shareFrame:cc.SpriteFrame,btnSkip:cc.Node},onLoad:function(){var e=this;this.btnClose.on("click",function(){e.node.destroy()}),this.btnSkip.on("click",function(){e.node.destroy()}),i.getInstance().isQQ()&&(i.getInstance().isShareHide()||(this.btnClose.active=!1,this.btnSkip.active=!0,i.getInstance().setBannerAdVisible(!1),this.scheduleOnce(function(){i.getInstance().setBannerAdVisible(!0),e.scheduleOnce(function(){e.btnSkip.y=e.btnSkip.y+i.getInstance().btHeight+180},.2)},1))),this.playKnifeAnim();var t=i.getInstance().getSkinId();this.setKnifeSkin(t);var n=function(){var t=i.getInstance().getCircleNum();t+=i.CIRCLE_ROUND_REWARD_NUM,i.getInstance().setCircleNum(t),i.gNode.emit(o.EVT_CIRCLE_ROUND_CHANGED,i.CIRCLE_ROUND_REWARD_NUM),i.getInstance().setLastObtainRoundTime(),i.gNode.emit(o.EVT_ONTAIN_ROUND_FREE),e.node.destroy()};0==i.getInstance().canObtainRoundWeaponFree()?(this.btnAppy.getComponent(cc.Sprite).spriteFrame=this.buttonFrameList[0],this.videoAd=i.getInstance().registVedioAd(1,this.btnAppy,this.shareFrame,n)):(this.btnAppy.getComponent(cc.Sprite).spriteFrame=this.buttonFrameList[1],this.btnAppy.on("click",function(){n()}),cc.sys.platform!==cc.sys.VIVO_GAME||i.getInstance().supportedVivoAd||(this.btnAppy.active=!1))},playKnifeAnim:function(){var e=cc.rotateBy(.4,1080),t=cc.moveBy(.2,cc.v2(0,300)),n=cc.moveBy(.2,cc.v2(0,-300)),i=cc.sequence(t,n),o=cc.spawn(i,e),s=cc.delayTime(1),c=cc.sequence(o,s),a=cc.repeatForever(c);this.knife.runAction(a)},setKnifeSkin:function(e){var t=i.getInstance().getFrameBySkinId(e);this.knife.getComponent(cc.Sprite).spriteFrame=t},start:function(){},onDestroy:function(){window.tt||cc.sys.platform===cc.sys.VIVO_GAME||i.getInstance().isQQ()||(null!=this.videoAd&&cc.sys.platform!==cc.sys.OPPO_GAME?this.videoAd.offClose():null!=this.videoAd&&cc.sys.platform===cc.sys.OPPO_GAME&&this.videoAd.destroy())}}),cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game"}],ClickSound:[function(e,t,n){"use strict";cc._RF.push(t,"371f3jGhQlDS4xiCo0an8XQ","ClickSound");var i=cc._decorator,o=i.ccclass,s=i.menu,c=i.requireComponent,a=i.property,r=e("./Util"),l=e("../Game"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sound=null,t}return __extends(t,e),t.prototype.onEnable=function(){this.node.on("click",this.onClicked,this)},t.prototype.onDisable=function(){this.node.off("click",this.onClicked,this)},t.prototype.onClicked=function(){0!=l.getInstance().isSoundOpen&&cc.audioEngine.play(this.sound||r.instance.clickSound,!1,1)},__decorate([a({type:cc.AudioClip})],t.prototype,"sound",void 0),t=__decorate([o,s("Util/ClickSound"),c(cc.Button)],t)}(cc.Component);t.exports=h,cc._RF.pop()},{"../Game":"Game","./Util":"Util"}],ColliderListener:[function(e,t,n){"use strict";cc._RF.push(t,"21b9bY0VjNGuIA+ioFSrncv","ColliderListener");var i=e("EventConfig"),o=e("Game");cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(e){o.gNode.emit(i.EVT_COLLIDER,e)},onCollisionStay:function(e){},onCollisionExit:function(){}}),cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game"}],EventConfig:[function(e,t,n){"use strict";var i;cc._RF.push(t,"11494tJ4CxCSIkpNv4cJCAo","EventConfig"),function(e){e.EVT_WS_OPEN="EVT_WS_OPEN",e.EVT_WS_CLOSE="EVT_WS_CLOSE",e.EVT_WS_ERROR="EVT_WS_ERROR",e.EVT_LOGIN_OVER="EVT_LOGIN_OVER",e.EVT_LOGOUT="EVT_LOGOUT",e.EVT_COLLIDER="EVT_COLLIDER",e.EVT_CUTFRUIT="EVT_CUTFRUIT",e.EVT_CUT_START="EVT_CUT_START",e.EVT_CUT_END="EVT_CUT_END",e.EVT_PLAY_AGAIN="EVT_PLAY_AGAIN",e.EVT_PLAY_CONTINUE="EVT_PLAY_CONTINUE",e.EVT_PLAY_SKIP="EVT_PLAY_SKIP",e.EVT_CHANGE_WEAPON="EVT_CHANGE_WEAPON",e.EVT_CIRCLE_ROUND_CHANGED="EVT_CIRCLE_ROUND_CHANGED",e.EVT_TRIPPLE_ROUND_CHANGED="EVT_TRIPPLE_ROUND_CHANGED",e.EVT_ONTAIN_ROUND_FREE="EVT_ONTAIN_ROUND",e.EVT_COIN_CHANGE="EVT_COIN_CHANGE",e.EVT_ACHIEVE_FINISHED="EVT_ACHIEVE_FINISHED",e.EVT_SHOW_TURNPLATE="EVT_SHOW_TURNPLATE",e.EVT_NEXT_LEVEL="EVT_NEXT_LEVEL",e.EVT_TURNPLATE_RESET="EVT_TURNPLATE_RESET",e.EVT_FINISHED_AD_VEDIO="EVT_FINISHED_AD_VEDIO",e.EVT_FINISED_SHARE="EVT_FINISED_SHARE",e.EVT_GET_YTJ="EVT_GET_YTJ",e.EVT_SHARE_FAILED="EVT_SHARE_FAILED",e.EVT_REVIVED="EVT_REVIVED",e.EVT_UNLOCK_TOUCH="EVT_UNLOCK_TOUCH",e.EVT_CHANGE_IN_GAME="EVT_CHANGE_IN_GAME",e.EVT_EXIT_CHANGE="EVT_EXIT_CHANGE",e.EVT_SHOW_GET_AGAIN="EVT_SHOW_GET_AGAIN",e.EVT_SHOW_LUCK_BOX="EVT_SHOW_LUCK_BOX",e.RECORD_START="RECORD_START",e.EVT_RECORD_STOP="EVT_RECORD_STOP",e.EVT_RECORD_SHOW="EVT_RECORD_SHOW"}(i||(i={})),t.exports=i,cc._RF.pop()},{}],EventDispatcher:[function(e,t,n){"use strict";cc._RF.push(t,"1cecdkMoCVLt4hklXcP0zkf","EventDispatcher"),cc.Class({extends:cc.Component,properties:{_listenerMap:null},ctor:function(){this._listenerMap=new Object},addListener:function(e,t,n){if(console.log("event = "+e),e&&t){var i=this._listenerMap[e];i||(i=this._listenerMap[e]=new Array);for(var o=0;o<i.length;o++)if(i[o].callback==t&&i[o].target==n)return;var s=new Array;s.callback=t,s.target=n,i.push(s)}},removeListener:function(e,t){if(e&&t)for(var n=this._listenerMap[e],i=n.length-1;i>=0;i--)n[i].target==t&&n.splice(i,1)},dispatchEvent:function(t,n){if(this._listenerMap[t])for(var i=this._listenerMap[t].slice(),o=0;o<i.length;o++){(0,i[o].callback)(n)}e("Game").gNode.emit(t,n)}}),cc._RF.pop()},{Game:"Game"}],FailDialog:[function(e,t,n){"use strict";cc._RF.push(t,"952913znWBL36FMVwJqmSr8","FailDialog");var i=e("Game"),o=e("EventConfig"),s=e("TipConfig");cc.Class({extends:cc.Component,properties:{btnShare:cc.Node,btnHome:cc.Node,again:cc.Node,bannar:cc.Label,toast:cc.Node,dialog:cc.Node,overNode:cc.Node,btnShareVideo:cc.Node},onLoad:function(){var e=this;if(window.tt&&i.getInstance().setBannerAdVisible(!0),cc.sys.platform===cc.sys.VIVO_GAME&&i.getInstance().supportedVivoAd&&i.getInstance().openVedioAd(),this.btnShareVideo.active=!1,i.getInstance().ttGameRecorderManager){var t=i.getInstance().ttGameRecorderManager;i.getInstance().videoPath||t.stop()}this.btnShareVideo.active=Boolean(window.tt&&i.getInstance().videoPath),this.btnShareVideo.on("click",function(t){tt.shareVideo({videoPath:""+i.getInstance().videoPath,success:function(){console.log("\u5206\u4eab\u6210\u529f\uff01"),i.getInstance().isShareHide()?i.getInstance().showToast("\u5206\u4eab\u6210\u529f"):(i.getInstance().showToast("\u5206\u4eab\u6210\u529f,\u91d1\u5e01+100"),i.getInstance().addCoin(100)),e.btnShareVideo.active=!1},fail:function(e){console.log("\u5206\u4eab\u5931\u8d25\uff01"+JSON.stringify(e)),i.getInstance().showToast("\u5206\u4eab\u5931\u8d25\uff01")}})},this),i.gNode.on(o.EVT_RECORD_SHOW,function(){e.btnShareVideo.active=Boolean(window.tt&&i.getInstance().videoPath)},this)},start:function(){var e,t,n=this;if(e=s.tipText.length,t=Math.floor(Math.random()*e),this.bannar.string=s.tipText[t],this.toast.active=!1,this.btnShare.on("click",function(){i.share.shareWechat(2,function(){i.getInstance().addCoin(80),n.toast.active=!0,n.btnShare.active=!1})}),this.btnShare.active=!i.getInstance().isShareHide(),this.btnHome.on("click",function(){i.getInstance().enterStart()}),this.again.on(cc.Node.EventType.TOUCH_END,function(){i.gNode.emit(o.EVT_PLAY_AGAIN),n.node.destroy()}),this.again.active=i.getInstance().haveAdvertisement(),this.btnShare.active=1!=i.getInstance().isShareHide(),this.btnShare.active=!1,this.toast.active=!1,this.overNode.active=!0,this.dialog.active=!1,this.again.y+=155,window.tt||i.getInstance().isQQ()||cc.sys.platform===cc.sys.OPPO_GAME||cc.sys.platform===cc.sys.VIVO_GAME||i.getInstance().isQttGame()||(this.btnShare.active=!0,this.toast.active=!0,this.again.y-=155,this.overNode.active=!1,this.dialog.active=!0),cc.sys.platform!==cc.sys.WECHAT_GAME||window.tt||i.getInstance().isQQ()){if(cc.sys.platform===cc.sys.BAIDU_GAME){swan.getOpenDataContext().postMessage({message:"BalanceRank"})}}else wx.postMessage({message:"BalanceRank"})},onDestroy:function(){i.gNode.targetOff(this)}}),cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game",TipConfig:"TipConfig"}],FruitInfo:[function(e,t,n){"use strict";cc._RF.push(t,"a3e8eWwEVJFK6bXvDuNoxRv","FruitInfo");var i=e("Game"),o=e("TipConfig");cc.Class({extends:cc.Component,properties:{btnClose:cc.Node,btnKnow:cc.Node,fruitSprite:cc.Sprite,fruitName:cc.Label,fruitDes:cc.Label,fruitReward:cc.Label},onLoad:function(){var e=this;this.btnClose.on("click",function(){e.node.destroy()}),this.btnKnow.on("click",function(){e.node.destroy()}),this.nameArr=["\u5927\u767d\u83dc","\u571f\u8c46","\u897f\u7ea2\u67ff","\u9ec4\u74dc","\u8304\u5b50","\u9e21\u7fc5","\u80e1\u841d\u535c","\u83b2\u85d5","\u8c4c\u8c46","\u5357\u74dc","\u7389\u7c73","\u897f\u5170\u82b1","\u6d77\u5e26\u7ed3","\u9999\u83c7","\u725b\u6392","\u8c46\u8150","\u51ac\u74dc","\u82e6\u74dc","\u5c0f\u767d\u83dc","\u9f99\u867e"]},init:function(e){var t=e;this.fruitName.string=this.nameArr[t-1],this.fruitSprite.spriteFrame=i.getInstance().fruitFrameList[e-1],this.fruitDes.string=o.fruitTips[e-1];var n=void 0;switch(t){case 1:case 2:case 3:case 6:case 7:n=5;break;case 4:case 5:case 8:case 12:case 16:n=10;break;case 9:case 13:case 15:case 18:case 19:n=15;break;case 10:case 11:case 14:case 17:case 20:n=20;break;default:n=5}this.fruitReward.string="+"+n+"\u91d1\u5e01\u6bcf\u5c0f\u65f6"}}),cc._RF.pop()},{Game:"Game",TipConfig:"TipConfig"}],Fruit:[function(e,t,n){"use strict";cc._RF.push(t,"b9adcX6rgFEL4hsl68PdcLs","Fruit");var i=e("Game");cc.Class({extends:cc.Component,properties:{img:cc.Node},onLoad:function(){this.node.setContentSize(this.img.getContentSize())},init:function(e){this.isBomb=!1,this.node.getComponent(cc.CircleCollider).enabled=!0,this.img.active=!0,this.img.getComponent(cc.Sprite).spriteFrame=i.getInstance().fruitFrameList[e-1];var t=i.getInstance().fruitColliderList[e-1];this.node.getComponent(cc.CircleCollider).offset=t.offset,this.node.getComponent(cc.CircleCollider).radius=t.radius,this.node.stopAllActions()},setBomb:function(){this.isBomb=!0,this.node.getComponent(cc.CircleCollider).enabled=!0,this.img.active=!0,this.img.getComponent(cc.Sprite).spriteFrame=i.getInstance().bombFrame,this.node.getComponent(cc.CircleCollider).offset=i.getInstance().bombColliderParam.offset,this.node.getComponent(cc.CircleCollider).radius=i.getInstance().bombColliderParam.radius,this.node.stopAllActions()},onDisable:function(){this.node.stopAllActions()}}),cc._RF.pop()},{Game:"Game"}],GameView:[function(e,t,n){"use strict";cc._RF.push(t,"ca6a5888HhHJrljOYiOwqzZ","GameView");var i=e("EventConfig"),o=e("Game"),s=e("Util"),c=e("Knife");cc.Class({extends:cc.Component,properties:{cutMinWidth:100,cutMaxWidth:300,cutMinJumpHeight:10,cutMaxJumpHeight:30,cutMinOffsetY:200,cutMaxOffsetY:400,cutMinRotate:360,cutMaxRotate:720,tiledPrefab:cc.Prefab,knife:cc.Node,flyPoint:cc.Node,knifeTargetPoint1:cc.Node,knifeTargetPoint2:cc.Node,knifeTargetPoint3:cc.Node,btnWeaponFrameList:[cc.SpriteFrame],btnChange:cc.Node,btnRoundWeapon:cc.Node,redPoint:cc.Node,btnWeapon:cc.Node,btnHome:cc.Node,btnNext:cc.Node,btnRecord:cc.Node,boomPrefab:cc.Prefab,titleNode:cc.Node,missNode:cc.Node,balanceNode:cc.Node,operNode:cc.Node,umbrella:cc.Node,boomBg:cc.Node,cutNum:0,lockOper:!1,sliceOffsetY:15,scorePrefab:cc.Prefab,revivePrefab:cc.Prefab,passPrefab:cc.Prefab,failedPrefab:cc.Prefab,weaponDlgPrefab:cc.Prefab,circleDlgPrefab:cc.Prefab,trippleDlgPrefab:cc.Prefab,turnplateDlgPrefab:cc.Prefab,unlockDlgPrefab:cc.Prefab,luckDlgPrefab:cc.Prefab,toastPrefab:cc.Prefab,newbiePrefab:cc.Prefab,btnTest:cc.Node,trippleLabel:cc.Node,perfectAnim:cc.Node,bgNode:cc.Node,subPrefab:cc.Prefab,bombPrefab:cc.Prefab,luckBoxDlgPrefab:cc.Prefab,animRecord:cc.Node,recordFrames:[cc.SpriteFrame],prefectMusics:{default:[],type:cc.AudioClip}},showNewbieDialog:function(){var e=cc.instantiate(this.newbiePrefab);e.zIndex=3,e.parent=this.node,e.getChildByName("dialog").getChildByName("btnClose").on("click",function(){e.destroy()}),e.getChildByName("dialog").getChildByName("btn").on("click",function(){e.destroy()})},showToast:function(e){var t=cc.instantiate(this.toastPrefab);t.zIndex=3,t.position=cc.v2(0,0),t.parent=this.node,t.getChildByName("text").getComponent(cc.Label).string=e;var n=cc.moveBy(2,cc.v2(0,300)),i=cc.fadeTo(2,100),o=cc.spawn(n,i);t.runAction(cc.sequence(o,cc.callFunc(function(){t.destroy()})))},showFruitUnlockDialog:function(e,t,n){var i=cc.instantiate(this.unlockDlgPrefab);i.zIndex=3,i.parent=this.node,i.getComponent("UnlockDialog").initFruit(e,t,n)},showPassDialog:function(e,t){var n=cc.instantiate(this.passPrefab);this.bgNode.addChild(n),n.zIndex=2,n.getComponent("PassDialog").setRewardNum(e),n.getComponent("PassDialog").updateSlice(t)},showReviveDialog:function(e){var t=cc.instantiate(this.revivePrefab);this.node.addChild(t),t.getComponent("ReviveDialog").countdown(10),t.zIndex=2,t.getComponent("ReviveDialog").setTimeoutCb(e)},showFailDialog:function(){var e=cc.instantiate(this.failedPrefab);this.bgNode.addChild(e),e.zIndex=2,this.hasRevive=0},showWeaponDialog:function(){var e=cc.instantiate(this.weaponDlgPrefab);this.node.addChild(e),e.zIndex=3},showCicleRoundDialog:function(){if(o.getInstance().haveAdvertisement()){var e=cc.instantiate(this.circleDlgPrefab);this.node.addChild(e),e.zIndex=3}},showTrippleDialog:function(){if(o.getInstance().haveAdvertisement()){var e=cc.instantiate(this.trippleDlgPrefab);this.node.addChild(e),e.zIndex=3}},closeTurnplate:function(){cc.isValid(this.turnplate)&&(this.turnplate.destroy(),this.turnplate=null)},showTurnplateDialog:function(){console.log("showTurnplateDialog11111"),this.closeTurnplate(),console.log("showTurnplateDialog22222");var e=cc.instantiate(this.turnplateDlgPrefab);console.log("showTurnplateDialog33333"),this.bgNode.addChild(e),console.log("showTurnplateDialog44444"),e.zIndex=2,console.log("showTurnplateDialog55555"),this.turnplate=e},showLuckDialog:function(){if(o.getInstance().haveAdvertisement()){var e=cc.instantiate(this.luckDlgPrefab);this.node.addChild(e),e.zIndex=2}},showLuckBoxDialog:function(e){if(o.getInstance().haveAdvertisement()){var t=cc.instantiate(this.luckBoxDlgPrefab);this.node.addChild(t),t.getComponent("treasureBoxDialog").init(e),t.runAction(cc.sequence(cc.scaleTo(.1,1.08),cc.scaleTo(.1,1))),t.zIndex=3}},onLoad:function(){this.hasRevive=0,this.boomBg.active=!1,this.boomBg.zIndex=1,this.hasAllKill=!1,o.getInstance().gameView=this,o.getInstance().isRecord=!1,o.getInstance().videoPath=null,this.fillBoomPool(20),this.addEvent(),this.initUI(),this.initMiss(),this.initDash(),this.initPerfectAnim()},fillBoomPool:function(e){if(!(o.getInstance().boomPool.size()>=e))for(var t=o.getInstance().boomPool.size();t<e;t++){var n=cc.instantiate(this.boomPrefab);o.getInstance().putBoomPool(n)}},createBoomNode:function(){var e=o.getInstance().getBoomPool();return null==e&&(e=cc.instantiate(this.boomPrefab)),e},destroyBoomNode:function(e){o.getInstance().putBoomPool(e)},createBombNode:function(){var e=o.getInstance().getBombPool();return null==e&&(e=cc.instantiate(this.bombPrefab)),e},destroyBombNode:function(e){o.getInstance().putBombPool(e)},initPerfectAnim:function(){this.perfectAnim.active=!1},lock:function(){this.lockOper=!0},unlock:function(){this.lockOper=!1},initDash:function(){this.fruitSliceList=[],this.umbrella.zIndex=1,this.umbrella.originPos=this.umbrella.position},clearDash:function(){for(var e=0;e<this.fruitSliceList.length;e++)this.fruitSliceList[e].destroy();this.fruitSliceList=[],this.umbrella.position=this.umbrella.originPos},updateRedPoint:function(){var e=o.getInstance().canObtainRoundWeaponFree();this.redPoint.active=e},initUI:function(){var e=this;this.redPoint.active=!1,this.updateRedPoint(),this.btnRoundWeapon.on("click",function(){this.showCicleRoundDialog()}.bind(this)),this.btnRoundWeapon.active=o.getInstance().canObtainRoundWeaponFree(),this.btnWeapon.on("click",function(){this.showTrippleDialog()}.bind(this)),this.btnRoundWeapon.active=o.getInstance().haveAdvertisement(),this.btnWeapon.active=o.getInstance().haveAdvertisement(),this.btnRecord.active=Boolean(window.tt),this.btnRecord.on("click",function(t){if(!o.getInstance().isRecord){o.getInstance().videoPath=null;var n=o.getInstance().ttGameRecorderManager;n||"undefined"!=tt.getGameRecorderManager&&(o.getInstance().ttGameRecorderManager=tt.getGameRecorderManager(),o.getInstance().ttGameRecorderManager.onError(function(e){console.log("onError",e)}),o.getInstance().ttGameRecorderManager.onInterruptionBegin(function(e){console.log("onInterruptionBegin",e)}),o.getInstance().ttGameRecorderManager.onInterruptionEnd(function(e){console.log("onInterruptionEnd",e)}),(n=o.getInstance().ttGameRecorderManager).onStart(function(e){console.log("\u5934\u6761\u5f55\u5c4f\u5f00\u59cb"),o.gNode.emit(i.RECORD_START)}),n.onStop(function(e){o.getInstance().showToast("\u5f55\u5c4f\u7ed3\u675f"),console.log("\u5f55\u5c4f\u7ed3\u675f",e.videoPath),o.getInstance().videoPath=e.videoPath,o.gNode.emit(i.EVT_RECORD_STOP)},e)),n.start({duration:30}),e.btnRecord.getComponent(cc.Button).enabled=!1}},this),this.btnChange.on("click",function(){o.gNode.emit(i.EVT_CHANGE_IN_GAME,this.titleNode.getComponent("TitleView").coinNum),o.getInstance().isInGameChange=!0,this.showWeaponDialog()}.bind(this)),this.btnHome.on("click",function(){o.getInstance().enterStart()}.bind(this)),this.btnNext.on("click",function(){this.nextLevel()}.bind(this)),this.btnTest.on("click",function(){o.getInstance().enterTurnplate()}),this.balanceNode.active=!1,this.balanceNode.zIndex=1,this.operNode.zIndex=1},initMiss:function(){this.missNode.active=!1,this.missNode.zIndex=1,this.missNode.originPos=this.missNode.position},nextLevel:function(){var e=o.getInstance().getLevel(),t=o.getInstance().subLevel;this.loadLevel(e,t),this.balanceNode.active=!1},playMissAnim:function(){var e=cc.moveBy(1,cc.v2(0,100));this.missNode.active=!0,this.missNode.position=this.missNode.originPos,this.missNode.runAction(cc.sequence(e,cc.callFunc(function(){this.missNode.active=!1}.bind(this))))},playPerfectAnim:function(){var e=this;this.perfectAnim.active=!0;var t=Math.floor(Math.random()*this.prefectMusics.length);o.getInstance().isSoundOpen&&cc.audioEngine.play(this.prefectMusics[t],!1),this.perfectAnim.getComponent(sp.Skeleton).setToSetupPose(),this.perfectAnim.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),this.perfectAnim.getComponent(sp.Skeleton).setCompleteListener(function(){e.perfectAnim.active=!1})},playBombBgAnim:function(){var e=this;this.boomBg.stopAllActions(),this.boomBg.opacity=100,this.boomBg.active=!0;var t=cc.fadeIn(.2),n=cc.fadeOut(.2),i=cc.callFunc(function(){e.boomBg.active=!1});this.boomBg.runAction(cc.sequence(t,n,i))},updateKnifeType:function(){var e=o.getInstance().getTrippleNum(),t=o.getInstance().getCircleNum();e>0&&t>0?(this.trippleLabel.active=!0,this.trippleLabel.getComponent(cc.Label).string="\u56de\u65cbx"+t+"\n\u4e09\u53c9\u621fx"+e,this.knife.getComponent("Knife").setAttackType(c.ATTACK_TYPE.TRIPE_ROUND)):e>0?(this.trippleLabel.active=!0,this.trippleLabel.getComponent(cc.Label).string="\u4e09\u53c9\u621fx"+e,this.knife.getComponent("Knife").setAttackType(c.ATTACK_TYPE.TRIPLE)):t>0?(this.trippleLabel.active=!0,this.trippleLabel.getComponent(cc.Label).string="\u56de\u65cbx"+t,this.knife.getComponent("Knife").setAttackType(c.ATTACK_TYPE.ROUND)):(this.trippleLabel.active=!1,this.knife.getComponent("Knife").setAttackType(c.ATTACK_TYPE.NORMAL))},start:function(){this.titleNode.zIndex=3,this.titleNode.getComponent("TitleView").setCoin(0);var e=o.getInstance().getLevel(),t=o.getInstance().subLevel;this.loadLevel(e,t);var n=this.knifeTargetPoint1.parent.convertToWorldSpaceAR(this.knifeTargetPoint1.position),i=this.knifeTargetPoint1.parent.convertToWorldSpaceAR(this.knifeTargetPoint2.position),s=this.knifeTargetPoint1.parent.convertToWorldSpaceAR(this.knifeTargetPoint3.position);this.knife.getComponent("Knife").setKnifeTargetPos(n,i,s),this.knife.getComponent("Knife").setSkin(o.getInstance().getSkinId()),this.updateKnifeType()},loadLevel:function(e,t){var n=this;1==cc.isValid(this.tileNode)&&(this.tileNode.getComponent("Tiled").clearFruit(),this.tileNode.destroy()),this.titleNode.getComponent("TitleView").showDesc(!0),this.scheduleOnce(function(){e==o.getInstance().getNewbieLevel()&&1==t&&n.showNewbieDialog(),n.tileNode=cc.instantiate(n.tiledPrefab),n.tileNode.parent=n.bgNode;var i;if(1==o.getInstance().isTmxTest)i=o.getInstance().testTmxAsset;else if(0==o.getInstance().isLevelAuto(e))i=o.getInstance().levelData[e-1].tmxList[t-1];else{!0;var c=o.getInstance().getAILevelInfo();null==c&&(c=o.getInstance().generateNewLevel(e),o.getInstance().setAILevelInfo(c));var a=c["subLevel"+t];i=o.getInstance().levelData[a-1].tmxList[t-1]}if(1==t&&(o.getInstance().setBannerAdVisible(!0),window.tt&&o.getInstance().setBannerAdVisible(!1),n.resetRecordState(),n.titleNode.getComponent("TitleView").setCoin(0),s.random(100)<=15&&0==o.getInstance().isAllSkinOwned()&&cc.sys.platform!==cc.sys.VIVO_GAME&&n.showLuckDialog(),cc.sys.platform==cc.sys.WECHAT_GAME&&!window.tt&&!o.getInstance().isQQ())){if(1==cc.isValid(n.subNode)&&n.subNode.destroy(),n.subNode=cc.instantiate(n.subPrefab),n.bgNode.addChild(n.subNode),n.subNode.position=cc.v2(-437,564),cc.sys.platform===cc.sys.WECHAT_GAME)wx.postMessage({message:"exceed"});else if(cc.sys.platform===cc.sys.BAIDU_GAME){swan.getOpenDataContext().postMessage({message:"exceed"})}n.subNode.getComponent(cc.WXSubContextView).enabled=!1,n.scheduleOnce(function(){n.subNode.getComponent(cc.WXSubContextView).update()},3)}n.tileNode.getComponent("Tiled").initTmx(i,e,t),n.tileNode.addComponent("MatrixRotation"),n.titleNode.getComponent("TitleView").setLevel(e,t),n.operNode.active=!0,n.lockOper=!0,n.clearDash(),e%o.getInstance().rewardTrippleLevels==0&&1==o.getInstance().subLevel&&n.tileNode.getComponent("Tiled").addTrippleKnife(),e%3==0&&1==o.getInstance().subLevel&&cc.sys.platform===cc.sys.VIVO_GAME&&o.getInstance().supportedVivoAd&&o.getInstance().openVedioAd()},0)},resetRecordState:function(){this.btnRecord.getComponent(cc.Button).enabled=!0,this.btnRecord.getComponent(cc.Sprite).spriteFrame=this.recordFrames[0],this.animRecord.active=!1,o.getInstance().isRecord=!1},addEvent:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){console.log("=======GameView TOUCH_START========="),1!=e.lockOper?e.knife.getComponent("Knife").attack():console.log("oper is locked")}),o.gNode.on(i.EVT_TURNPLATE_RESET,function(){e.showTurnplateDialog()},this),o.gNode.on(i.EVT_UNLOCK_TOUCH,function(){e.lockOper=!1},this),o.gNode.on(i.EVT_PLAY_AGAIN,function(){var t=o.getInstance().getLevel();e.loadLevel(t,1)},this),o.gNode.on(i.EVT_PLAY_CONTINUE,function(){e.unlock()},this),o.gNode.on(i.EVT_PLAY_SKIP,function(){o.getInstance().backLevel();var t=o.getInstance().getLevel();e.titleNode.getComponent("TitleView").setLevel(t),e.titleNode.getComponent("TitleView").setCoin(o.getInstance().getCoin()),e.titleNode.getComponent("TitleView").showDesc(!1)},this),o.gNode.on(i.EVT_CUTFRUIT,function(e){var t=this;1==e.getComponent("Fruit").isBomb?this.tileNode.getComponent("Tiled").getFruitNum()>0?(this.knife.getComponent("Knife").reset(),o.getInstance().playBombSound(),this.handleCutBomb(e),this.scheduleOnce(function(){t.unlock(),t.failed(!0)},.3)):(e.getChildByName("img").active=!1,e.getComponent(cc.CircleCollider).enabled=!1):(this.handleCutFruit(e),1==cc.isValid(e.trippleKnife)&&this.handleGetTrippleKnife(e.trippleKnife),o.getInstance().playFruitSound(e.fruitType),cc.sys.platform!==cc.sys.WECHAT_GAME||window.tt?cc.sys.platform===cc.sys.BAIDU_GAME?swan.vibrateShort():cc.sys.platform===cc.sys.OPPO_GAME||cc.sys.platform===cc.sys.VIVO_GAME?qg.vibrateShort():window.tt&&tt.vibrateShort():wx.vibrateShort(),this.cutNum++)}.bind(this),this),o.gNode.on(i.EVT_CUT_START,function(){o.getInstance().getTrippleNum()>0?(o.getInstance().setTrippleNum(o.getInstance().getTrippleNum()-1),this.hasTripple=!0):this.hasTripple=!1,o.getInstance().getCircleNum()>0?(o.getInstance().setCircleNum(o.getInstance().getCircleNum()-1),this.hasCircle=!0):this.hasCircle=!1,this.cutNum=0,o.getInstance().playAttackSound(),this.lock()}.bind(this),this),o.gNode.on(i.EVT_CUT_END,function(){if(1==this.hasTripple&&0==o.getInstance().getTrippleNum()&&this.showToast("\u4e09\u53c9\u621f \u7ed3\u675f"),1==this.hasCircle&&0==o.getInstance().getCircleNum()&&this.showToast("\u6b66\u5668\u56de\u65cb \u7ed3\u675f"),this.updateKnifeType(),0!=this.cutNum){this.tileNode.getComponent("Tiled").getFruitNum();if(0!=this.tileNode.getComponent("Tiled").getFruitNum())this.unlock();else{if(this.cutNum>=this.tileNode.getComponent("Tiled").getTotalFruitNum()&&(o.getInstance().addSkillAchieve(1),this.playPerfectAnim(),this.hasAllKill=!0),4==o.getInstance().subLevel){var e=o.getInstance().getLevel()+1;if(1==o.getInstance().isLevelAuto(e)){var t=o.getInstance().getAILevelInfo(),n=!1;null!=t&&t.level==e&&(n=!0),0==n&&(t=o.getInstance().generateNewLevel(e),o.getInstance().setAILevelInfo(t))}}this.pass()}}else this.failed()}.bind(this),this),o.gNode.on(i.EVT_CIRCLE_ROUND_CHANGED,function(t){e.showToast("\u83b7\u5f97\u56de\u65cb\u9556x"+t),e.updateKnifeType()},this),o.gNode.on(i.EVT_TRIPPLE_ROUND_CHANGED,function(t){e.showToast("\u83b7\u5f97\u4e09\u53c9\u621fx"+t),e.updateKnifeType()},this),o.gNode.on(i.EVT_ONTAIN_ROUND_FREE,function(){e.updateRedPoint(),e.btnRoundWeapon.active=!1},this),o.gNode.on(i.EVT_SHOW_TURNPLATE,function(){e.showTurnplateDialog()},this),o.gNode.on(i.EVT_NEXT_LEVEL,function(){e.nextLevel()},this),o.gNode.on(i.EVT_COIN_CHANGE,function(){e.titleNode.getComponent("TitleView").setCoin(o.getInstance().getCoin())},this),o.gNode.on(i.EVT_REVIVED,function(){e.hasRevive++},this),o.gNode.on(i.EVT_EXIT_CHANGE,function(){e.titleNode.getComponent("TitleView").setCoin(o.getInstance().currentCoinNum)},this),o.gNode.on(i.EVT_SHOW_LUCK_BOX,function(){e.showLuckBoxDialog(1)},this),o.gNode.on(i.RECORD_START,function(){e.btnRecord.getComponent(cc.Sprite).spriteFrame=e.recordFrames[1],e.animRecord.active=!0,o.getInstance().isRecord=!0},this),o.gNode.on(i.EVT_RECORD_STOP,function(){e.resetRecordState(),o.gNode.emit(i.EVT_RECORD_SHOW)},this)},failed:function(e){this.hasAllKill=!1,1!=e&&(this.playMissAnim(),o.getInstance().playMissSound()),o.getInstance().sendEventReq(3001,["level:"+o.getInstance().getLevel(),"subLevel:"+o.getInstance().subLevel]),this.scheduleOnce(function(){this.hasRevive>1?(o.getInstance().gameView.showFailDialog(),o.gNode.emit(i.EVT_PLAY_SKIP),this.hasRevive=0):this.showReviveDialog(function(){o.getInstance().backLevel();var e=o.getInstance().getLevel();this.titleNode.getComponent("TitleView").setLevel(e),this.showFailDialog(),o.getInstance().saveLocalPlayerData()}.bind(this))}.bind(this),1)},pass:function(){var e=this;1==o.getInstance().isLastSubLevel()?(o.getInstance().playPassSound(),this.scheduleOnce(function(){var t=o.getInstance().getLevel(),n=(t-1)%4,i=o.getInstance().getFruitSliceData();i[n]=e.tileNode.getComponent("Tiled").sliceList,e.titleNode.getComponent("TitleView").showDesc(!1),o.getInstance().setFruitSliceData(JSON.stringify(i)),o.getInstance().passLevel();var s=o.getInstance().getLevel();e.titleNode.getComponent("TitleView").setLevel(s,o.getInstance().subLevel),e.showPassDialog(e.titleNode.getComponent("TitleView").coinNum,t);var c=o.getInstance().getUnlockFruitByLevel(t);if(null!=c&&(e.showFruitUnlockDialog(c,s,o.getInstance().subLevel),o.getInstance().addFruit(c)),1==e.hasAllKill?(o.getInstance().addCoin(e.titleNode.getComponent("TitleView").coinNum+100),e.titleNode.getComponent("TitleView").setCoin(o.getInstance().getCoin()),o.getInstance().showToast("\u4e00\u5200\u5207\u5956\u52b1 \u91d1\u5e01+100"),e.hasAllKill=!1):(o.getInstance().addCoin(e.titleNode.getComponent("TitleView").coinNum),e.titleNode.getComponent("TitleView").setCoin(o.getInstance().getCoin())),o.getInstance().saveLocalPlayerData(),cc.sys.platform!=cc.sys.WECHAT_GAME||window.tt){if(cc.sys.platform===cc.sys.BAIDU_GAME){swan.getOpenDataContext().postMessage({message:"UploadGameData",score:t,id:o.getInstance().gameData.ID})}}else wx.postMessage({message:"UploadGameData",score:t,id:o.getInstance().gameData.ID})},1)):this.scheduleOnce(function(){o.getInstance().passLevel();var t=o.getInstance().getLevel();e.titleNode.getComponent("TitleView").setLevel(t,o.getInstance().subLevel),e.nextLevel(),o.getInstance().saveLocalPlayerData()},1)},getFlyPoint:function(){var e=this.fruitSliceList.length*this.sliceOffsetY;return cc.v2(this.flyPoint.x,this.flyPoint.y+e)},handleDashSlice:function(e){var t=new cc.Node;t.parent=this.bgNode,t.addComponent(cc.Sprite),t.addComponent(cc.Sprite).spriteFrame=o.getInstance().fruitSliceFrameList[e-1];var n=s.random(2);2==n&&(n=-1);var i=s.random(8)-1;t.position=cc.v2(this.flyPoint.x+n*i,this.flyPoint.y+this.fruitSliceList.length*this.sliceOffsetY),this.fruitSliceList.push(t),this.umbrella.position=cc.v2(t.x+20,t.y+25)},handleGetTrippleKnife:function(e){var t=o.getInstance().getTrippleNum();o.getInstance().setTrippleNum(t+o.TRIPPLE_REWARD_NUM),this.tileNode.getComponent("Tiled").releaseTrippleKnife();var n=e.parent.convertToWorldSpaceAR(e.position),i=this.node.convertToNodeSpaceAR(n);e.parent=this.node,e.position=i;var s=cc.v2(100,-100),c=s.mag()/400,a=cc.v2(this.knife.originPos.x,this.knife.originPos.y),r=cc.scaleTo(c,2),l=cc.fadeTo(c,125),h=cc.rotateTo(c,0),d=cc.moveBy(c,s),g=cc.spawn(r,l,h,d),u=cc.v2(i.x+s.x,i.y+s.y).sub(a).mag(),f=cc.moveTo(u/800,a).easing(cc.easeSineIn());e.runAction(cc.sequence(g,f,cc.callFunc(function(){e.destroy()}.bind(this))))},handleCutBomb:function(e){this.playBombBgAnim();var t=this.createBombNode(),n=e.parent.convertToWorldSpaceAR(e.position),i=this.bgNode.convertToNodeSpaceAR(n);t.parent=this.bgNode,t.position=i,t.getComponent(sp.Skeleton).setToSetupPose(),t.getComponent(sp.Skeleton).setAnimation(0,"auto",!1),t.getComponent(sp.Skeleton).setCompleteListener(function(){this.destroyBombNode(t)}.bind(this))},handleCutFruit:function(e){var t=e.fruitType,n=e.parent.convertToWorldSpaceAR(e.position),i=this.node.convertToNodeSpaceAR(n);this.fruitBoomAnim(i,t);var c=this.cutNum+1;this.playScoreAnim(c,i),this.addCoin(c);var a=o.getInstance().fruitPartFrame1[t-1],r=o.getInstance().fruitPartFrame2[t-1],l=new cc.Node;l.addComponent(cc.Sprite),l.getComponent(cc.Sprite).spriteFrame=a,l.parent=this.node,l.position=i;var h=new cc.Node;h.addComponent(cc.Sprite),h.getComponent(cc.Sprite).spriteFrame=r,h.parent=this.node,h.position=i;var d=this.cutMinWidth+s.random(this.cutMaxWidth-this.cutMinWidth),g=this.cutMinWidth+s.random(this.cutMaxWidth-this.cutMinWidth),u=this.cutMinOffsetY+s.random(this.cutMaxOffsetY-this.cutMinOffsetY),f=this.cutMinOffsetY+s.random(this.cutMaxOffsetY-this.cutMinOffsetY),p=this.cutMinJumpHeight+s.random(this.cutMaxJumpHeight-this.cutMinJumpHeight),m=this.cutMinJumpHeight+s.random(this.cutMaxJumpHeight-this.cutMinJumpHeight),v=cc.v2(l.x-d,l.y-u),A=cc.v2(h.x+g,h.y-f),I=(l.position,h.position,cc.jumpTo(.5,v,p,1)),C=cc.jumpTo(.5,A,m,1),E=this.cutMinRotate+s.random(this.cutMaxRotate-this.cutMinRotate),T=this.cutMinRotate+s.random(this.cutMaxRotate-this.cutMinRotate),N=s.random(1),S=this.getFlyPoint();0==N?(l.runAction(cc.sequence(I,cc.moveTo(.5,S),cc.callFunc(function(){l.destroy()}.bind(this)))),h.runAction(cc.sequence(C,cc.moveTo(.5,S),cc.callFunc(function(){h.destroy(),this.handleDashSlice(t)}.bind(this))))):(h.runAction(cc.sequence(I,cc.moveTo(.5,S),cc.callFunc(function(){h.destroy()}.bind(this)))),l.runAction(cc.sequence(C,cc.moveTo(.5,S),cc.callFunc(function(){l.destroy(),this.handleDashSlice(t)}.bind(this))))),l.runAction(cc.rotateBy(2,E)),h.runAction(cc.rotateBy(2,T));var _=1/o.getInstance().getSubLevelNum(),b=(o.getInstance().subLevel-1)*_,P=(1-this.tileNode.getComponent("Tiled").getFruitNum()/this.tileNode.getComponent("Tiled").getTotalFruitNum())*_;this.titleNode.getComponent("TitleView").setPercent(b+P)},addCoin:function(e){console.log("addCoin coin = "+e);var t=this.titleNode.getComponent("TitleView").coinNum;t+=e,this.titleNode.getComponent("TitleView").setCoin(t)},playScoreAnim:function(e,t){var n=cc.instantiate(this.scorePrefab);n.getComponent(cc.Label).string="+"+e,n.parent=this.node,n.position=t;var i=cc.moveBy(1,cc.v2(0,300));n.runAction(cc.sequence(i,cc.callFunc(function(){n.destroy()}.bind(this))))},fruitBoomAnim:function(e,t){var n,i=this.createBoomNode();i.rotation=s.random(360),i.position=e,i.parent=this.node,i.getComponent(sp.Skeleton).setToSetupPose(),n=1==s.random(2)?"animation":"animation2",i.getComponent(sp.Skeleton).setAnimation(0,n,!1),i.getComponent(sp.Skeleton).setSkin(["dbc","td","xhs","hg","qz","jc","hlb","lo","wd","ng","ym","xlh","hd","xg","np","df","dg","kg","qj","lx"][t-1]),i.getComponent(sp.Skeleton).setCompleteListener(function(){this.destroyBoomNode(i)}.bind(this))},onDestroy:function(){o.getInstance().gameView=null,o.gNode.targetOff(this)}}),cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game",Knife:"Knife",Util:"Util"}],Game:[function(e,t,n){"use strict";cc._RF.push(t,"2828f6MgoRFPIePWXQFDmqk","Game");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("Util"),s=e("EventConfig"),c=cc.Class({name:"LevelInfo",properties:{bigLevel:0,tmxList:[cc.TiledMapAsset]}}),a=cc.Class({name:"AILevelInfo",properties:{level:1,subLevel1:1,subLevel2:1,subLevel3:1,subLevel4:1}}),r=cc.Class({name:"AchieveData",properties:{achieveIndex:0,currentCount:0}}),l=cc.Class({name:"AchieveConf",properties:{count:0,reward:0}}),h=(cc.Class({name:"FruitSlice",properties:{id:0}}),cc.Class({name:"FruitUnlockInfo",properties:{fruitId:1,unlockLevel:1,replaceFruitId:1}})),d=cc.Class({name:"ColliderParam",properties:{offset:cc.v2(0,0),radius:0}}),g=cc.Class({extends:cc.Component,properties:{rankPrefab:cc.Prefab,startView:null,gameView:null,loadingPrefab:cc.Prefab,fruitColliderList:{default:[],type:[d]},subLevel:1,isSoundOpen:!0,offlineRewardList:[cc.Integer],bombFrame:cc.SpriteFrame,bombColliderParam:{default:null,type:d},fruitFrameList:[cc.SpriteFrame],fruitSliceFrameList:[cc.SpriteFrame],fruitPartFrame1:[cc.SpriteFrame],fruitPartFrame2:[cc.SpriteFrame],knifeYTJFrame:cc.SpriteFrame,knifeSkinList1:{default:[],type:[cc.SpriteFrame]},knifeSkinList2:{default:[],type:[cc.SpriteFrame]},knifeSkinList3:{default:[],type:[cc.SpriteFrame]},knifeSkinList4:{default:[],type:[cc.SpriteFrame]},knifeSkinList5:{default:[],type:[cc.SpriteFrame]},sdkAppName:"fruit_master",sounds:{default:[],type:cc.AudioClip},newFruitSounds:{default:[],type:cc.AudioClip},isTmxTest:!1,testTmxAsset:cc.TiledMapAsset,rewardTrippleLevels:5,levelData:{default:[],type:[c]},achieveSignConf:{default:[],type:[l]},achieveVedioConf:{default:[],type:[l]},achieveShareConf:{default:[],type:[l]},achieveWeaponConf:{default:[],type:[l]},achieveSkillConf:{default:[],type:[l]},achieveFruitConf:{default:[],type:[l]},fruitPrefab:cc.Prefab,priceList:[cc.Integer],fruitUnlockRule:{default:[],type:[h]},gameData:null,toastPrefab:cc.Prefab,nativeAd:null},statics:{CIRCLE_ROUND_REWARD_NUM:10,TRIPPLE_REWARD_NUM:5,_instance:null,getInstance:function(){return g._instance},GAME_PROP:{COIN:1,BUFF:1e3,BUFF_CIRCLEROUND:1001,BUFF_TRIPPLE:1002,WEAPON_PT:2e3,WEAPON_XY:3e3,WEAPON_ZY:4e3,WEAPON_SS:5e3,WEAPON_CS:6e3,WEAPON_YTJ:1e4},GAME_ATTR:{KNIFE_SKIN:"KNIFE_SKIN",FRUIT_LIST:"FRUIT_LIST",FRUIT_SLICE:"FRUIT_SLICE",AI_LEVEL:"AI_LEVEL",LEVEL:"LEVEL",SIGN_DATA:"SIGN_DATA",WEAPON_REWARD_DATA:"WEAPON_REWARD_DATA",ACHIEVE_SIGN:"ACHIEVE_SIGN",ACHIEVE_VEDIO:"ACHIEVE_VEDIO",ACHIEVE_SHARE:"ACHIEVE_SHARE",ACHIEVE_WEAPON:"ACHIEVE_WEAPON",ACHIEVE_SKILL:"ACHIEVE_SKILL",ACHIEVE_FRUIT:"ACHIEVE_FRUIT",BOMB:"BOMB",NEWBIE_LEVEL:"NEWBIE_LEVEL",FRUIT_STORE:"FRUIT_STORE",AVATAR:"avatar",NICKNAME:"nick",GENDER:"gender"},DATA_TYPE:{PROP:1,ATTR:2},MAX_FRUIT_TYPE:20},onLoad:function(){var t=this;if(this.SERVER_IP="https://applet.huanlefish.com",cc.sys.platform!==cc.sys.WECHAT_GAME||window.tt||this.isQQ()?cc.sys.platform===cc.sys.BAIDU_GAME?(this.LOGIN_TYPE="BAIDU",this.PROVIDER="baidu",this.APP_ID="15739826",this.GameId="391"):cc.sys.platform===cc.sys.OPPO_GAME?(this.LOGIN_TYPE="THIRD",this.PROVIDER="oppo",this.pkgName="com.qmqc.kyx.nearme.gamecenter",this.APP_ID="30050539",this.GameId="393",qg.initAdService({appId:this.APP_ID,isDebug:!0,success:function(e){console.log("success")},fail:function(e){console.log("fail:"+e.code+e.msg)},complete:function(e){console.log("complete"),t.initBannerAd(),t.nativeAdIDs=["52315","56293","56294","56295"]}})):cc.sys.platform===cc.sys.VIVO_GAME?(this.LOGIN_TYPE="OPENCODE",this.PROVIDER="vivo",this.pkgName="com.gzyr.qmqc.vivo",this.GameId="394",this.APP_ID="100000966",qg.getSystemInfoSync().platformVersionCode<1031?this.supportedVivoAd=!1:this.supportedVivoAd=!0):window.tt?(console.log("Current Platform is Toutiao"),this.LOGIN_TYPE="OPENCODE",this.PROVIDER="toutiao",this.APP_ID="tt235955e4bc73af38",this.GameId="382"):this.isQQ()?(this.LOGIN_TYPE="QQ",this.PROVIDER="QQ",this.GameId="395",this.APP_ID="1109640406",qq.reportAnalytics("finishShow")):this.isQttGame()?(this.LOGIN_TYPE="QUTOUTIAO",this.PROVIDER="qutoutiao",this.GameId="396",this.APP_ID="a3GqkXinU3ks"):console.log("\u6e38\u5ba2\u6a21\u5f0f"):(this.LOGIN_TYPE="WEIXIN",this.PROVIDER="weixin",this.APP_ID="wx619df77a1fe52f8e",this.GameId="392"),this.shareTicket=-1,g._instance=this,g.eventDispatcher=new(e("EventDispatcher")),g.network=this.node.addComponent("NetworkManager"),g.share=this.node.addComponent("Share"),g.Util=e("Util"),cc.game.addPersistRootNode(this.node),g.gNode=this.node,g.achieveDialog=null,this.isRecord=!1,this.fruitDirection=0,this.currentCoinNum=0,this.isInGameChange=!1,this.addEvent(),this.initSDK(),this.initNodePool(),this.bannerAdList=[],cc.sys.platform!==cc.sys.platform.OPPO_GAME&&!this.isQQ())for(var n=0;n<3;n++)this.initBannerAd();this.isQQ()&&this.creatQQBanner()},initNodePool:function(){this.boomPool=new cc.NodePool,this.fruitPool=new cc.NodePool,this.bombPool=new cc.NodePool},putBombPool:function(e){this.bombPool.put(e)},getBombPool:function(){return this.bombPool.get()},putBoomPool:function(e){this.boomPool.put(e)},getBoomPool:function(){return this.boomPool.get()},putFruitPool:function(e){this.fruitPool.put(e)},getFruitPool:function(){return this.fruitPool.get()},closeLoadingAnim:function(){1==cc.isValid(this.loadingAnim)&&this.loadingAnim.destroy()},showLoadingAnim:function(){this.closeLoadingAnim(),this.loadingAnim=cc.instantiate(this.loadingPrefab),cc.Canvas.instance.node.addChild(this.loadingAnim),this.loadingAnim.zIndex=3},showToast:function(e){var t=cc.instantiate(this.toastPrefab);t.zIndex=3,t.position=cc.v2(0,0),t.parent=cc.Canvas.instance.node;var n=t.getChildByName("text");n.getComponent(cc.Label).string=e,n.on("size-changed",function(){n.getContentSize().width>t.getContentSize().width-100&&t.setContentSize(cc.size(n.getContentSize().width+100,t.getContentSize().height))});var i=cc.moveBy(2,cc.v2(0,300)),o=cc.fadeTo(2,100),s=cc.spawn(i,o);t.runAction(cc.sequence(s,cc.callFunc(function(){t.destroy()})))},initSDK:function(){var e=this;window.tt?(tt.showShareMenu(),tt.updateShareMenu({withShareTicket:!0})):cc.sys.platform!==cc.sys.WECHAT_GAME||this.isQQ()||window.tt?cc.sys.platform===cc.sys.BAIDU_GAME?swan.showShareMenu():this.isQQ()&&qq.showShareMenu():(wx.showShareMenu(),wx.updateShareMenu({withShareTicket:!0})),this.itemVals=[],this.sdkToken="",this.sendSDKConfigReq(function(t){e.sdkConfig=t,console.log("==== sdkConfig ====",JSON.stringify(t))})},addEvent:function(){var e=this;g.gNode.on(s.EVT_CUTFRUIT,function(t){var n=t.fruitType,i=e.getAttr(g.GAME_ATTR.ACHIEVE_FRUIT),o=JSON.parse(i),s=o[n-1],c=s.achieveIndex;e.achieveFruitConf[c];s.currentCount++,e.setAttr(g.GAME_ATTR.ACHIEVE_FRUIT,JSON.stringify(o))},this),g.gNode.on(s.EVT_FINISHED_AD_VEDIO,function(){var t=e.getAttr(g.GAME_ATTR.ACHIEVE_VEDIO),n=JSON.parse(t);n.currentCount++,e.setAttr(g.GAME_ATTR.ACHIEVE_VEDIO,JSON.stringify(n)),e.saveLocalPlayerData()},this),g.gNode.on(s.EVT_FINISED_SHARE,function(){var t=e.getAttr(g.GAME_ATTR.ACHIEVE_SHARE),n=JSON.parse(t);n.currentCount++,e.setAttr(g.GAME_ATTR.ACHIEVE_SHARE,JSON.stringify(n)),e.saveLocalPlayerData()},this),g.gNode.on(s.EVT_ACHIEVE_FINISHED,function(t){var n=t.type,i=t.index,o=t.fruitId,s=t.double;if(n==g.GAME_ATTR.ACHIEVE_FRUIT){var c=e.achieveFruitConf[i],a=e.getAttr(g.GAME_ATTR.ACHIEVE_FRUIT),r=JSON.parse(a),l=r[o-1];l.achieveIndex=i+1,l.currentCount-=c.count,a=JSON.stringify(r),e.setAttr(g.GAME_ATTR.ACHIEVE_FRUIT,a),1==s?e.addCoin(2*c.reward):e.addCoin(c.reward),e.saveData(g.DATA_TYPE.ATTR)}else{n==g.GAME_ATTR.ACHIEVE_SHARE?c=e.achieveShareConf[i]:n==g.GAME_ATTR.ACHIEVE_VEDIO?c=e.achieveVedioConf[i]:n==g.GAME_ATTR.ACHIEVE_SIGN?c=e.achieveSignConf[i]:n==g.GAME_ATTR.ACHIEVE_SKILL?c=e.achieveSkillConf[i]:n==g.GAME_ATTR.ACHIEVE_WEAPON&&(c=e.achieveWeaponConf[i]);var h=e.getAttr(n),d=JSON.parse(h);d.achieveIndex=i+1,d.currentCount-=c.count,h=JSON.stringify(d),e.setAttr(n,h),1==s?e.addCoin(2*c.reward):e.addCoin(c.reward),e.saveData(g.DATA_TYPE.ATTR)}},this),g.gNode.on(s.EVT_CHANGE_IN_GAME,function(t){e.currentCoinNum=t},this)},enterFruit:function(){var e=this;this.showLoadingAnim(),cc.director.preloadScene("fruitcut",function(){e.closeLoadingAnim(),cc.director.loadScene("fruitcut")})},enterStart:function(){cc.director.loadScene("start")},enterTurnplate:function(){cc.director.loadScene("turnplate")},enterTower:function(t,n){var i=this;e("TowerView").intentLevel=t,e("TowerView").intentSubLevel=n,this.showLoadingAnim(),cc.director.preloadScene("tower",function(){i.closeLoadingAnim(),cc.director.loadScene("tower")})},login:function(){var e,t=this,n=this;if(window.tt)tt.login({success:function(e){console.log("sendLoginToutiao code:===",e.code,e.anonymousCode),n.sendLoginToutiao(e.code,e.anonymousCode)},fail:function(e){console.log("login\u8c03\u7528\u5931\u8d25",JSON.stringify(e))},force:!1});else if(cc.sys.platform!==cc.sys.WECHAT_GAME||this.isQQ())if(cc.sys.platform===cc.sys.BAIDU_GAME)swan.login({success:function(e){console.log("sendLoginBaidu code:===",e.code),n.sendLoginBaidu(e.code)}}),e=swan.getLaunchOptionsSync(),this.swanScene=e.scene,console.log("Game.getInstance().swanScene",this.swanScene);else if(cc.sys.platform===cc.sys.OPPO_GAME)qg.login({pkgName:this.pkgName,success:function(e){var n=e;console.log("sendLoginOppo",n.uid),t.oppo_token=n.token,t.oppo_uid=n.uid,t.Gender=n.sex,t.Avatar=n.avatar,t.Nick=n.nickName,t.sendLoginOppo(n)},fail:function(e){console.log(JSON.stringify(e))}});else if(cc.sys.platform===cc.sys.VIVO_GAME)qg.authorize({type:"code",success:function(e){console.log("vivo authorize success code :",e.code),qg.showToast({message:"handling success, code: "+e.code}),t.sendLoginVivo(e.code)},fail:function(e,t){console.log("vivo authorize fail code :",e.code),qg.showToast({message:"handling fail, fail code: "+t})}});else if(this.isQQ())qq.login({success:function(e){console.log("sendLoginQQ code:===",e.code),t.sendLoginQQ(e.code)}});else if(this.isQttGame()){var i={};(location.search&&(location.search.substring(1)||"")).split("&").forEach(function(e){var t=e.split("=")[1],n=e.split("=")[0];i[n]=t});var o=i.platform,s=i.ticket;this.sendLoginQutoutiao(o,s)}else this.sendLoginIMEI();else{wx.login({success:function(e){console.log("sendLoginWechat code:===",e.code),t.sendLoginWechat(e.code)}});if(e=wx.getLaunchOptionsSync(),this.wxScene=e.scene,e.query.scene){var c=decodeURIComponent(e.query.scene),a=new RegExp("(^|&)cid=([^&]*)(&|$)"),r=c.match(a);null!=r&&unescape(r[2])}else e.query.cid&&e.query.cid;wx.login({success:function(e){}})}},sendLoginWechat:function(e){var t=this,n=this.SERVER_IP+"/AppletService/log_in",i={LoginType:this.LOGIN_TYPE,AppId:this.APP_ID,UserName:e,Password:"",DeviceId:"",Provider:"weixin",Game:this.GameId,DInfos:{app:this.APP_ID}};console.log("send login wechat param = "+JSON.stringify(i)),g.network.post(n,i,function(e){if(0==e)console.log("post\u6570\u636e\u5931\u8d25");else{if(0!=e.result)return void console.log("result = "+e.result);wx.postMessage({message:"SetOpenId",openid:e.msg.ID.toString()}),t.gameData=e.msg;var n=wx.getLaunchOptionsSync();n.query.shareIndex&&t.sendEventReq(3002,["enterShareIndex: "+n.query.shareIndex]),t.mergeGameData(),t.initFruitData(),t.initSignData(),t.initFruitStoreData(),t.initNewbieLevelData(),t.initAchieveData(),t.initKnifeData(),t.initFruitSliceData(),t.initWeaponShareVedioRewardData(),t.enterStart()}},!0)},sendLoginBaidu:function(e){var t=this,n=this.SERVER_IP+"/AppletService/log_in",i={LoginType:this.LOGIN_TYPE,AppId:this.APP_ID,UserName:e,Password:"",DeviceId:"",Provider:"baidu",GameId:this.GameId,DInfos:{app:this.APP_ID}};console.log("send login baidu param = "+JSON.stringify(i)),g.network.post(n,i,function(e){if(0==e)console.log("post\u6570\u636e\u5931\u8d25");else{if(0!=e.result)return void console.log("result = "+e.result);swan.getOpenDataContext().postMessage({message:"SetOpenId",openid:e.msg.ID.toString()}),t.gameData=e.msg;var n=swan.getLaunchOptionsSync();n.query.shareIndex&&t.sendEventReq(3002,["enterShareIndex: "+n.query.shareIndex]),t.mergeGameData(),t.initFruitData(),t.initSignData(),t.initFruitStoreData(),t.initNewbieLevelData(),t.initAchieveData(),t.initKnifeData(),t.initFruitSliceData(),t.initWeaponShareVedioRewardData(),t.enterStart()}},!0)},sendLoginOppo:function(e){var t=this,n=this.SERVER_IP+"/AppletService/log_in",i={LoginType:this.LOGIN_TYPE,AppId:this.pkgName,UserName:"393_oppo_"+this.oppo_uid,Password:"",DeviceId:"",Provider:"oppo",Game:this.GameId,DInfos:{app:this.APP_ID,pn:this.pkgName}};console.log("send login oppo param = "+JSON.stringify(i)),g.network.post(n,i,function(e){if(0==e)console.log("post\u6570\u636e\u5931\u8d25");else{if(0!=e.result)return void console.log("result = "+e.result);t.gameData=e.msg,t.setAttr(g.GAME_ATTR.AVATAR,t.Avatar),t.setAttr(g.GAME_ATTR.GENDER,t.Gender),t.setAttr(g.GAME_ATTR.NICKNAME,t.Nick),t.mergeGameData(),t.initFruitData(),t.initSignData(),t.initFruitStoreData(),t.initNewbieLevelData(),t.initAchieveData(),t.initKnifeData(),t.initFruitSliceData(),t.initWeaponShareVedioRewardData(),t.enterStart()}},!0)},sendLoginToutiao:function(e,t){var n=this,i=this.SERVER_IP+"/AppletService/log_in",o={LoginType:this.LOGIN_TYPE,AppId:this.APP_ID,UserName:e,Password:"",DeviceId:"",Provider:"toutiao",Game:this.GameId,VisitorCode:t,DInfos:{app:this.APP_ID}};console.log("send login toutiao param = "+JSON.stringify(o)),g.network.post(i,o,function(e){if(0==e)console.log("post\u6570\u636e\u5931\u8d25");else{if(0!=e.result)return void console.log("result = "+e.result);n.gameData=e.msg,n.mergeGameData(),n.initFruitData(),n.initSignData(),n.initFruitStoreData(),n.initNewbieLevelData(),n.initAchieveData(),n.initKnifeData(),n.initFruitSliceData(),n.initWeaponShareVedioRewardData(),n.enterStart()}},!0)},sendLoginVivo:function(e){var t=this,n=this.SERVER_IP+"/AppletService/log_in",i={LoginType:this.LOGIN_TYPE,AppId:this.pkgName,UserName:e,Password:"",DeviceId:"",Provider:"vivo",Game:this.GameId,DInfos:{app:this.APP_ID,pn:this.pkgName}};console.log("send login oppo param = "+JSON.stringify(i)),g.network.post(n,i,function(e){if(0==e)console.log("post\u6570\u636e\u5931\u8d25");else{if(0!=e.result)return void console.log("result = "+e.result);t.gameData=e.msg,t.setAttr(g.GAME_ATTR.AVATAR,t.Avatar),t.setAttr(g.GAME_ATTR.GENDER,t.Gender),t.setAttr(g.GAME_ATTR.NICKNAME,t.Nick),t.mergeGameData(),t.initFruitData(),t.initSignData(),t.initFruitStoreData(),t.initNewbieLevelData(),t.initAchieveData(),t.initKnifeData(),t.initFruitSliceData(),t.initWeaponShareVedioRewardData(),t.enterStart()}},!0)},sendLoginQQ:function(e){var t=this,n=this.SERVER_IP+"/AppletService/log_in",i={LoginType:this.LOGIN_TYPE,AppId:this.APP_ID,UserName:e,Password:"",DeviceId:"",Provider:"QQ",Game:this.GameId,DInfos:{app:this.APP_ID}};console.log("send login wechat param = "+JSON.stringify(i)),g.network.post(n,i,function(e){if(0==e)console.log("post\u6570\u636e\u5931\u8d25");else{if(0!=e.result)return void console.log("result = "+e.result);t.gameData=e.msg,t.mergeGameData(),t.initFruitData(),t.initSignData(),t.initFruitStoreData(),t.initNewbieLevelData(),t.initAchieveData(),t.initKnifeData(),t.initFruitSliceData(),t.initWeaponShareVedioRewardData(),t.enterStart()}},!0)},sendLoginQutoutiao:function(e,t){var n=this;console.log("sendLoginQutoutiao:",e,t);var i=this.SERVER_IP+"/AppletService/log_in",o={LoginType:this.LOGIN_TYPE,AppId:this.APP_ID,UserName:e,Password:t,DeviceId:"",Provider:"qutoutiao",Game:this.GameId,DInfos:{app:this.APP_ID}};console.log("send login qutoutiao param = "+JSON.stringify(o)),g.network.post(i,o,function(e){if(0==e)console.log("post\u6570\u636e\u5931\u8d25");else{if(0!=e.result)return void console.log("result = "+e.result);n.gameData=e.msg,n.setAttr(g.GAME_ATTR.AVATAR,n.Avatar),n.setAttr(g.GAME_ATTR.GENDER,n.Gender),n.setAttr(g.GAME_ATTR.NICKNAME,n.Nick),n.mergeGameData(),n.initFruitData(),n.initSignData(),n.initFruitStoreData(),n.initNewbieLevelData(),n.initAchieveData(),n.initKnifeData(),n.initFruitSliceData(),n.initWeaponShareVedioRewardData(),n.enterStart()}},!0)},sendLoginIMEI:function(){var e=this,t=this.SERVER_IP+"/AppletService/log_in",n="";n+=(new Date).getTime()+Math.floor(1e4*Math.random()+1);var i={LoginType:"IMEI",AppId:this.APP_ID,UserName:n,Password:"123456",DeviceId:"",Provider:"",Game:this.GameId,DInfos:{app:this.APP_ID}};g.network.post(t,i,function(t){if(0==t)console.log("post\u6570\u636e\u5931\u8d25");else{if(cc.log("content = "+JSON.stringify(t)),0!=t.result)return void console.log("result = "+t.result);e.gameData=t.msg,e.mergeGameData(),e.initFruitData(),e.initSignData(),e.initFruitStoreData(),e.initNewbieLevelData(),e.initAchieveData(),e.initKnifeData(),e.initFruitSliceData(),e.initWeaponShareVedioRewardData(),e.enterStart(),console.log("fuck fruitId = "+g.getInstance().getFinalFruitId(5))}},!0)},sendSetOfflineTimeReq:function(){var e=this.SERVER_IP+"/AppletService/offline",t={};t.ID=this.gameData.ID,t.Token=this.gameData.Token,t.Game=this.GameId,g.network.post(e,t,function(e){},!0)},sendRankInfoReq:function(e){var t=this.SERVER_IP+"/AppletService/get_rank",n={game_id:this.GameId,uid:this.oppo_uid,token:this.oppo_token,rank_name:"fruitcut_level",from:1,to:100};g.network.post(t,n,function(t){if(0==t)console.log("post\u6570\u636e\u5931\u8d25");else{if(console.log("content = "+JSON.stringify(t)),0!=t.result)return void console.log("result = "+t.result);e&&e(t)}},!0)},sendGetOfflineTimeReq:function(e){var t=this.SERVER_IP+"/AppletService/get_offline",n={};n.ID=this.gameData.ID,n.Token=this.gameData.Token,n.Game=this.GameId,g.network.post(t,n,function(t){if(0==t)console.log("post\u6570\u636e\u5931\u8d25");else{if(0!=t.result)return void console.log("\u83b7\u53d6\u79bb\u7ebf\u65f6\u957f\u5931\u8d25 result = "+t.result);e&&e(t.msg)}},!0)},saveData:function(e){this.saveLocalPlayerData(),e==g.DATA_TYPE.PROP?this.sendChangePropReq():this.sendChangeAttrReq()},saveLocalPlayerData:function(){var e=JSON.stringify(this.gameData);cc.sys.localStorage.setItem("gameData",e)},mergeGameData:function(){var e=cc.sys.localStorage.getItem("gameData");if(console.log("mergeGameData str = "+e),null!=e&&""!=e){var t=JSON.parse(e),n=t.Prop,i=t.Attri;if(null!=n)for(var o in n)null!=n[o]&&(this.gameData.Prop[o]=n[o]);if(null!=i)for(var s in i)this.gameData.Attri[s]=i[s];this.setPropNum(g.GAME_PROP.BUFF_CIRCLEROUND,0),this.setPropNum(g.GAME_PROP.BUFF_TRIPPLE,0)}},getUnlockFruitByLevel:function(e){for(var t=0;t<this.fruitUnlockRule.length;t++)if(this.fruitUnlockRule[t].unlockLevel==e)return this.fruitUnlockRule[t].fruitId;return null},getFinalFruitId:function(e){for(var t=e;0==this.hasFruit(t)||null==this.fruitFrameList[t-1];)t=this.fruitUnlockRule[t-1].replaceFruitId;return t},addFruit:function(e){var t=this.getAttr(g.GAME_ATTR.FRUIT_LIST),n=JSON.parse(t);0==this.hasFruit(e)&&(n.push(e),t=JSON.stringify(n),this.setAttr(g.GAME_ATTR.FRUIT_LIST,t))},hasFruit:function(e){var t=this.getAttr(g.GAME_ATTR.FRUIT_LIST);if(""==t)return!1;for(var n=JSON.parse(t),i=0;i<n.length;i++)if(n[i]==e)return!0;return!1},getFruitList:function(){var e=this.getAttr(g.GAME_ATTR.FRUIT_LIST);return""!=e&&JSON.parse(e)},initFruitData:function(){for(var e=[],t=this.getLevel(),n=0;n<this.fruitUnlockRule.length;n++){var i=this.fruitUnlockRule[n];t>i.unlockLevel&&5!==n&&6!==n&&(e.push(i.fruitId),0===n&&(e.push(this.fruitUnlockRule[5].fruitId),e.push(this.fruitUnlockRule[6].fruitId)))}var o=JSON.stringify(e);this.setAttr(g.GAME_ATTR.FRUIT_LIST,o)},getFruitSliceData:function(){var e=this.getAttr(g.GAME_ATTR.FRUIT_SLICE);return JSON.parse(e)},setFruitSliceData:function(e){JSON.stringify(e);this.setAttr(g.GAME_ATTR.FRUIT_SLICE,e)},getWeaponVedioShareInfo:function(){var e=this.getAttr(g.GAME_ATTR.WEAPON_REWARD_DATA),t=JSON.parse(e);return{vedio:t.vedio,share:t.share}},setWeaponVedioTimes:function(e){var t=this.getAttr(g.GAME_ATTR.WEAPON_REWARD_DATA),n=JSON.parse(t);n.vedio=e,this.setAttr(g.GAME_ATTR.WEAPON_REWARD_DATA,JSON.stringify(n)),this.saveData(g.DATA_TYPE.ATTR)},setWeaponShareTimes:function(e){var t=this.getAttr(g.GAME_ATTR.WEAPON_REWARD_DATA),n=JSON.parse(t);n.share=e,this.setAttr(g.GAME_ATTR.WEAPON_REWARD_DATA,JSON.stringify(n)),this.saveData(g.DATA_TYPE.ATTR)},getBombData:function(){var e=this.getAttr(g.GAME_ATTR.BOMB);return""==e?null:JSON.parse(e)},setBombData:function(e,t){var n={level:e,subLevel:t};this.setAttr(g.GAME_ATTR.BOMB,JSON.stringify(n)),this.saveData(g.DATA_TYPE.ATTR)},getNewbieLevel:function(){return parseInt(this.getAttr(g.GAME_ATTR.NEWBIE_LEVEL))},initNewbieLevelData:function(){if(""==this.getAttr(g.GAME_ATTR.NEWBIE_LEVEL)){var e=this.getLevel();this.setAttr(g.GAME_ATTR.NEWBIE_LEVEL,e.toString())}},initWeaponShareVedioRewardData:function(){var e=this.getAttr(g.GAME_ATTR.WEAPON_REWARD_DATA),t=new Date,n=""+t.getFullYear()+(t.getMonth()+1)+t.getDate();if(""==e){var i={time:n,vedio:0,share:0};this.setAttr(g.GAME_ATTR.WEAPON_REWARD_DATA,JSON.stringify(i))}else{var o=JSON.parse(e);o.time!=n&&(o.time=n,o.vedio=0,o.share=0,this.setAttr(g.GAME_ATTR.WEAPON_REWARD_DATA,JSON.stringify(o)))}},initFruitSliceData:function(){if(""==this.getAttr(g.GAME_ATTR.FRUIT_SLICE)){var e=JSON.stringify([]);this.setAttr(g.GAME_ATTR.FRUIT_SLICE,e)}},initKnifeData:function(){this.getPropNum(g.GAME_PROP.WEAPON_PT+1)<=0&&this.setPropNum(g.GAME_PROP.WEAPON_PT+1,1)},initAchieveData:function(){if(""==this.getAttr(g.GAME_ATTR.ACHIEVE_SIGN)){(s=new r).achieveIndex=0,s.currentCount=0;var e=JSON.stringify(s);this.setAttr(g.GAME_ATTR.ACHIEVE_SIGN,e)}if(""==this.getAttr(g.GAME_ATTR.ACHIEVE_VEDIO)){(s=new r).achieveIndex=0,s.currentCount=0;e=JSON.stringify(s);this.setAttr(g.GAME_ATTR.ACHIEVE_VEDIO,e)}if(""==this.getAttr(g.GAME_ATTR.ACHIEVE_SHARE)){(s=new r).achieveIndex=0,s.currentCount=0;e=JSON.stringify(s);this.setAttr(g.GAME_ATTR.ACHIEVE_SHARE,e)}if(""==this.getAttr(g.GAME_ATTR.ACHIEVE_WEAPON)){(s=new r).achieveIndex=0,s.currentCount=0;e=JSON.stringify(s);this.setAttr(g.GAME_ATTR.ACHIEVE_WEAPON,e)}if(""==this.getAttr(g.GAME_ATTR.ACHIEVE_SKILL)){(s=new r).achieveIndex=0,s.currentCount=0;e=JSON.stringify(s);this.setAttr(g.GAME_ATTR.ACHIEVE_SKILL,e)}var t=this.getAttr(g.GAME_ATTR.ACHIEVE_FRUIT);if(""==t){for(var n=[],i=0;i<g.MAX_FRUIT_TYPE;i++){(s=new r).achieveIndex=0,s.currentCount=0,n.push(s)}e=JSON.stringify(n);this.setAttr(g.GAME_ATTR.ACHIEVE_FRUIT,e)}else{var o=JSON.parse(t);if(o.length<g.MAX_FRUIT_TYPE){for(i=o.length;i<g.MAX_FRUIT_TYPE;i++){var s;(s=new r).achieveIndex=0,s.currentCount=0,o.push(s)}e=JSON.stringify(o);this.setAttr(g.GAME_ATTR.ACHIEVE_FRUIT,e)}}this.saveData(g.DATA_TYPE.ATTR)},hasFinishedAchieve:function(){var e,t,n,i=g.getInstance().getAttr(g.GAME_ATTR.ACHIEVE_SIGN);if((e=(n=JSON.parse(i)).achieveIndex)<(t=g.getInstance().achieveSignConf).length){var o=t[e];if(1==g.getInstance().isAllSign()?n.currentCount=1:n.currentCount=0,n.currentCount>=o.count)return!0}var s=g.getInstance().getAttr(g.GAME_ATTR.ACHIEVE_VEDIO);if((e=(n=JSON.parse(s)).achieveIndex)<(t=g.getInstance().achieveVedioConf).length){o=t[e];if(n.currentCount>=o.count)return!0}if(cc.sys.platform!==cc.sys.platform.OPPO_GAME||cc.sys.platform!==cc.sys.platform.VIVO_GAME){var c=g.getInstance().getAttr(g.GAME_ATTR.ACHIEVE_SHARE);if((e=(n=JSON.parse(c)).achieveIndex)<(t=g.getInstance().achieveShareConf).length){o=t[e];if(n.currentCount>=o.count)return!0}}var a=g.getInstance().getAttr(g.GAME_ATTR.ACHIEVE_WEAPON);if((n=JSON.parse(a)).currentCount=g.getInstance().getSkinNum(),(e=n.achieveIndex)<(t=g.getInstance().achieveWeaponConf).length){o=t[e];if(n.currentCount>=o.count)return!0}var r=g.getInstance().getAttr(g.GAME_ATTR.ACHIEVE_SKILL);if((e=(n=JSON.parse(r)).achieveIndex)<(t=g.getInstance().achieveSkillConf).length){o=t[e];if(n.currentCount>=o.count)return!0}var l=g.getInstance().getAttr(g.GAME_ATTR.ACHIEVE_FRUIT),h=JSON.parse(l);t=g.getInstance().achieveFruitConf;for(var d=0;d<h.length;d++)if((e=(n=h[d]).achieveIndex)<t.length){o=t[e];if(n.currentCount>=o.count)return!0}return!1},addSkillAchieve:function(e){var t=this.getAttr(g.GAME_ATTR.ACHIEVE_SKILL),n=JSON.parse(t);n.currentCount+=e,t=JSON.stringify(n),this.setAttr(g.GAME_ATTR.ACHIEVE_SKILL,t)},addVedioAchieve:function(e){var t=this.getAttr(g.GAME_ATTR.ACHIEVE_VEDIO),n=JSON.parse(t);n.currentCount+=e,t=JSON.stringify(n),this.setAttr(g.GAME_ATTR.ACHIEVE_VEDIO,t)},addShareAchieve:function(e){var t=this.getAttr(g.GAME_ATTR.ACHIEVE_SHARE),n=JSON.parse(t);n.currentCount+=e,t=JSON.stringify(n),this.setAttr(g.GAME_ATTR.ACHIEVE_SHARE,t)},initSignData:function(){if(""==this.getAttr(g.GAME_ATTR.SIGN_DATA)){var e=this.generateSignData(),t=JSON.stringify(e);this.setAttr(g.GAME_ATTR.SIGN_DATA,t)}this.saveData(g.DATA_TYPE.ATTR)},initFruitStoreData:function(){if(""==this.getAttr(g.GAME_ATTR.FRUIT_STORE)){var e=JSON.stringify("false");this.setAttr(g.GAME_ATTR.FRUIT_STORE,e)}this.saveData(g.DATA_TYPE.ATTR)},getStoreData:function(){var e=this.getAttr(g.GAME_ATTR.FRUIT_STORE);return""==e?"false":"true"===JSON.parse(e)},setStoreData:function(e){var t=JSON.stringify(e);this.setAttr(g.GAME_ATTR.FRUIT_STORE,t),this.saveData(g.DATA_TYPE.ATTR)},isAllSign:function(){for(var e=this.getSignData(),t=!0,n=0;n<e.itemList.length;n++){if(0==e.itemList[n].isSign){t=!1;break}}return t},getSignData:function(){var e=this.getAttr(g.GAME_ATTR.SIGN_DATA);return""==e?null:JSON.parse(e)},setSignData:function(e){var t=JSON.stringify(e);this.setAttr(g.GAME_ATTR.SIGN_DATA,t),this.saveData(g.DATA_TYPE.ATTR)},generateSignData:function(){for(var e={time:0,itemList:[]},t=1;t<=7;t++){var n=null;if(1==t)n={propId:1,count:200,isSign:!1};else if(3==t)n={propId:1,count:400,isSign:!1};else if(5==t)n={propId:1,count:800,isSign:!1};else if(7==t)n={propId:1,count:1600,isSign:!1};else if(2==t){n={propId:g.GAME_PROP.WEAPON_PT+o.random(this.knifeSkinList1.length),count:1,isSign:!1}}else if(4==t){n={propId:g.GAME_PROP.WEAPON_XY+o.random(this.knifeSkinList2.length),count:1,isSign:!1}}else if(6==t){n={propId:g.GAME_PROP.WEAPON_SS+o.random(this.knifeSkinList4.length),count:1,isSign:!1}}e.itemList.push(n)}return e},getLastObtainRoundTime:function(){return cc.sys.localStorage.getItem("round-obtain-time")},setLastObtainRoundTime:function(){cc.sys.localStorage.setItem("round-obtain-time",Date.parse(new Date))},getLastSignDlgTime:function(){return cc.sys.localStorage.getItem("sign-dlg-time")},setLastSignDlgTime:function(){cc.sys.localStorage.setItem("sign-dlg-time",Date.parse(new Date))},canObtainRoundWeaponFree:function(){var e=this.getLastObtainRoundTime();if(null==e)return!0;var t=parseInt(e);return 0==o.isSameDay(new Date(t),new Date)},sendChangePropReq:function(){var e=this.SERVER_IP+"/AppletService/player_prop",t={};t.Game=this.GameId,t.ID=this.gameData.ID,t.Token=this.gameData.Token,t.Prop=this.gameData.Prop,t.Reason=0,console.log("sendChangePropReq Token = "+this.gameData.Token),g.network.post(e,t,function(){},!0)},sendChangeAttrReq:function(){var e=this.SERVER_IP+"/AppletService/player_attr",t={};t.Game=this.GameId,t.ID=this.gameData.ID,t.Token=this.gameData.Token,t.Attri=this.gameData.Attri,t.Reason=0,g.network.post(e,t,function(){},!0)},sendGetServerTimeReq:function(e){var t=this.SERVER_IP+"/AppletService/system_time";g.network.get(t,{},function(t){if(0==t)console.log("sendGetServerTimeReq post failed");else{if(0!=t.result)return void console.log("sendGetServerTimeReq result = "+t.result);e&&e(t.msg)}},!0)},sendEventReq:function(e,t){var n=this.SERVER_IP+"/AppletService/event",i={};i.ID=this.gameData.ID,i.Token=this.gameData.Token,i.Game=this.GameId,i.EventID=e,i.Params=t,g.network.post(n,i,function(e){},!0)},isAllSkinOwned:function(){return this.getSkinNum()>=this.knifeSkinList1.length+this.knifeSkinList2.length+this.knifeSkinList3.length+this.knifeSkinList4.length+this.knifeSkinList5.length},getSkinNum:function(){for(var e=0,t=0;t<this.knifeSkinList1.length;t++){var n=g.GAME_PROP.WEAPON_PT+t+1;this.getPropNum(n)>0&&e++}for(t=0;t<this.knifeSkinList2.length;t++){n=g.GAME_PROP.WEAPON_XY+t+1;this.getPropNum(n)>0&&e++}for(t=0;t<this.knifeSkinList3.length;t++){n=g.GAME_PROP.WEAPON_ZY+t+1;this.getPropNum(n)>0&&e++}for(t=0;t<this.knifeSkinList4.length;t++){n=g.GAME_PROP.WEAPON_SS+t+1;this.getPropNum(n)>0&&e++}for(t=0;t<this.knifeSkinList5.length;t++){n=g.GAME_PROP.WEAPON_CS+t+1;this.getPropNum(n)>0&&e++}return e},getFrameBySkinId:function(e){var t=null;return e>g.GAME_PROP.WEAPON_PT&&e<g.GAME_PROP.WEAPON_PT+1e3?t=this.knifeSkinList1[e-g.GAME_PROP.WEAPON_PT-1]:e>g.GAME_PROP.WEAPON_XY&&e<g.GAME_PROP.WEAPON_XY+1e3?t=this.knifeSkinList2[e-g.GAME_PROP.WEAPON_XY-1]:e>g.GAME_PROP.WEAPON_ZY&&e<g.GAME_PROP.WEAPON_ZY+1e3?t=this.knifeSkinList3[e-g.GAME_PROP.WEAPON_ZY-1]:e>g.GAME_PROP.WEAPON_SS&&e<g.GAME_PROP.WEAPON_SS+1e3?t=this.knifeSkinList4[e-g.GAME_PROP.WEAPON_SS-1]:e>g.GAME_PROP.WEAPON_CS&&e<g.GAME_PROP.WEAPON_CS+1e3?t=this.knifeSkinList5[e-g.GAME_PROP.WEAPON_CS-1]:e==g.GAME_PROP.WEAPON_YTJ&&(t=this.knifeYTJFrame),t},getSkinId:function(){var e=this.getAttr(g.GAME_ATTR.KNIFE_SKIN);return""==e?g.GAME_PROP.WEAPON_PT+1:parseInt(e)},setSkinId:function(e){this.setAttr(g.GAME_ATTR.KNIFE_SKIN,e.toString())},addSkinId:function(e){this.setSkinId(e),this.setPropNum(e,1),this.saveData(g.DATA_TYPE.PROP),this.saveData(g.DATA_TYPE.ATTR)},getLevel:function(){var e=this.getAttr(g.GAME_ATTR.LEVEL);return""==e?1:parseInt(e)},setLevel:function(e){this.setAttr(g.GAME_ATTR.LEVEL,e.toString()),this.saveData(g.DATA_TYPE.ATTR)},isLevelAuto:function(e){return e>this.levelData.length},getAILevelInfo:function(){var e=this.getAttr(g.GAME_ATTR.AI_LEVEL);return""==e?null:JSON.parse(e)},setAILevelInfo:function(e){if(null!=e){var t=JSON.stringify(e);this.setAttr(g.GAME_ATTR.AI_LEVEL,t)}},generateNewLevel:function(e){var t=new a;t.level=e;for(var n=[],i=1;i<=this.levelData.length;i++)n.push(i);t.subLevel1=n[o.random(n.length)-1],n=[];for(i=1;i<=this.levelData.length;i++)n.push(i);t.subLevel2=n[o.random(n.length)-1],n=[];for(i=2;i<=this.levelData.length;i++)n.push(i);t.subLevel3=n[o.random(n.length)-1],n=[];for(i=3;i<=this.levelData.length;i++)n.push(i);return t.subLevel4=n[o.random(n.length)-1],t},playMissSound:function(){0!=this.isSoundOpen&&cc.audioEngine.play(this.sounds[2],!1)},playPassSound:function(){0!=this.isSoundOpen&&cc.audioEngine.play(this.sounds[3],!1)},playAttackSound:function(){0!=this.isSoundOpen&&cc.audioEngine.play(this.sounds[1],!1)},playBombSound:function(){0!=this.isSoundOpen&&cc.audioEngine.play(this.sounds[4],!1)},playFruitSound:function(e){if(this.isSoundOpen)switch(e){case 1:case 19:cc.audioEngine.play(this.newFruitSounds[0],!1);break;case 2:case 4:case 6:case 10:case 17:case 18:cc.audioEngine.play(this.newFruitSounds[1],!1);break;case 7:case 8:case 12:cc.audioEngine.play(this.newFruitSounds[2],!1);break;case 9:case 13:case 14:case 16:cc.audioEngine.play(this.newFruitSounds[3],!1);break;case 11:case 20:cc.audioEngine.play(this.newFruitSounds[4],!1);break;case 3:case 5:case 15:cc.audioEngine.play(this.newFruitSounds[5],!1);break;default:cc.log("fruitType is illegal, fruitType:"+e),cc.audioEngine.play(this.newFruitSounds[6],!1)}},passLevel:function(){var e,t=this.getLevel();if(e=null!=this.levelData[t-1]?this.levelData[t-1].tmxList.length:4,this.subLevel<e)this.subLevel++;else{t++;var n=Math.floor(3*Math.random());this.fruitDirection=n,this.setLevel(t),this.subLevel=1}},backLevel:function(){this.subLevel=1},isLastSubLevel:function(){var e,t=this.getLevel();return e=null!=this.levelData[t-1]?this.levelData[t-1].tmxList.length:4,this.subLevel==e},getCoin:function(){return this.getPropNum(g.GAME_PROP.COIN)||0},getSubLevelNum:function(){var e=this.getLevel();return null!=this.levelData[e-1]?this.levelData[e-1].tmxList.length:4},addCoin:function(e){var t=this.getPropNum(g.GAME_PROP.COIN);t+=e,this.setPropNum(g.GAME_PROP.COIN,t),this.saveData(g.DATA_TYPE.PROP),g.gNode.emit(s.EVT_COIN_CHANGE)},getPropNum:function(e){var t=0;return null!=this.gameData.Prop[e]&&(t=this.gameData.Prop[e].Value),t},setPropNum:function(e,t){null==this.gameData.Prop[e]?this.gameData.Prop[e]={ID:e,Value:t}:this.gameData.Prop[e].Value=t},getAttr:function(e){var t="";return null!=this.gameData.Attri[e]&&(t=this.gameData.Attri[e].Value),t},setAttr:function(e,t){null==this.gameData.Attri[e]?this.gameData.Attri[e]={Key:e,Value:t}:this.gameData.Attri[e].Value=t},spendCoin:function(e){var t=this.getPropNum(g.GAME_PROP.COIN);return t<e?(this.showToast("\u91d1\u5e01\u4e0d\u8db3"),!1):(t-=e,this.setPropNum(g.GAME_PROP.COIN,t),this.saveData(g.DATA_TYPE.PROP),!0)},setCoin:function(e){this.setPropNum(g.GAME_PROP.COIN,e),this.saveData(g.DATA_TYPE.PROP),g.gNode.emit(s.EVT_COIN_CHANGE)},getCircleNum:function(){return this.getPropNum(g.GAME_PROP.BUFF_CIRCLEROUND)},getTrippleNum:function(){return this.getPropNum(g.GAME_PROP.BUFF_TRIPPLE)},setTrippleNum:function(e){this.setPropNum(g.GAME_PROP.BUFF_TRIPPLE,e),this.saveData(g.DATA_TYPE.PROP)},setCircleNum:function(e){this.setPropNum(g.GAME_PROP.BUFF_CIRCLEROUND,e),this.saveData(g.DATA_TYPE.PROP)},setWeaponNum:function(e,t){this.setPropNum(e,t),this.saveData(g.DATA_TYPE.PROP)},isWechatShareEvent:function(){return 0!=this.hasSDKConfig()&&"true"==this.sdkConfig.data.wxShareApi},isBaiduShareEvent:function(){return 0!=this.hasSDKConfig()&&"true"==this.sdkConfig.data.swanShareApi},isShareHide:function(){if(0==this.hasSDKConfig())return!0;var e=parseInt(this.sdkConfig.data.shareHideLevel);return this.getLevel()<e},getBombLevelInterval:function(){return 0==this.hasSDKConfig()?1:parseInt(this.sdkConfig.data.bombLevelInterval)},hasSDKConfig:function(){return null!=this.sdkConfig},sendLoginSDK:function(e,t){var n=this,i={app:this.sdkAppName,code:e,cid:t};g.network.post("https://constellation.mamapai.net/user/login",i,function(e){0==e?console.log("post\u6570\u636e\u5931\u8d25"):n.sdkToken=e.data.token})},sendSDKConfigReq:function(e){var t=this,n=this.SERVER_IP+"/AppletService/game_data",i={Game:this.GameId};g.network.post(n,i,function(n){if(0==n)console.log("sendSDKConfigReq post failed"),t.sdkConfig=null;else{var i=JSON.parse(n.msg);t.sdkConfig=i,e&&e(i)}},!0)},setBannerAdVisible:function(e){if(this.isQttGame())e&&"true"===this.sdkConfig.data.randomShareSwitch?qttGame.showBanner():qttGame.hideBanner();else{if(0===this.bannerAdList.length)return console.log(this.PROVIDER,"no banner currently");for(var t=0;t<this.bannerAdList.length;t++)this.bannerAdList[t].hide();if(e){var n=o.random(this.bannerAdList.length)-1;null!=this.bannerAdList[n]&&(cc.sys.platform!==cc.sys.WECHAT_GAME||window.tt||this.isQQ()?cc.sys.platform===cc.sys.BAIDU_GAME?this.bannerAdList[n].show().then().catch(function(e){return console.log(e)}):cc.sys.platform===cc.sys.OPPO_GAME?(this.bannerAdList[n].show(),this.bannerAdList[n].onError(function(e){console.log("OPPO BANNER SHOW ERROR:",JSON.stringify(e))})):cc.sys.platform===cc.sys.VIVO_GAME?(this.bannerAdList[n].show(),this.bannerAdList[n].onError(function(e){console.log("VIVO BANNER SHOW ERROR:",JSON.stringify(e))})):window.tt?this.bannerAdList[n].show().then(function(){console.log("\u5934\u6761\u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",JSON.stringify(e))}):cc.sys.platform===cc.sys.VIVO_GAME&&this.supportedVivoAd||this.isQQ()&&this.bannerAdList[n].show().then().catch(function(e){return console.log(e)}):this.bannerAdList[n].show())}}},creatQQBanner:function(){this.initBannerAd()},initBannerAd:function(){var e=this,t=this;if(cc.sys.platform!==cc.sys.WECHAT_GAME||window.tt||this.isQQ())if(cc.sys.platform===cc.sys.BAIDU_GAME)swan.getSystemInfo({success:function(e){var n=e.screenWidth,i=e.screenHeight;console.log("screen width = "+n+" height = "+i);var o=swan.createBannerAd({adUnitId:"c26553a6",appSid:"6086829",style:{left:0,top:0,width:300}});console.log("====BAIDU_GAME bannerAd===="),o.onResize(function(e){console.log("res.width = "+e.width+" res.height = "+e.height),o.style.top=i-e.height,o.style.left=(n-e.width)/2}),t.bannerAdList.push(o)}});else if(cc.sys.platform===cc.sys.OPPO_GAME)console.log("oppo init bannerAd"),qg.getSystemInfo({success:function(e){var n=e.screenWidth,i=e.screenHeight;console.log("screen width = "+n+" height = "+i);var o=qg.createBannerAd({posId:"52288"});o.onError(function(e){console.log("OPPO CREATE BANNER ERROR:",JSON.stringify(e))}),t.bannerAdList.push(o)}});else if(cc.sys.platform===cc.sys.VIVO_GAME&&this.supportedVivoAd){console.log("vivo init bannerAd");var n=qg.createBannerAd({posId:"fbf4bb6d767446d7a57ac0f23bac1bc9",style:{}});n.onLoad(function(){console.log("VIVO Banner\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),n.onError(function(e){console.log("VIVO CREATE BANNER ERROR:",JSON.stringify(e))}),t.bannerAdList.push(n)}else if(window.tt){var i=tt.getSystemInfoSync(),o=i.windowWidth,s=i.windowHeight,c=200;if("undefined"==tt.createBannerAd)return;var a=tt.createBannerAd({adUnitId:"3916ig8h4bid2ch0j4",style:{width:c,top:s-c/16*9}});a.style.left=(o-c)/2,a.onResize(function(e){console.log(e.width,e.height),c!=e.width&&(c=e.width,a.style.top=s-res.width/16*9,a.style.left=(o-res.width)/2)}),t.bannerAdList.push(a)}else this.isQQ()&&qq.getSystemInfo({success:function(t){var n=t.screenWidth,i=t.screenHeight;e.btHeight=100*t.screenWidth/414,t.statusBarHeight>25&&(e.btHeight+=50),console.log("screen width = "+n+" height = "+i);var o=qq.createBannerAd({adUnitId:"f3ecd263086f7a6510e51d6468a220c5",style:{left:0,top:i-e.btHeight,width:n,height:e.btHeight-50}});e.bannerAdList.push(o)}});else wx.getSystemInfo({success:function(e){var n=e.screenWidth,i=e.screenHeight;console.log("screen width = "+n+" height = "+i);var o=wx.createBannerAd({adUnitId:"adunit-4a993d27e084651f",style:{left:0,top:0,width:300}});o.onResize(function(e){console.log("res.width = "+e.width+" res.height = "+e.height),o.style.top=i-e.height,o.style.left=(n-e.width)/2}),t.bannerAdList.push(o)}})},registVedioAd:function(e,t,n,i){var o=this;if(console.log("==========registVedioAd=========="),cc.sys.platform===cc.sys.WECHAT_GAME&&!window.tt&&!this.isQQ()){var c=void 0;switch(e){case 1:c="adunit-e0407a060fa919ee";break;case 2:c="adunit-1ccef6cc43cdf41e";break;case 3:c="adunit-1907f4bcd8c5079b";break;case 4:c="adunit-daf8756c4a60e100";break;case 5:c="adunit-16f084060743f718";break;case 6:c="adunit-3ae733fad55af692";break;case 7:c="adunit-54f85c9af017d730";break;default:cc.log("videoIndex error"),c="adunit-e0407a060fa919ee"}var a=wx.createRewardedVideoAd({adUnitId:c});return console.log("vedioAd = "+a),t.active=!1,a.load().then(function(){t.active=!0,t.on("click",function(){a.show()})}).catch(function(e){1!=o.isShareHide()&&(t.active=!0,t.getComponent(cc.Sprite).spriteFrame=n,t.on("click",function(){g.share.shareWechat(1,i)}))}),a.onClose(function(e){console.log("videoAd.onClose res.isEnded = "+e.isEnded),1==e.isEnded?(g.gNode.emit(s.EVT_FINISHED_AD_VEDIO),i&&i(),a.offClose()):o.showToast(g.getInstance().sdkConfig.data.vedioFailedText)}),a}if(cc.sys.platform===cc.sys.BAIDU_GAME){var r=swan.createRewardedVideoAd({adUnitId:"6086822",appSid:"c26553a6"});return console.log("vedioAd = "+r),t.active=!1,r.load().then(function(){t.active=!0,t.on("click",function(){r.show()})}).catch(function(e){1!=o.isShareHide()&&(t.active=!0,t.getComponent(cc.Sprite).spriteFrame=n,t.on("click",function(){g.share.shareWechat(1,i)}))}),r.onClose(function(e){console.log("videoAd.onClose res.isEnded = "+e.isEnded),e.isEnded?(g.gNode.emit(s.EVT_FINISHED_AD_VEDIO),i&&i(),r.offClose()):o.showToast(g.getInstance().sdkConfig.data.vedioFailedText)}),r}if(cc.sys.platform===cc.sys.OPPO_GAME){var l="";switch(e){case 1:l="52313";break;case 2:l="52311";break;case 3:l="52310";break;case 4:l="52309";break;case 5:l="52390";break;case 6:l="52389";break;default:l="52313"}var h=qg.createRewardedVideoAd({posId:l});return t.active=!1,h.load(),h.onLoad(function(){t.active=!0,t.on("click",function(){h.show()})}),h.onError(function(){t.active=!0,t.on("click",function(){var e=qg.createInsertAd({posId:"52316"});e.load(),e.onLoad(),e.show(),i&&i()})}),h.onRewarded(function(){g.gNode.emit(s.EVT_FINISHED_AD_VEDIO),i&&i()}),h}if(cc.sys.platform===cc.sys.VIVO_GAME&&this.supportedVivoAd){var d=qg.createInterstitialAd({posId:"b5325aba7ae64037a29b062a9c422a38"});return d.load(),d.onLoad(function(){t.active=!0,t.on("click",function(){d.show()})}),d.onError(function(e){console.log("VIVO interstitialAd error",JSON.stringify(e)),o.showToast("\u5f53\u524d\u65e0\u5e7f\u544a\u586b\u5145")}),d.onClose(function(){g.gNode.emit(s.EVT_FINISHED_AD_VEDIO),i&&i(),d.offClose(),d.offError(),d.offLoad()}),d}if(window.tt){if(this.cb=null,i&&(this.cb=i),!this.videoAd){if("undefined"==tt.createRewardedVideoAd)return;this.videoAd=tt.createRewardedVideoAd({adUnitId:"cgl75781k7h55ibpjb"}),this.videoAd.onClose(function(e){console.log("videoAd.onClose res.isEnded = "+e.isEnded),1==e.isEnded?(g.gNode.emit(s.EVT_FINISHED_AD_VEDIO),o.cb&&o.cb()):o.showToast(g.getInstance().sdkConfig.data.vedioFailedText)})}return console.log("vedioAd = "+JSON.stringify(this.videoAd)),t.active=!1,this.videoAd.load().then(function(){t.active=!0,t.on("click",function(){o.videoAd.show().then(function(){console.log("\u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){1!=o.isShareHide()&&(t.active=!0,t.getComponent(cc.Sprite).spriteFrame=n,t.on("click",function(){g.share.shareWechat(1,i)}))})})}),this.videoAd}if(this.isQQ()){this.cb=null,this.showCb=null,this.closeCb=null,i&&(this.cb=i);var u=void 0;switch(e){case 1:u="dd263c962492bad52cbc799650e09447";break;case 2:u="517a83e26ea6131c0ab99f25594b6d9c";break;case 3:u="1a9b7698204d87aa3758e272d47ac699";break;case 4:u="03baa4ad3ae3ff1c2f87429eaae2aace";break;case 5:u="61495685b95e10d3ab8e6a24a58889c8";break;case 6:u="f899af66dae2bf8ee69038f95b891882";break;default:console.log("QQ videoIndex error"),u="dd263c962492bad52cbc799650e09447"}var f=qq.createRewardedVideoAd({adUnitId:u});return t.active=!1,f.load().then(function(){t.active=!0,t.on("click",function(){f.show()})}).catch(function(e){1!=o.isShareHide()&&(t.active=!0,t.getComponent(cc.Sprite).spriteFrame=n,t.on("click",function(){g.share.shareWechat(1,o.cb)}))}),this.videoAd||(this.videoAd=f,this.videoAd.onClose(function(e){console.log("videoAd.onClose res.isEnded = "+e.isEnded),null!=o.closeCb&&o.closeCb(),e.isEnded?(g.gNode.emit(s.EVT_FINISHED_AD_VEDIO),o.cb&&o.cb()):o.showToast(g.getInstance().sdkConfig.data.vedioFailedText)})),f}return this.isQttGame()&&(this.cb=null,this.showCb=null,this.closeCb=null,i&&(this.cb=i),t.on("click",function(){var e={gametype:1,rewardtype:1,data:{}};e.data.title="\u5237\u65b0\u9053\u5177",e.data.url="//newidea4-gamecenter-frontend.1sapp.com/game/prod/fkxxl_img/1.png",e.callback=function(e){console.log("qtt hdAd: res =",e),1==e&&(g.gNode.emit(s.EVT_FINISHED_AD_VEDIO),o.cb&&o.cb())},qttGame.showVideo(function(t){1===t?(console.log("\u64ad\u653e\u5b8c\u6210\uff0c\u53d1\u653e\u5956\u52b1"),g.gNode.emit(s.EVT_FINISHED_AD_VEDIO),o.cb&&o.cb()):0===t?(console.log("qtt \u5e7f\u544a\u586b\u5145\u4e0d\u8db3"),qttGame.showHDAD(e)):2===t&&o.showToast("\u89c6\u9891\u672a\u770b\u5b8c")})},this)),null},openVedioAd:function(e,t,n,i){var o=this;if(console.log("==========openVedioAd========"),cc.sys.platform!==cc.sys.WECHAT_GAME||window.tt||this.isQQ()){if(cc.sys.platform===cc.sys.BAIDU_GAME){var c=swan.createRewardedVideoAd({adUnitId:"6086822",appSid:"c26553a6"});c.load().then(function(){n&&n(),c.show()}).catch(function(e){"no advertisement"===e.errMsg&&(e.errMsg="\u5f53\u524d\u65e0\u5e7f\u544a\u586b\u5145\uff0c\u8bf7\u60a8\u7a0d\u540e\u518d\u8bd5"),o.showToast(e.errMsg)}),c.onClose(function(e){console.log("videoAd.onClose res.isEnded = "+e.isEnded),null!=i&&i(),c.offClose(),e.isEnded?(g.gNode.emit(s.EVT_FINISHED_AD_VEDIO),t&&t()):o.showToast(g.getInstance().sdkConfig.data.vedioFailedText)})}else if(cc.sys.platform===cc.sys.OPPO_GAME){var a="";switch(e){case 1:a="52313";break;case 2:a="52311";break;case 3:a="52310";break;case 4:a="52309";break;case 5:a="52390";break;case 6:a="52389";break;default:a="52313"}var r=qg.createRewardedVideoAd({posId:a});r.load(),r.onLoad(function(){n&&n(),r.show()}),r.onError(function(){var e=qg.createInsertAd({posId:"52316"});e.load(),e.onLoad(),e.show(),t&&t()}),r.onRewarded(function(){null!=i&&i(),g.gNode.emit(s.EVT_FINISHED_AD_VEDIO),t&&t()})}else if(cc.sys.platform===cc.sys.VIVO_GAME&&this.supportedVivoAd){var l=qg.createInterstitialAd({posId:"b5325aba7ae64037a29b062a9c422a38"});l.load(),l.onLoad(function(){n&&n(),l.show()}),l.onError(function(e){console.log("VIVO interstitialAd error",JSON.stringify(e)),o.showToast("\u5f53\u524d\u65e0\u5e7f\u544a\u586b\u5145")}),l.onClose(function(){null!=i&&i(),g.gNode.emit(s.EVT_FINISHED_AD_VEDIO),t&&t(),l.offClose(),l.offError(),l.offLoad()})}else if(window.tt){if(this.cb=null,this.showCb=null,this.closeCb=null,t&&(this.cb=t),n&&(this.showCb=n),i&&(this.closeCb=i),!this.videoAd){if("undefined"==tt.createRewardedVideoAd)return;this.videoAd=tt.createRewardedVideoAd({adUnitId:"cgl75781k7h55ibpjb"}),this.videoAd.onClose(function(e){console.log("videoAd.onClose res.isEnded = "+e.isEnded),null!=o.closeCb&&o.closeCb(),1==e.isEnded?(g.gNode.emit(s.EVT_FINISHED_AD_VEDIO),o.cb&&o.cb()):o.showToast(g.getInstance().sdkConfig.data.vedioFailedText)})}this.videoAd.load().then(function(){o.showCb&&o.showCb(),o.videoAd.show()}).catch(function(e){"no advertisement"===e.errMsg&&(e.errMsg="\u5f53\u524d\u65e0\u5e7f\u544a\u586b\u5145\uff0c\u8bf7\u60a8\u7a0d\u540e\u518d\u8bd5"),o.showToast(e.errMsg)})}else if(this.isQQ()){this.cb=null,this.showCb=null,this.closeCb=null,t&&(this.cb=t),n&&(this.showCb=n),console.log(JSON.stringify(t),JSON.stringify(n),JSON.stringify(i)),i&&(this.closeCb=i);var h=void 0;switch(e){case 1:h="dd263c962492bad52cbc799650e09447";break;case 2:h="517a83e26ea6131c0ab99f25594b6d9c";break;case 3:h="1a9b7698204d87aa3758e272d47ac699";break;case 4:h="03baa4ad3ae3ff1c2f87429eaae2aace";break;case 5:h="61495685b95e10d3ab8e6a24a58889c8";break;case 6:h="f899af66dae2bf8ee69038f95b891882";break;default:console.log("QQ videoIndex error"),h="dd263c962492bad52cbc799650e09447"}var d=qq.createRewardedVideoAd({adUnitId:h});this.videoAd||(this.videoAd=d,this.videoAd.onClose(function(e){console.log("videoAd.onClose res.isEnded = "+e.isEnded),null!=o.closeCb&&o.closeCb(),e.isEnded?(g.gNode.emit(s.EVT_FINISHED_AD_VEDIO),o.cb&&o.cb()):o.showToast(g.getInstance().sdkConfig.data.vedioFailedText)})),d.load().then(function(){o.showCb&&o.showCb(),d.show()}).catch(function(e){"no advertisement"===e.errMsg&&(e.errMsg="\u5f53\u524d\u65e0\u5e7f\u544a\u586b\u5145\uff0c\u8bf7\u60a8\u7a0d\u540e\u518d\u8bd5"),o.showToast(e.errMsg)})}else if(this.isQttGame()){this.cb=null,this.showCb=null,this.closeCb=null,t&&(this.cb=t),n&&(this.showCb=n),console.log(JSON.stringify(t),JSON.stringify(n),JSON.stringify(i)),i&&(this.closeCb=i),this.showCb&&this.showCb();var u={gametype:1,rewardtype:1,data:{}};u.data.title="\u5237\u65b0\u9053\u5177",u.data.url="//newidea4-gamecenter-frontend.1sapp.com/game/prod/fkxxl_img/1.png",u.callback=function(e){null!=o.closeCb&&o.closeCb(),console.log("qtt hdAd: res =",e),1==e&&(g.gNode.emit(s.EVT_FINISHED_AD_VEDIO),o.cb&&o.cb())},qttGame.showVideo(function(e){1===e?(null!=o.closeCb&&o.closeCb(),g.gNode.emit(s.EVT_FINISHED_AD_VEDIO),o.cb&&o.cb()):0===e?(console.log("qtt \u5e7f\u544a\u586b\u5145\u4e0d\u8db3"),qttGame.showHDAD(u)):2===e&&(null!=o.closeCb&&o.closeCb(),o.showToast("\u89c6\u9891\u672a\u770b\u5b8c"))})}}else{var f=void 0;switch(e){case 1:f="adunit-e0407a060fa919ee";break;case 2:f="adunit-1ccef6cc43cdf41e";break;case 3:f="adunit-1907f4bcd8c5079b";break;case 4:f="adunit-daf8756c4a60e100";break;case 5:f="adunit-16f084060743f718";break;case 6:f="adunit-3ae733fad55af692";break;case 7:f="adunit-54f85c9af017d730";break;default:cc.log("videoIndex error"),f="adunit-e0407a060fa919ee"}var p=wx.createRewardedVideoAd({adUnitId:f});p.load().then(function(){n&&n(),p.show()}).catch(function(e){"no advertisement"===e.errMsg&&(e.errMsg="\u5f53\u524d\u65e0\u5e7f\u544a\u586b\u5145\uff0c\u8bf7\u60a8\u7a0d\u540e\u518d\u8bd5"),o.showToast(e.errMsg)}),p.onClose(function(e){console.log("videoAd.onClose res.isEnded = "+e.isEnded),null!=i&&i(),p.offClose(),1==e.isEnded?(g.gNode.emit(s.EVT_FINISHED_AD_VEDIO),t&&t()):o.showToast(g.getInstance().sdkConfig.data.vedioFailedText)})}},haveAdvertisement:function(){return cc.sys.platform!==cc.sys.VIVO_GAME||!!this.supportedVivoAd},isQQ:function(){return!("object"!==("undefined"==typeof qq?"undefined":i(qq))||!qq.onTouchStart)},isQttGame:function(){return!("object"!==i(window.qttGame)||!window.qttGame.showVideo)}});cc._RF.pop()},{EventConfig:"EventConfig",EventDispatcher:"EventDispatcher",TowerView:"TowerView",Util:"Util"}],HotMod:[function(e,t,n){"use strict";cc._RF.push(t,"c1b8aU1P85JyoWcw9oGNJfK","HotMod");var i=e("Game");cc.Class({extends:cc.Component,properties:{bg:cc.Sprite,btnHot:cc.Button,btnHide:cc.Button,hotSp:cc.Sprite,duration:.2,timer:0,from:new cc.Vec2(0,0),to:new cc.Vec2(0,0),asc:!0,isDone:!0,onIOS:!1,item_template:{type:cc.Node,default:null},scroll_view:{type:cc.ScrollView,default:null}},onLoad:function(){var e=this;this.offsetX=1333,cc.sys.platform!==cc.sys.WECHAT_GAME||window.tt||window.wx.getSystemInfo({success:function(t){-1!=t.model.indexOf("iPhone")&&(e.onIOS=!0),e.processCfg()},fail:function(){e.processCfg()}}),this.blockEvent(!1),this.btnHot.node.on("click",this.onShow,this),this.btnHide.node.on("click",this.onHide,this),this.bg.node.opacity=0,this.hotSp.node.setPosition(-this.offsetX,0)},blockEvent:function(e){null!=this.bg.getComponent(cc.BlockInputEvents)&&(this.bg.getComponent(cc.BlockInputEvents).enabled=e)},update:function(e){1!=this.isDone&&(this.timer+=e,this.timer>=this.duration?this.isDone=!0:(this.hotSp.node.setPosition(this.from.x+(this.to.x-this.from.x)*(this.timer/this.duration),this.from.y+(this.to.y-this.from.y)*(this.timer/this.duration)),this.asc?this.bg.node.opacity=this.timer/this.duration*50:this.bg.node.opacity=50*(1-this.timer/this.duration)))},processCfg:function(){var e=this;cc.loader.load(url,function(t,n){i.getInstance().itemVals=n.data;for(var o=e.scroll_view.content,s=0;s<i.getInstance().itemVals.length;s++){var c=cc.instantiate(e.item_template);c.opacity=255,c.getComponent("Item").updateItem(s),o.addChild(c)}})},onShow:function(){!1!==this.isDone&&(this.onTweening(new cc.Vec2(-this.offsetX,0),new cc.Vec2(0,0),.36,!0),this.blockEvent(!0))},onHide:function(){!1!==this.isDone&&(this.onTweening(new cc.Vec2(0,0),new cc.Vec2(-this.offsetX,0),.36,!1),this.blockEvent(!1))},onTweening:function(e,t,n,i){this.timer=0,this.from=e,this.to=t,this.duration=n,this.asc=i,this.isDone=!1}}),cc._RF.pop()},{Game:"Game"}],InitView:[function(e,t,n){"use strict";cc._RF.push(t,"7605dsvaD1D9ae5sl8nl+QI","InitView");var i=e("Game");cc.Class({extends:cc.Component,properties:{},onLoad:function(){i.getInstance().login()},userWeChatLogin:function(){i.getInstance().login()}}),cc._RF.pop()},{Game:"Game"}],Item:[function(e,t,n){"use strict";cc._RF.push(t,"32198+zpBBODYQT8wZdvytz","Item");var i=e("Game");cc.Class({extends:cc.Component,properties:{btn:cc.Button,lbl:cc.Label,itemID:0},updateItem:function(e){this.itemID=e,this.lbl.node.getComponent(cc.Label).string=i.getInstance().itemVals[this.itemID].name;var t=this;cc.loader.load(url,function(e,n){var i=new cc.SpriteFrame(n);null!=t.btn&&1==cc.isValid(t.btn.node)&&(t.btn.node.getComponent(cc.Sprite).spriteFrame=i)})},onLoad:function(){this.btn.node.on("click",this.onClick,this)},onClick:function(){var e=i.getInstance().itemVals[this.itemID];e&&this.onNav(e)},onNav:function(e){var t=this;wx.navigateToMiniProgram&&wx.navigateToMiniProgram({appId:e.appid,path:e.path,success:function(n){t.adStatis(e.appid)}})},onPreView:function(e){var t=this;wx.previewImage({current:qrPath,urls:[qrPath],success:function(n){t.adStatis(e.appid)}})},adStatis:function(e){SGP&&SGP.plugin.Service.trace({tagId:6,tagName:"adskip",tagValue:e},function(e){console.log("trace data:"+JSON.stringify(e))})}}),cc._RF.pop()},{Game:"Game"}],Knife:[function(e,t,n){"use strict";cc._RF.push(t,"48ec0MwtqBCwY71qNbrwyxv","Knife");var i=e("Game"),o=e("EventConfig"),s=cc.Class({extends:cc.Component,statics:{ATTACK_TYPE:{NORMAL:1,TRIPLE:2,ROUND:3,TRIPE_ROUND:4}},properties:{flyTime:.2,rotateTime:.2,img1:cc.Node,img2:cc.Node,img3:cc.Node,particlePrefab:cc.Prefab},onLoad:function(){var e=this;this.node.originPos=this.node.position,this.img1.originPos=this.img1.position,this.img2.originPos=this.img2.position,this.img3.originPos=this.img3.position,this.img1.originRotation=this.img1.rotation,this.img2.originRotation=this.img2.rotation,this.img3.originRotation=this.img3.rotation,i.getInstance().getPropNum(i.GAME_PROP.BUFF_TRIPPLE)>0?this.setAttackType(s.ATTACK_TYPE.TRIPLE):this.setAttackType(s.ATTACK_TYPE.NORMAL),i.gNode.on(o.EVT_CHANGE_WEAPON,function(){var t=i.getInstance().getSkinId();e.setSkin(t)},this)},setKnifeTargetPos:function(e,t,n){this.knifeTargetPos1=this.img1.parent.convertToNodeSpaceAR(e),this.knifeTargetPos2=this.img2.parent.convertToNodeSpaceAR(t),this.knifeTargetPos3=this.img3.parent.convertToNodeSpaceAR(n)},setAttackType:function(e){e==s.ATTACK_TYPE.NORMAL||e==s.ATTACK_TYPE.ROUND?(this.img1.active=!0,this.img2.active=!1,this.img3.active=!1):(this.img1.active=!0,this.img2.active=!0,this.img3.active=!0)},setSkin:function(e){var t=i.getInstance().getFrameBySkinId(e);this.img1.getComponent(cc.Sprite).spriteFrame=t,this.img2.getComponent(cc.Sprite).spriteFrame=t,this.img3.getComponent(cc.Sprite).spriteFrame=t,console.log("skin width = "+this.img1.getContentSize().width+" height = "+this.img1.getContentSize().height);var n=this.img1.getContentSize().width;n<this.img1.getContentSize().height&&(n=this.img1.getContentSize().height),null!=this.img1.getComponent(cc.CircleCollider)&&(this.img1.getComponent(cc.CircleCollider).radius=n/2),null!=this.img2.getComponent(cc.CircleCollider)&&(this.img2.getComponent(cc.CircleCollider).radius=n/2),null!=this.img3.getComponent(cc.CircleCollider)&&(this.img3.getComponent(cc.CircleCollider).radius=n/2)},attack:function(){this.node.stopAllActions();s.ATTACK_TYPE.NORMAL,i.getInstance();i.getInstance().getTrippleNum()>0&&i.getInstance().getCircleNum()>0?this.attackBothTrippleAndRound():i.getInstance().getTrippleNum()>0?this.attackTripple():i.getInstance().getCircleNum()>0?this.attackRound():this.attackNormal(),i.gNode.emit(o.EVT_CUT_START)},attackNormal:function(){var e=cc.repeatForever(cc.rotateBy(this.rotateTime,720));this.img1.runAction(e);var t=cc.moveTo(this.flyTime,this.knifeTargetPos1),n=cc.sequence(t,cc.callFunc(function(){this.reset(),this.onAttackFinished()}.bind(this)));this.img1.runAction(n)},attackTripple:function(){var e=cc.repeatForever(cc.rotateBy(this.rotateTime,720));this.img1.runAction(e);var t=cc.moveTo(this.flyTime,this.knifeTargetPos1);this.img1.runAction(t);var n=cc.repeatForever(cc.rotateBy(this.rotateTime,720));this.img2.runAction(n);var i=cc.moveTo(this.flyTime,this.knifeTargetPos2);this.img2.runAction(i);var o=cc.repeatForever(cc.rotateBy(this.rotateTime,720));this.img3.runAction(o);var s=cc.moveTo(this.flyTime,this.knifeTargetPos3);this.img3.runAction(cc.sequence(s,cc.callFunc(function(){this.reset(),this.onAttackFinished()}.bind(this))))},attackRound:function(){var e=cc.repeatForever(cc.rotateBy(this.rotateTime,720));this.img1.runAction(e);var t=cc.moveTo(this.flyTime,this.knifeTargetPos1),n=cc.moveTo(this.flyTime,this.img1.originPos);this.img1.runAction(cc.sequence(t,n,cc.callFunc(function(){this.reset(),this.onAttackFinished()}.bind(this))))},attackBothTrippleAndRound:function(){var e=cc.repeatForever(cc.rotateBy(this.rotateTime,720));this.img1.runAction(e);var t=cc.moveTo(this.flyTime,this.knifeTargetPos1),n=cc.moveTo(this.flyTime,this.img1.originPos);this.img1.runAction(cc.sequence(t,n));var i=cc.repeatForever(cc.rotateBy(this.rotateTime,720));this.img2.runAction(i);var o=cc.moveTo(this.flyTime,this.knifeTargetPos2),s=cc.moveTo(this.flyTime,this.img2.originPos);this.img2.runAction(cc.sequence(o,s));var c=cc.repeatForever(cc.rotateBy(this.rotateTime,720));this.img3.runAction(c);var a=cc.moveTo(this.flyTime,this.knifeTargetPos3),r=cc.moveTo(this.flyTime,this.img3.originPos);this.img3.runAction(cc.sequence(a,r,cc.callFunc(function(){this.reset(),this.onAttackFinished()}.bind(this))))},onAttackFinished:function(){i.gNode.emit(o.EVT_CUT_END)},reset:function(){this.node.stopAllActions(),this.node.position=this.node.originPos,this.img1.stopAllActions(),this.img1.rotation=this.img1.originRotation,this.img1.position=this.img1.originPos,this.img2.stopAllActions(),this.img2.rotation=this.img2.originRotation,this.img2.position=this.img2.originPos,this.img3.stopAllActions(),this.img3.rotation=this.img3.originRotation,this.img3.position=this.img3.originPos},onDestroy:function(){i.gNode.targetOff(this)}});cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game"}],LeaderDialog:[function(e,t,n){"use strict";cc._RF.push(t,"471ce8AHo9F7YfCBJ9w/Nrx","LeaderDialog"),cc.Class({extends:cc.Component,properties:{btnClose:cc.Node},onLoad:function(){var e=this;this.btnClose.on("click",function(){e.node.destroy()})}}),cc._RF.pop()},{}],LoadingView:[function(e,t,n){"use strict";cc._RF.push(t,"49a18NX6QlHh5lt+V//X+sa","LoadingView"),cc.Class({extends:cc.Component,properties:{mask:cc.Node,text:cc.Node,logo:cc.Node,logoFrameList:[cc.SpriteFrame]},onLoad:function(){cc.sys.platform===cc.sys.WECHAT_GAME||cc.sys.platform===cc.sys.OPPO_GAME||window.tt||cc.sys.platform===cc.sys.VIVO_GAME?this.logo.getComponent(cc.Sprite).spriteFrame=this.logoFrameList[1]:cc.sys.platform===cc.sys.BAIDU_GAME&&(this.logo.getComponent(cc.Sprite).spriteFrame=this.logoFrameList[0]),this.mask.originSize=this.mask.getContentSize(),this.sceneList=["init","start"],this.preloadIndex=0,this.preload(),this.setPercent(0)},preload:function(){var e=this,t=this.sceneList[this.preloadIndex];null!=t&&cc.director.preloadScene(t,function(t,n,i){var o=e.preloadIndex/e.sceneList.length+1/e.sceneList.length*t/n;e.setPercent(o)},function(){e.preloadIndex++,e.preloadIndex>=e.sceneList.length?cc.director.loadScene(e.sceneList[0]):e.preload()})},setPercent:function(e){var t=this.mask.originSize.width*e;this.mask.width=t}}),cc._RF.pop()},{}],LuckDialog:[function(e,t,n){"use strict";cc._RF.push(t,"57f18OX0P9LgKVx0HixcFJH","LuckDialog");var i=e("Game"),o=e("Util"),s=e("EventConfig");cc.Class({extends:cc.Component,properties:{btnClose:cc.Node,btnGet:cc.Node,descNode:cc.Node,knife:cc.Node,knifeFrame:cc.Node,cellFrameList:[cc.SpriteFrame],shareFrame:cc.SpriteFrame,btnSkip:cc.Node},onLoad:function(){var e=this;this.btnClose.on("click",function(){e.node.destroy()}),this.btnSkip.on("click",function(){e.node.destroy()}),i.getInstance().isQQ()&&(i.getInstance().isShareHide()||(this.btnClose.active=!1,this.btnSkip.active=!0,i.getInstance().setBannerAdVisible(!1),this.scheduleOnce(function(){i.getInstance().setBannerAdVisible(!0),e.scheduleOnce(function(){e.btnSkip.y=e.btnSkip.y+i.getInstance().btHeight+180},.2)},1)));for(var t=[],n=0;n<i.getInstance().knifeSkinList1.length;n++){var c=i.GAME_PROP.WEAPON_PT+n+1;i.getInstance().getPropNum(c)<=0&&t.push(c)}for(n=0;n<i.getInstance().knifeSkinList2.length;n++){c=i.GAME_PROP.WEAPON_XY+n+1;i.getInstance().getPropNum(c)<=0&&t.push(c)}for(n=0;n<i.getInstance().knifeSkinList3.length;n++){c=i.GAME_PROP.WEAPON_ZY+n+1;i.getInstance().getPropNum(c)<=0&&t.push(c)}for(n=0;n<i.getInstance().knifeSkinList4.length;n++){c=i.GAME_PROP.WEAPON_SS+n+1;i.getInstance().getPropNum(c)<=0&&t.push(c)}for(n=0;n<i.getInstance().knifeSkinList5.length;n++){c=i.GAME_PROP.WEAPON_CS+n+1;i.getInstance().getPropNum(c)<=0&&t.push(c)}var a=t[o.random(t.length)-1],r=i.getInstance().getFrameBySkinId(a),l=Math.floor(a/1e3)-2;this.knife.getComponent(cc.Sprite).spriteFrame=r,this.knifeFrame.getComponent(cc.Sprite).spriteFrame=this.cellFrameList[l],this.skinId=a,this.videoAd=i.getInstance().registVedioAd(3,this.btnGet,this.shareFrame,function(){e.node.destroy(),i.getInstance().addSkinId(e.skinId),i.gNode.emit(s.EVT_CHANGE_WEAPON,e.skinId)})},start:function(){},onDestroy:function(){window.tt||cc.sys.platform===cc.sys.VIVO_GAME||i.getInstance().isQQ()||(null!=this.videoAd&&cc.sys.platform!==cc.sys.OPPO_GAME?this.videoAd.offClose():null!=this.videoAd&&cc.sys.platform===cc.sys.OPPO_GAME&&this.videoAd.destroy())}}),cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game",Util:"Util"}],MatrixRotation:[function(e,t,n){"use strict";cc._RF.push(t,"469851eJIJO7outk/e8MqbA","MatrixRotation"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],Module:[function(e,t,n){"use strict";cc._RF.push(t,"aace1G5s6hKN6UmR4v8JWwH","Module");var i=e("Game"),o=cc.Class({extends:cc.Component,properties:{root:null,sceneName:null},statics:{currentModule:null},onLoad:function(){},addPacketObserver:function(e){for(var t=0;t<e.length;t++){var n=e[t],o=n.type+"|"+n.id,s=function(e){var t=this.pb.decode(e);this.handle(t)}.bind(n);i.eventDispatcher.addListener(o,s,n.target)}},show:function(e){cc.director.loadScene(this.sceneName,function(){this.onSceneLaunched(),o.currentModule=this,e&&e()}.bind(this))},setRootView:function(e){this.root=e},getRootView:function(){return this.root},getNetwork:function(){return i.network},onSceneLaunched:function(){console.log("Module onSceneLaunched")},isCurrentModule:function(){return o.currentModule==this}});cc._RF.pop()},{Game:"Game"}],NativeAdDialog:[function(e,t,n){"use strict";cc._RF.push(t,"9647f/ZSthH36EbSSTk7e6z","NativeAdDialog");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("Game");cc.Class({extends:cc.Component,properties:{adTitle:cc.Label,imgIcon:cc.Sprite,imgLogo:cc.Sprite,desc:cc.Label,btnClose:cc.Node,adNode:cc.Node},onLoad:function(){var e=this;this.originalPos=this.node.position,window.qg||this.node.destroy(),this.nativeAdIndex=0,this.nativeAdIDs=o.getInstance().nativeAdIDs,this.init(),this.adNode.on(cc.Node.EventType.TOUCH_START,function(){window.qg&&e.nativeAd.reportAdClick({adId:e.nativeAdInfo.adId})},this),this.btnClose.on("click",function(){e.node.runAction(cc.sequence(cc.moveTo(1,e.originalPos),cc.callFunc(function(){e.node.destroy()})))},this)},init:function(){var e=this;if(cc.sys.platform===cc.sys.OPPO_GAME){var t=this.nativeAdIDs[this.nativeAdIndex%this.nativeAdIDs.length];this.nativeAd=qg.createNativeAd({posId:t}),this.nativeAd.load(),this.nativeAd.onLoad(function(t){console.log("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),e.nativeAdInfo=t.adList[0],console.log(JSON.stringify(e.nativeAdInfo)),console.log("adId:",t.adList[0].adId),console.log("title:",t.adList[0].title),console.log("desc:",t.adList[0].desc),console.log("iconUrlList:",t.adList[0].iconUrlList),console.log("imgUrlList:",t.adList[0].imgUrlList,i(t.adList[0].imgUrlList)),console.log("logoUrl:",t.adList[0].logoUrl),console.log("clickBtnTxt:",t.adList[0].clickBtnTxt),console.log("creativeType:",t.adList[0].creativeType),console.log("interactionType:",t.adList[0].interactionType),console.log("======= init NativeAdItem ========");var n=e.nativeAdInfo;e.nativeAd.reportAdShow({adId:n.adId}),cc.loader.load(n.logoUrl,function(t,n){t?console.log(t):e.imgLogo.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n)}),cc.loader.load(n.iconUrlList[0],function(t,n){t?console.log(t):e.imgIcon.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n)}),e.desc.string=n.desc,e.adTitle.string=n.title,e.node.runAction(cc.moveBy(1,cc.v2(-e.node.width-10,0)))}),this.nativeAd.onError(function(t){console.log("OPPO CREATE NATIVE ERROR:",JSON.stringify(t)),e.nativeAdIndex++,e.scheduleOnce(e.init,1)})}},onDestroy:function(){this.nativeAd&&this.nativeAd.destroy()}}),cc._RF.pop()},{Game:"Game"}],NetworkManager:[function(e,t,n){"use strict";cc._RF.push(t,"98187C5GrVND6rzh5+e5GcW","NetworkManager");var i=e("Game"),o=e("EventConfig");cc.Class({extends:cc.Component,ctor:function(){this._wait={}},properties:{_ws:null},connect:function(e,t){console.log("networkManager connect ip = "+e+" port = "+t),this._ws=t?new WebSocket("ws://"+e+":"+t):new WebSocket("ws://"+e),this.addWebsocketEvent()},addWebsocketEvent:function(){var e=this;this._ws.onopen=function(t){e.handleOpen(t)},this._ws.binaryType="arraybuffer",this._ws.onmessage=function(t){e.handleMessage(t)},this._ws.onerror=function(t){e.handleError(t)},this._ws.onclose=function(t){e.handleOnClose(t)}},close:function(){this._ws&&this._ws.close()},handleOpen:function(e){console.log("==========handleOpen=========="),this._wait={},i.eventDispatcher.dispatchEvent(o.EVT_WS_OPEN,null)},handleMessage:function(e){var t=0,n=new Uint16Array(e.data,t,2);t+=2;for(var o=n[0],s=new Uint8Array(e.data,t,4),c=new ArrayBuffer(4),a=new Uint8Array(c),r=0;r<s.byteLength;r++)a[r]=s[r];var l=new Uint32Array(c)[0];console.log("receive server msgType = "+o+" msgId = "+l+" length = "+e.data.byteLength);var h=new Uint8Array(e.data,6,e.data.byteLength-6),d=o+"|"+l;this._wait[d]=!1,i.eventDispatcher.dispatchEvent(d,h)},testSend:function(){console.log("=======testSend========");var t=e("Proto").test_proto.Person,n=t.create({name:"ly",age:30}),i=t.encode(n).finish();this.send(100,1234,i)},testReceive:function(t){var n=e("Proto").test_proto.Person.decode(t);console.log("name = "+n.name+" age = "+n.age)},handleError:function(e){console.log("=======handleError======="),i.eventDispatcher.dispatchEvent(o.EVT_WS_ERROR,null)},handleOnClose:function(e){console.log("=======handleOnClose========"),i.eventDispatcher.dispatchEvent(o.EVT_WS_CLOSE,null)},isConnected:function(){return!!this._ws&&this._ws.readyState==WebSocket.OPEN},send:function(e,t,n,i){if(i){var o=e+"|"+i;if(this._wait[o])return;this._wait[o]=!0}console.log("send msgType = "+e+" msgId = "+t);var s=new Uint8Array(6+n.byteLength),c=new ArrayBuffer(2);new Uint16Array(c)[0]=e;var a=new Uint8Array(c),r=new ArrayBuffer(4);new Uint32Array(r)[0]=t;for(var l=new Uint8Array(r),h=0,d=0;d<a.byteLength;d++)s[h]=a[d],h++;for(var g=0;g<l.byteLength;g++)s[h]=l[g],h++;for(var u=0;u<n.byteLength;u++)s[h]=n[u],h++;this._ws.send(s)},get:function(e,t,n){e+="?";for(var i in t)e+=i+"="+t[i]+"&";console.log(this.ip+e);var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==o.readyState)if(o.status>=200&&o.status<400){var e=o.responseText;if(e){var t=JSON.parse(e);n(t)}else console.log("\u8fd4\u56de\u6570\u636e\u4e0d\u5b58\u5728"),n(!1)}else console.log("\u8bf7\u6c42\u5931\u8d25"),n(!1)},o.open("GET",e,!0),o.send()},post:function(e,t,n,i){var o="";if(1==i)o=JSON.stringify(t);else for(var s in t)o+=s+"="+t[s]+"&";var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4==c.readyState)if(c.status>=200&&c.status<400){var e=c.responseText;if(e){var t=JSON.parse(e);n(t)}else console.log("\u8fd4\u56de\u6570\u636e\u4e0d\u5b58\u5728"),n(!1)}else console.log("\u8bf7\u6c42\u5931\u8d25"),n(!1)},console.log("url = "+e),console.log("param = "+o),c.open("POST",e,!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(o)}}),cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game",Proto:void 0}],OfflineDialog:[function(e,t,n){"use strict";cc._RF.push(t,"fa5b2hjpftCpo7vhBGnsuKx","OfflineDialog");var i=e("Game");cc.Class({extends:cc.Component,properties:{btnGet:cc.Node,btnDouble:cc.Node,shareFrame:cc.SpriteFrame},onLoad:function(){var e=this;this.btnGet.on("click",function(){i.getInstance().addCoin(e.totalReward),i.getInstance().sendSetOfflineTimeReq(),e.node.destroy()}),cc.sys.platform!==cc.sys.VIVO_GAME&&(this.videoAd=i.getInstance().registVedioAd(5,this.btnDouble,this.shareFrame,function(){i.getInstance().addCoin(2*e.totalReward),i.getInstance().sendSetOfflineTimeReq(),e.node.destroy()})),this.btnDouble.active=i.getInstance().haveAdvertisement();for(var t=i.getInstance().getFruitList(),n=Math.ceil(t.length/5),o=0,s=1;s<=4;s++)if(s<=n)for(var c=0;c<5;c++){var a=5*(s-1)+c,r=t[a];null!=t[a]&&(o+=i.getInstance().offlineRewardList[r-1])}this.rewardUnit=o},init:function(e){e>=36e3&&(e=36e3);var t=e/3600*this.rewardUnit;this.totalReward=Math.floor(t),this.btnGet.getChildByName("num").getComponent(cc.Label).string=""+this.totalReward,this.btnDouble.getChildByName("num").getComponent(cc.Label).string=""+2*this.totalReward},onDestroy:function(){window.tt||cc.sys.platform===cc.sys.VIVO_GAME||i.getInstance().isQQ()||(null!=this.videoAd&&cc.sys.platform!==cc.sys.OPPO_GAME?this.videoAd.offClose():null!=this.videoAd&&cc.sys.platform===cc.sys.OPPO_GAME&&this.videoAd.destroy())}}),cc._RF.pop()},{Game:"Game"}],PassDialog:[function(e,t,n){"use strict";cc._RF.push(t,"73918RFpoxENIWNEarVyoY8","PassDialog");var i=e("Game"),o=e("EventConfig");cc.Class({extends:cc.Component,properties:{btnDouble:cc.Node,btnHome:cc.Node,btnNext:cc.Node,frameList:[cc.Node],coinNum:cc.Node,titleNode:cc.Node,flyNode:cc.Node,slicePrefab:cc.Prefab,frameJSA:cc.SpriteFrame,frameJSB:cc.SpriteFrame,additionalFrame:cc.SpriteFrame,mask:cc.Node,smallTurn:cc.Node,turnTip:cc.Node,shareFrame:cc.SpriteFrame,doubleReword:cc.Node,doubleCoin:cc.Node,btnShareVideo:cc.Node},onLoad:function(){var e=this;if(window.tt&&i.getInstance().setBannerAdVisible(!0),cc.sys.platform===cc.sys.VIVO_GAME&&i.getInstance().supportedVivoAd&&i.getInstance().openVedioAd(),this.addUIEvent(),this.mask.originSize=this.mask.getContentSize(),this.setPercent(0),this.btnDouble.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1,.88),cc.scaleTo(1,.8)))),this.btnShareVideo.active=!1,i.getInstance().ttGameRecorderManager){var t=i.getInstance().ttGameRecorderManager;i.getInstance().videoPath||t.stop()}this.btnShareVideo.active=Boolean(window.tt&&i.getInstance().videoPath),this.btnShareVideo.on("click",function(t){tt.shareVideo({videoPath:""+i.getInstance().videoPath,success:function(){console.log("\u5206\u4eab\u6210\u529f\uff01"),i.getInstance().isShareHide()?i.getInstance().showToast("\u5206\u4eab\u6210\u529f"):(i.getInstance().showToast("\u5206\u4eab\u6210\u529f,\u91d1\u5e01+100"),i.getInstance().addCoin(100)),e.btnShareVideo.active=!1},fail:function(e){console.log("\u5206\u4eab\u5931\u8d25\uff01"),i.getInstance().showToast("\u5206\u4eab\u5931\u8d25\uff01")}})},this),i.gNode.on(o.EVT_RECORD_SHOW,function(){e.btnShareVideo.active=Boolean(window.tt&&i.getInstance().videoPath)},this)},start:function(){this.titleNode.getComponent(sp.Skeleton).setToSetupPose(),this.titleNode.getComponent(sp.Skeleton).setAnimation(0,"animation",!1)},addUIEvent:function(){this.btnHome.on("click",function(){i.getInstance().enterStart()}.bind(this)),this.btnNext.on("click",function(){this.node.destroy(),i.getInstance().gameView.nextLevel()}.bind(this))},handleDoubleClicked:function(){var e=this;this.videoAd=i.getInstance().registVedioAd(4,this.btnDouble,this.shareFrame,function(){i.getInstance().addCoin(2*e.rewardNum),e.btnDouble.active=!1,e.coinNum.getComponent(cc.Label).string=(3*e.rewardNum).toString()})},updateSlice:function(e){for(var t=this,n=(e-1)%4,o=i.getInstance().getFruitSliceData(),s=0;s<=n;s++){var c=cc.instantiate(this.slicePrefab);c.getComponent("Slice").init(o[s]),c.parent=this.frameList[s],this.frameList[s].getComponent(cc.Sprite).spriteFrame=this.frameJSA,c.scaleX=.7,c.scaleY=.7,c.y=28}for(s=n+1;s<4;s++)this.frameList[s].getComponent(cc.Sprite).spriteFrame=this.frameJSB;if(this.turnTip.on(cc.Node.EventType.TOUCH_END,function(){3===n?t.handleAdditionReward():i.getInstance().showToast("\u6bcf\u8fc74\u5173\u5f00\u542f\u5e78\u8fd0\u8f6c\u76d8")}),this.smallTurn.on(cc.Node.EventType.TOUCH_END,function(){3===n?t.handleAdditionReward():i.getInstance().showToast("\u6bcf\u8fc74\u5173\u5f00\u542f\u5e78\u8fd0\u8f6c\u76d8")}),3===n)this.setPercent(1),this.btnNext.active=!1,this.btnHome.active=!0,this.btnDouble.active=!0,this.btnDouble.getComponent(cc.Sprite).spriteFrame=this.additionalFrame,this.doubleReword.active=!1,this.doubleCoin.active=!1,this.btnDouble.on("click",function(){t.handleAdditionReward()});else{var a=(n+1)/5;this.setPercent(a),this.btnDouble.active=i.getInstance().haveAdvertisement(),this.handleDoubleClicked()}},setRewardNum:function(e){this.rewardNum=e,this.coinNum.getComponent(cc.Label).string=e.toString(),this.doubleReword.getComponent(cc.Label).string=(3*e).toString()},handleAdditionReward:function(){var e=this;this.titleNode.active=!1;var t=cc.repeatForever(cc.rotateBy(1,120));this.smallTurn.runAction(t);for(var n=0;n<this.frameList.length;n++){var s=this.frameList[n],c=[cc.delayTime(.2*n),cc.moveTo(.3,this.flyNode.position)];n==this.frameList.length-1&&c.push(cc.callFunc(function(){e.node.destroy(),i.gNode.emit(o.EVT_SHOW_TURNPLATE)})),s.runAction(cc.sequence(c))}},setPercent:function(e){var t=this.mask.originSize.width*e;this.mask.width=t},onDestroy:function(){i.gNode.targetOff(this),window.tt||cc.sys.platform===cc.sys.VIVO_GAME||i.getInstance().isQQ()||(null!=this.videoAd&&cc.sys.platform!==cc.sys.OPPO_GAME?this.videoAd.offClose():null!=this.videoAd&&cc.sys.platform===cc.sys.OPPO_GAME&&this.videoAd.destroy())}}),cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game"}],Quee:[function(e,t,n){"use strict";cc._RF.push(t,"6b346/t9mxNNYghRAZJ12db","Quee");var i={itemVals:[],slotItems:[],isScroll:!1,seTimes:20,isReSort:!1,unlockScroll:!1,updateList:function(e){if(i.isReSort){if(e==i.itemVals.length-1)return;for(var t=i.itemVals[e],n=e+1,o=i.itemVals.length;n<o;n++)i.itemVals[n-1]=i.itemVals[n];i.itemVals[o-1]=t;for(var s=0;s<i.slotItems.length;s++)i.slotItems[s].getComponent("Item").updateItem(s)}i.unlockScroll=!0}};e("Game");cc.Class({extends:cc.Component,properties:{item_template:{type:cc.Prefab,default:null},scroll_view:{type:cc.ScrollView,default:null},dir:-1},onLoad:function(){this.processCfg()},scrolls:function(){if(!this.scrolling){this.scrolling=!0;var e=this.scroll_view.getScrollOffset(),t=this.scroll_view.getMaxScrollOffset(),n=1==this.dir?(t.x+e.x)/t.x*i.swTimes:Math.abs(e.x)/t.x*i.swTimes;n&&(1==this.dir?this.scroll_view.scrollToRight(n):this.scroll_view.scrollToLeft(n))}},update:function(e){if(i.isScroll&&i.swTimes)if(i.unlockScroll){var t=this.scroll_view.getScrollOffset().x;0==t&&-1==this.dir?this.dir=1:-t|0==this.scroll_view.getMaxScrollOffset().x|0&&1==this.dir&&(this.dir=-1),this.scrolling=!1,this.scrolls(),i.unlockScroll=!1}else this.scrolling=!0},processCfg:function(){var e=this;cc.loader.load(url,function(t,n){i.itemVals=n.data,i.isScroll=n.isScroll,i.swTimes=n.swTimes,i.isReSort=n.isReSort;for(var o=e.scroll_view.content,s=0,c=i.itemVals.length;s<c;s++){var a=cc.instantiate(e.item_template);a.getComponent("Item").updateItem(s),o.addChild(a),i.slotItems.push(a)}})}}),t.exports=i,cc._RF.pop()},{Game:"Game"}],RankView:[function(e,t,n){"use strict";cc._RF.push(t,"3c37eBa9lxPL5GoT4bHKrdJ","RankView");var i=e("Game"),o=cc.Class({extends:cc.Component,properties:{btnClose:cc.Node,content:cc.Node},statics:{RANK_TAB:{TAB_FRIEND:0,TAB_GROUP:1,TAB_WORLD:2}},onLoad:function(){var e=this;this.btnClose.on("click",function(){if(e.node.active=!1,e.tabIndex=null,cc.sys.platform!==cc.sys.WECHAT_GAME||window.tt||i.getInstance().isQQ()){if(cc.sys.platform===cc.sys.BAIDU_GAME){swan.getOpenDataContext().postMessage({message:"CloseRank"})}}else wx.postMessage({message:"CloseRank"})})},switchTab:function(e){if(!(window.tt||i.getInstance().isQQ()||cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.BAIDU_GAME||e!==o.RANK_TAB.TAB_FRIEND))if(cc.sys.platform===cc.sys.WECHAT_GAME)wx.postMessage({message:"FriendRank"});else if(cc.sys.platform===cc.sys.BAIDU_GAME){swan.getOpenDataContext().postMessage({message:"FriendRank"})}}});cc._RF.pop()},{Game:"Game"}],ReviveDialog:[function(e,t,n){"use strict";cc._RF.push(t,"6eab6DGdclBm6ya+jd5lcxC","ReviveDialog");var i=e("Game"),o=e("EventConfig");cc.Class({extends:cc.Component,properties:{progress:cc.Node,countdownNode:cc.Node,btnContinue:cc.Node,skipNode:cc.Node,frameList:[cc.SpriteFrame],btnCoinContinue:cc.Node},onLoad:function(){this.originProgressSize=this.progress.getContentSize(),i.getInstance().isQQ()||(this.skipNode.active=!1),this.addUIEvent(),cc.log("Game.getInstance().gameView.hasRevive = ",i.getInstance().gameView.hasRevive),0===i.getInstance().gameView.hasRevive?this.btnCoinContinue.getChildByName("num").getComponent(cc.Label).string="150":1===i.getInstance().gameView.hasRevive&&(this.btnCoinContinue.getChildByName("num").getComponent(cc.Label).string="300")},addUIEvent:function(){var e=this;this.btnContinue.active=i.getInstance().haveAdvertisement(),this.btnContinue.on("click",function(){i.getInstance().openVedioAd(6,function(){console.log("Revive callback"),i.gNode.emit(o.EVT_REVIVED),i.gNode.emit(o.EVT_PLAY_CONTINUE),e.node.destroy()},function(){console.log("Revive show callback"),e.node.pauseAllActions()},function(){console.log("Revive close callback"),e.node.resumeAllActions()})}),cc.sys.platform!==cc.sys.VIVO_GAME||i.getInstance().supportedVivoAd||(this.btnContinue.active=!1),this.btnCoinContinue.on("click",function(){var t=void 0;0===i.getInstance().gameView.hasRevive?t=i.getInstance().spendCoin(150):1===i.getInstance().gameView.hasRevive&&(t=i.getInstance().spendCoin(300)),t&&(i.gNode.emit(o.EVT_REVIVED),i.gNode.emit(o.EVT_PLAY_CONTINUE),e.node.destroy())}),this.skipNode.on("click",function(){i.getInstance().gameView.showFailDialog(),i.gNode.emit(o.EVT_PLAY_SKIP),this.node.destroy()}.bind(this)),i.getInstance().isQQ()&&!i.getInstance().isShareHide()&&(i.getInstance().setBannerAdVisible(!1),this.scheduleOnce(function(){i.getInstance().setBannerAdVisible(!0),e.scheduleOnce(function(){e.skipNode.y=e.skipNode.y+i.getInstance().btHeight+180},.2)},1))},countdown:function(e){this.totalTime=e,this.time=e;var t=cc.delayTime(1),n=cc.callFunc(function(){this.time--,e-this.time==2&&(i.getInstance().isQQ()||(this.skipNode.active=!0)),this.time<0&&(this.time=0,this.timeout()),this.countdownNode.getComponent(cc.Label).string=this.time+"s",this.setPercent(this.time/this.totalTime)}.bind(this)),o=cc.sequence(t,n),s=cc.repeatForever(o);this.node.runAction(s),this.setPercent(this.time/this.totalTime),this.countdownNode.getComponent(cc.Label).string=this.time+"s"},setPercent:function(e){this.progress.setContentSize(cc.size(this.originProgressSize.width,this.originProgressSize.height*e))},timeout:function(){this.timeoutCb&&this.timeoutCb(),this.node.destroy()},setTimeoutCb:function(e){this.timeoutCb=e}}),cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game"}],Share:[function(e,t,n){"use strict";cc._RF.push(t,"87bf85i0rJORpY8dyOV/a33","Share");var i=e("Game"),o=e("EventConfig"),s=e("Util");cc.Class({extends:cc.Component,properties:{lastShareTime:0,isShare:!1},onLoad:function(){this.failedNum=0,this.shareNum=0;var e=this;cc.sys.platform!==cc.sys.WECHAT_GAME||window.tt||i.getInstance().isQQ()?cc.sys.platform===cc.sys.BAIDU_GAME?swan.onShow(function(t){1==i.getInstance().isBaiduShareEvent()?e.handleWechatShareEvent():e.handleNoWechatShareEvent()}):window.tt?tt.onShow(function(t){1==i.getInstance().isWechatShareEvent()?e.handleWechatShareEvent():e.handleNoWechatShareEvent()}):i.getInstance().isQQ()&&qq.onShow(function(t){1==i.getInstance().isWechatShareEvent()?e.handleWechatShareEvent():e.handleNoWechatShareEvent()}):wx.onShow(function(t){1==i.getInstance().isWechatShareEvent()?e.handleWechatShareEvent():e.handleNoWechatShareEvent()}),this.addCommonShareEvent()},handleWechatShareEvent:function(){var e=this;if(0!=this.isShare)return 1==i.getInstance().isShareHide()?(this.cb&&this.cb(),void(this.cb=null)):void this.scheduleOnce(function(){0==e.isCancel?e.success():e.failed()},.2)},handleNoWechatShareEvent:function(){if(0!=this.isShare){if(1==i.getInstance().isShareHide())return this.cb&&this.cb(),void(this.cb=null);this.shareNum++;var e=parseInt(i.getInstance().sdkConfig.data.shareTimeLimit);if(Date.parse(new Date)-this.lastShareTime<=e)this.failedNum>=2?this.success("\u7b2c\u4e09\u6b21\u5fc5\u6210\u529f"):this.failed("2s\u5fc5\u5b9a\u6210\u529f");else{var t=0;t=1==this.shareNum?parseInt(i.getInstance().sdkConfig.data.shareFailRate1):2==this.shareNum?parseInt(i.getInstance().sdkConfig.data.shareFailRate2):t=parseInt(i.getInstance().sdkConfig.data.shareFailRate3);var n=s.random(100);n<t?this.failed("randomNum = "+n+" failRange = "+t):this.success("randomNum = "+n+" failRange = "+t)}this.isShare=!1}},success:function(e){var t=this;i.getInstance().showLoadingAnim(),this.scheduleOnce(function(){i.getInstance().closeLoadingAnim(),t.failedNum=0,t.shareNum=0,null!=t.cb&&t.cb(),t.cb=null,console.log("=========EventConfig.EVT_FINISED_SHARE=========="),i.gNode.emit(o.EVT_FINISED_SHARE)},1)},failed:function(e){var t=this;i.getInstance().showLoadingAnim(),this.scheduleOnce(function(){var e;i.getInstance().closeLoadingAnim(),t.failedNum++,e="\u6362\u4e2a\u670b\u53cb\u8bd5\u8bd5\u5427\uff01",i.getInstance().showToast(e),t.cb=null},1)},addCommonShareEvent:function(){var e=8;cc.sys.platform!==cc.sys.WECHAT_GAME||window.tt||i.getInstance().isQQ()?cc.sys.platform===cc.sys.BAIDU_GAME?swan.onShareAppMessage(function(t){if("true"===i.getInstance().sdkConfig.data.randomShareSwitch){var n=parseInt(i.getInstance().sdkConfig.data.randomShareNum);if(e<=n){var o=Math.floor(9*Math.random()+1);e=o}}return{title:i.getInstance().sdkConfig.data["shareText"+e],imageUrl:i.getInstance().sdkConfig.data["shareUrl"+e],success:function(t){console.log("onShareAppMessage share success",JSON.stringify(t)),i.getInstance().sendEventReq(3003,["shareImgIndex: "+e])},fail:function(e){console.log("onShareAppMessage share fail",JSON.stringify(e))}}}):window.tt?tt.onShareAppMessage(function(t){if("true"===i.getInstance().sdkConfig.data.randomShareSwitch){var n=parseInt(i.getInstance().sdkConfig.data.randomShareNum);if(e<=n){var o=Math.floor(9*Math.random()+1);e=o}}return i.getInstance().sendEventReq(3003,["shareImgIndex: "+e]),{title:i.getInstance().sdkConfig.data["shareText"+e],imageUrl:i.getInstance().sdkConfig.data["shareUrl"+e]}}):i.getInstance().isQQ()&&qq.onShareAppMessage(function(t){if("true"===i.getInstance().sdkConfig.data.randomShareSwitch){var n=parseInt(i.getInstance().sdkConfig.data.randomShareNum);if(e<=n){var o=Math.floor(9*Math.random()+1);e=o}}return i.getInstance().sendEventReq(3003,["shareImgIndex: "+e]),{title:i.getInstance().sdkConfig.data["shareText"+e],imageUrl:i.getInstance().sdkConfig.data["shareUrl"+e]}}):wx.onShareAppMessage(function(t){if("true"===i.getInstance().sdkConfig.data.randomShareSwitch){var n=parseInt(i.getInstance().sdkConfig.data.randomShareNum);if(e<=n){var o=Math.floor(9*Math.random()+1);e=o}}return i.getInstance().sendEventReq(3003,["shareImgIndex: "+e]),{title:i.getInstance().sdkConfig.data["shareText"+e],imageUrl:i.getInstance().sdkConfig.data["shareUrl"+e]}})},shareWechat:function(e,t,n){var o=this;if(cc.sys.platform!==cc.sys.WECHAT_GAME||window.tt){if(cc.sys.platform===cc.sys.BAIDU_GAME){if("true"===i.getInstance().sdkConfig.data.randomShareSwitch){var s=parseInt(i.getInstance().sdkConfig.data.randomShareNum);if(e<=s){var c=Math.floor(9*Math.random()+1);e=c}}this.isCancel=!1,this.cb=t,this.lastShareTime=Date.parse(new Date),this.isShare=!0;var a=function(){var t=i.getInstance().sdkConfig.data["shareText"+e],s=i.getInstance().sdkConfig.data["shareUrl"+e];n="shareIndex="+e,swan.shareAppMessage({title:t,imageUrl:s,query:n,cancel:function(){console.log("====shareBaidu cancel===="),o.isCancel=!0}}),i.getInstance().sendEventReq(3003,["shareImgIndex: "+e])};i.getInstance().hasSDKConfig()?a():i.getInstance().sendSDKConfigReq(function(e){a()})}else if(window.tt){if("true"===i.getInstance().sdkConfig.data.randomShareSwitch){var r=parseInt(i.getInstance().sdkConfig.data.randomShareNum);if(e<=r){var l=Math.floor(9*Math.random()+1);e=l}}this.isCancel=!1,this.cb=t,this.lastShareTime=Date.parse(new Date),this.isShare=!0;var h=function(){var t=i.getInstance().sdkConfig.data["shareText"+e],o=i.getInstance().sdkConfig.data["shareUrl"+e];n="shareIndex="+e,tt.shareAppMessage({title:t,imageUrl:o,query:n})};i.getInstance().hasSDKConfig()?h():i.getInstance().sendSDKConfigReq(function(e){h()})}else if(i.getInstance().isQQ()){if("true"===i.getInstance().sdkConfig.data.randomShareSwitch){var d=parseInt(i.getInstance().sdkConfig.data.randomShareNum);if(e<=d){var g=Math.floor(9*Math.random()+1);e=g}}this.isCancel=!1,this.cb=t,this.lastShareTime=Date.parse(new Date),this.isShare=!0;var u=function(){var t=i.getInstance().sdkConfig.data["shareText"+e],o=i.getInstance().sdkConfig.data["shareUrl"+e];n="shareIndex="+e,qq.shareAppMessage({title:t,imageUrl:o,query:n})};i.getInstance().hasSDKConfig()?u():i.getInstance().sendSDKConfigReq(function(e){u()})}}else{if("true"===i.getInstance().sdkConfig.data.randomShareSwitch){var f=parseInt(i.getInstance().sdkConfig.data.randomShareNum);if(e<=f){var p=Math.floor(9*Math.random()+1);e=p}}this.isCancel=!1,this.cb=t,this.lastShareTime=Date.parse(new Date),this.isShare=!0;var m=function(){console.log("SHARE_START");var t=i.getInstance().sdkConfig.data["shareText"+e],s=i.getInstance().sdkConfig.data["shareUrl"+e];n="shareIndex="+e,wx.shareAppMessage({title:t,imageUrl:s,query:n,cancel:function(){console.log("====shareWechat cancel===="),o.isCancel=!0}}),i.getInstance().sendEventReq(3003,["shareImgIndex: "+e])};i.getInstance().hasSDKConfig()?m():i.getInstance().sendSDKConfigReq(function(e){m()})}}}),cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game",Util:"Util"}],SignDialog:[function(e,t,n){"use strict";cc._RF.push(t,"7301cdeSolH05x9HVKiCQDc","SignDialog");var i=e("Game"),o=e("Util"),s=e("EventConfig");cc.Class({extends:cc.Component,properties:{checkBox:cc.Node,checkText:cc.Node,btnClose:cc.Node,btnGet:cc.Node,isCheck:!1,checkFrameList:[cc.SpriteFrame],coinFrame:cc.SpriteFrame,btnSigned:cc.Node},onLoad:function(){var e=this;this.btnClose.on("click",function(){e.node.destroy()}),this.updateCheckbox(),this.checkBox.on(cc.Node.EventType.TOUCH_END,function(){e.isCheck=!e.isCheck,e.updateCheckbox()}),i.getInstance().isShareHide(),this.checkBox.active=!1,this.checkText.active=!1,this.updateSignView(),this.btnGet.on("click",function(){for(var t=i.getInstance().getSignData(),n=0;n<t.itemList.length;n++){var o=t.itemList[n];if(0==o.isSign){var c=o.propId,a=o.count;if(o.isSign=!0,t.time=Date.parse(new Date),i.getInstance().setSignData(t),c==i.GAME_PROP.COIN){var r=i.getInstance().getCoin();r+=a,i.getInstance().setCoin(r)}else i.getInstance().addSkinId(c),i.gNode.emit(s.EVT_CHANGE_WEAPON,c);i.getInstance().isShareHide()||i.gNode.emit(s.EVT_SHOW_GET_AGAIN,c,a),e.updateSignView();break}}if(1==e.isCheck){i.share.shareWechat(1)}})},updateCheckbox:function(){1==this.isCheck?this.checkBox.getComponent(cc.Sprite).spriteFrame=this.checkFrameList[0]:this.checkBox.getComponent(cc.Sprite).spriteFrame=this.checkFrameList[1]},updateSignView:function(){for(var e=i.getInstance().getSignData(),t=!0,n=0;n<e.itemList.length;n++){var s=e.itemList[n],c=this.node.getChildByName("dialog").getChildByName("frame"+(n+1));c.index=n;var a=c.getChildByName("item"),r=c.getChildByName("num"),l=c.getChildByName("seal");s.propId==i.GAME_PROP.COIN?(a.getComponent(cc.Sprite).spriteFrame=this.coinFrame,r.getComponent(cc.Label).string=s.count.toString(),a.scaleX=1,a.scaleY=1):(a.getComponent(cc.Sprite).spriteFrame=i.getInstance().getFrameBySkinId(s.propId),r.getComponent(cc.Label).string="\u8d85\u7ea7\u5956\u52b1",a.scaleX=.7,a.scaleY=.7),0==s.isSign?(t=!1,l.active=!1):l.active=!0}var h=e.time;0==o.isSameDay(new Date(h),new Date)&&0==t?(this.btnGet.active=!0,this.btnSigned.active=!1):(this.btnGet.active=!1,this.btnSigned.active=!0)}}),cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game",Util:"Util"}],Slice:[function(e,t,n){"use strict";cc._RF.push(t,"a9b54BDRPNOVJ+seGNIeR8V","Slice");var i=e("Game");cc.Class({extends:cc.Component,properties:{dash:cc.Node,san:cc.Node},onLoad:function(){this.san.zIndex=1},init:function(e){for(var t=0;t<e.length;t++){var n=e[t],o=i.getInstance().fruitSliceFrameList[n-1],s=new cc.Node;s.addComponent(cc.Sprite),s.getComponent(cc.Sprite).spriteFrame=o,s.parent=this.node,s.anchorY=0,s.position=cc.v2(0,this.dash.y/2-10+this.dash.getContentSize().height/2+15*t),this.san.y=this.dash.y/2-10+this.dash.getContentSize().height/2+15*(e.length-1)+15}}}),cc._RF.pop()},{Game:"Game"}],StartView:[function(e,t,n){"use strict";cc._RF.push(t,"570ccP8nABAX42UF+wkZOwH","StartView");var i=e("Game"),o=e("EventConfig"),s=e("Util"),c=e("RankView");cc.Class({extends:cc.Component,properties:{btnStart:cc.Node,btnChange:cc.Node,btnSound:cc.Node,btnRank:cc.Node,btnInvite:cc.Node,btnAchieve:cc.Node,btnTower:cc.Node,btnSign:cc.Node,knife:cc.Node,titleNode:cc.Node,weaponDlgPrefab:cc.Prefab,signDlgPrefab:cc.Prefab,achieveDlgPrefab:cc.Prefab,offlineDlgPrefab:cc.Prefab,toastPrefab:cc.Prefab,rankPrefab:cc.Prefab,leaderPrefab:cc.Prefab,storeProgramPrefab:cc.Prefab,soundFrameList:[cc.SpriteFrame],ytjNode:cc.Node,rankNode:cc.Node,logo:cc.Node,logoFrameList:[cc.SpriteFrame],getAgainDlgPrefab:cc.Prefab,oppoRankNode:cc.Node},showToast:function(e){var t=cc.instantiate(this.toastPrefab);t.zIndex=3,t.position=cc.v2(0,0),t.parent=this.node,t.getChildByName("text").getComponent(cc.Label).string=e;var n=cc.moveBy(2,cc.v2(0,300)),i=cc.fadeTo(2,100),o=cc.spawn(n,i);t.runAction(cc.sequence(o,cc.callFunc(function(){t.destroy()})))},showWeaponDialog:function(){var e=cc.instantiate(this.weaponDlgPrefab);this.node.addChild(e),e.zIndex=1},showSignDialog:function(){var e=cc.instantiate(this.signDlgPrefab);this.node.addChild(e),e.zIndex=1},showAchieveDialog:function(){if(null===i.achieveDialog){var e=cc.instantiate(this.achieveDlgPrefab);this.node.addChild(e),i.achieveDialog=e,e.zIndex=1}},showOfflineDialog:function(e){var t=cc.instantiate(this.offlineDlgPrefab);this.node.addChild(t),t.zIndex=1,t.getComponent("OfflineDialog").init(e)},showLeaderDialog:function(){var e=cc.instantiate(this.leaderPrefab);this.node.addChild(e),e.zIndex=1},showStoreRewardDialog:function(){var e=cc.instantiate(this.storeProgramPrefab);this.node.addChild(e),e.zIndex=1},showRankDialog:function(e){this.oppoRankNode.active=!0},updateSoundBtn:function(){1==i.getInstance().isSoundOpen?this.btnSound.getComponent(cc.Sprite).spriteFrame=this.soundFrameList[0]:this.btnSound.getComponent(cc.Sprite).spriteFrame=this.soundFrameList[1]},onLoad:function(){var e=this;if(cc.sys.platform===cc.sys.WECHAT_GAME||cc.sys.platform===cc.sys.OPPO_GAME||window.tt||cc.sys.platform===cc.sys.VIVO_GAME?this.logo.getComponent(cc.Sprite).spriteFrame=this.logoFrameList[1]:cc.sys.platform===cc.sys.BAIDU_GAME&&(this.logo.getComponent(cc.Sprite).spriteFrame=this.logoFrameList[0]),i.getInstance().setBannerAdVisible(!0),i.getInstance().startView=this.node,this.btnStart.on("click",function(){cc.director.preloadScene("fruitcut",null,function(){this.knife.stopAllActions();var e=cc.moveTo(.5,cc.v2(0,-607));this.knife.runAction(cc.sequence(e,cc.callFunc(function(){cc.director.loadScene("fruitcut")})))}.bind(this))}.bind(this)),this.btnChange.on("click",function(){this.showWeaponDialog()}.bind(this)),this.btnSound.on("click",function(){i.getInstance().isSoundOpen=!i.getInstance().isSoundOpen,e.updateSoundBtn()}),this.updateSoundBtn(),this.btnRank.on("click",function(){e.showRankDialog(c.RANK_TAB.TAB_FRIEND)}),this.btnSign.on("click",function(){e.showSignDialog()}),i.getInstance().isAllSign(),this.btnSign.active=0==i.getInstance().isAllSign(),this.btnTower.on("click",function(){i.getInstance().enterTower()}),this.btnInvite.active=!1,cc.sys.platform===cc.sys.OPPO_GAME||cc.sys.platform===cc.sys.VIVO_GAME||i.getInstance().isQttGame()||(this.btnInvite.active=!0,this.btnInvite.on("click",function(){i.share.shareWechat(7)})),this.btnAchieve.on("click",function(){e.showAchieveDialog()}),cc.sys.platform===cc.sys.VIVO_GAME&&(this.btnAchieve.active=!i.getInstance().isShareHide()),this.updateAchieveRedPoint(),i.gNode.on(o.EVT_CHANGE_WEAPON,function(){var t=i.getInstance().getSkinId();e.knife.getComponent(cc.Sprite).spriteFrame=i.getInstance().getFrameBySkinId(t)},this),i.gNode.on(o.EVT_ACHIEVE_FINISHED,function(){e.updateAchieveRedPoint()},this),i.gNode.on(o.EVT_SHOW_GET_AGAIN,function(t,n){e.showGetAgainDialog(0,t,n)},this),this.titleNode.getComponent("TitleView").setCoin(i.getInstance().getCoin()),this.titleNode.getComponent("TitleView").showDesc(!1),this.playKnifeAnim(),1==this.canShowDealDlg()&&this.scheduleOnce(function(){e.showSignDialog(),i.getInstance().setLastSignDlgTime()},1),i.getInstance().sendGetOfflineTimeReq(function(t){console.log("seconds = "+t),t>3600&&e.showOfflineDialog(t)}),this.addEvent(),this.ytjNode.active=!1,window.tt||i.getInstance().isQQ()||i.getInstance().isQttGame()||cc.sys.platform===cc.sys.OPPO_GAME||cc.sys.platform===cc.sys.VIVO_GAME||(i.getInstance().getPropNum(i.GAME_PROP.WEAPON_YTJ)<=0?(this.ytjNode.active=!0,this.ytjNode.getChildByName("btn").on("click",function(){e.showLeaderDialog()})):this.ytjNode.active=!1),cc.sys.platform!==cc.sys.WECHAT_GAME||window.tt||i.getInstance().isQQ()||i.getInstance().isQQ())cc.sys.platform===cc.sys.BAIDU_GAME&&(12110063e8!==i.getInstance().swanScene&&0x4444e95510398!==i.getInstance().swanScene||i.getInstance().getPropNum(i.GAME_PROP.WEAPON_YTJ)<=0&&this.scheduleOnce(function(){e.showStoreRewardDialog()},.5));else{1104==i.getInstance().wxScene&&i.getInstance().getPropNum(i.GAME_PROP.WEAPON_YTJ)<=0&&this.scheduleOnce(function(){e.showStoreRewardDialog()},.5)}this.rankNode.active=!1},updateAchieveRedPoint:function(){this.btnAchieve.getChildByName("redpoint").active=1==i.getInstance().hasFinishedAchieve()},addEvent:function(){var e=this;i.gNode.on(o.EVT_COIN_CHANGE,function(){e.titleNode.getComponent("TitleView").setCoin(i.getInstance().getCoin())},this),i.gNode.on(o.EVT_GET_YTJ,function(){e.ytjNode.active=!1},this)},canShowDealDlg:function(){if(1==i.getInstance().isAllSign())return!1;var e=i.getInstance().getLastSignDlgTime();if(null==e)return!0;var t=parseInt(e);return 0==s.isSameDay(new Date(t),new Date)},showGetAgainDialog:function(e,t,n){var i=cc.instantiate(this.getAgainDlgPrefab);this.node.addChild(i),i.getComponent("treasureBoxDialog").init(e,t,n),i.runAction(cc.sequence(cc.scaleTo(.1,1.08),cc.scaleTo(.1,1))),i.zIndex=3},playKnifeAnim:function(){var e=i.getInstance().getSkinId();this.knife.getComponent(cc.Sprite).spriteFrame=i.getInstance().getFrameBySkinId(e);var t=cc.moveBy(1,cc.v2(0,60)),n=cc.moveBy(1,cc.v2(0,-60)),o=[];o.push(t),o.push(n);var s=cc.sequence(o),c=cc.repeatForever(s);this.knife.runAction(c)},onDestroy:function(){i.getInstance().setBannerAdVisible(!1),i.getInstance().startView=null,i.gNode.targetOff(this)}});cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game",RankView:"RankView",Util:"Util"}],StoreProgramDialog:[function(e,t,n){"use strict";cc._RF.push(t,"63ec7J67NpMebEDu44M5fr8","StoreProgramDialog");var i=e("Game"),o=e("EventConfig");cc.Class({extends:cc.Component,properties:{btnClose:cc.Node,btnGet:cc.Node},start:function(){var e=this;this.btnClose.on("click",function(){e.node.destroy(),i.getInstance().addSkinId(i.GAME_PROP.WEAPON_YTJ),i.gNode.emit(o.EVT_CHANGE_WEAPON,i.GAME_PROP.WEAPON_YTJ),i.getInstance().addCoin(6666),i.gNode.emit(o.EVT_GET_YTJ)}),this.btnGet.on("click",function(){e.node.destroy(),i.getInstance().addSkinId(i.GAME_PROP.WEAPON_YTJ),i.gNode.emit(o.EVT_CHANGE_WEAPON,i.GAME_PROP.WEAPON_YTJ),i.getInstance().addCoin(6666),i.gNode.emit(o.EVT_GET_YTJ)})}}),cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game"}],Tiled:[function(e,t,n){"use strict";cc._RF.push(t,"c0961KBe0NHtIMWAhaJrvzn","Tiled");var i=e("EventConfig"),o=e("Game"),s=e("Util");cc.Class({extends:cc.Component,properties:{maxRotationNum:100,whitePointPrefab:cc.Prefab,trippleKnifePrefab:cc.Prefab},onLoad:function(){this.hasRevive=!1,this.node.position=cc.v2(0,168),this.sliceList=[],this.tweenList1=["easeSineIn","easeSineOut","easeSineInOut","easeCubicActionIn","easeCubicActionOut","easeCubicActionInOut","easeQuadraticActionIn","easeQuadraticActionOut","easeQuadraticActionInOut"],this.tweenList2=["easeQuarticActionIn","easeQuarticActionOut","easeQuarticActionInOut","easeBackIn","easeBackOut","easeBackInOut","easeQuinticActionIn","easeQuinticActionOut","easeQuinticActionInOut","easeBounceIn","easeBounceOut","easeBounceInOut"],this.tweenList3=["easeElasticIn","easeElasticOut","easeElasticInOut"]},randomTween:function(){var e=null;if(1==this.subLevel||2==this.subLevel)e=this.tweenList1[s.random(this.tweenList1.length)-1];else if(3==this.subLevel)e=this.tweenList2[s.random(this.tweenList2.length)-1];else if(4==this.subLevel){var t=s.random(this.tweenList2.length+this.tweenList3.length)-1;e=t<=this.tweenList2.length-1?this.tweenList2[t]:this.tweenList3[t-this.tweenList1.length]}return cc[e]},initTmx:function(e,t,n){var s=this;this.level=t,this.subLevel=n,this.originPos=this.node.position,console.log("originPos.x "+this.originPos.x+" originPos.y = "+this.originPos.y),this.map=this.getComponent(cc.TiledMap),this.map.tmxAsset=e,this.tileSize=this.map.getTileSize(),this.col=this.map.getMapSize().width,this.row=this.map.getMapSize().height,this.node.setContentSize(cc.size(this.tileSize.width*this.col,this.tileSize.height*this.row));cc.moveBy(.75,cc.v2(0,-1200)).easing(cc.easeCubicActionIn());this.parseFruit(),this.addEvent(),this.scheduleOnce(function(){s.parsePath(),s.parseRotation(),s.parseScale(),o.gNode.emit(i.EVT_UNLOCK_TOUCH)},1)},addEvent:function(){o.gNode.on(i.EVT_COLLIDER,function(e){for(var t=e.node,n=0;n<this.fruitList.length;n++)if(this.fruitList[n]==t){this.cutFruit(t);break}}.bind(this),this)},cutFruit:function(e){o.gNode.emit(i.EVT_CUTFRUIT,e),e.getComponent(cc.CircleCollider).enabled=!1,null!=e.getChildByName("img")&&(e.getChildByName("img").active=!1),this.sliceList.push(e.fruitType)},destroyFruit:function(e){o.getInstance().putFruitPool(e)},createFruit:function(){var e=o.getInstance().getFruitPool();return null==e&&(e=cc.instantiate(o.getInstance().fruitPrefab)),e},parseFruit:function(){this.fruitList=[],this.whitePointList=[];for(var e=this.map.getObjectGroup("fruit").getObjects(),t=(this.node.getContentSize(),0);t<e.length;t++){var n=this.translateTilePosToCellPos(e[t].x,e[t].y),i=cc.v2(n.x*this.tileSize.width-this.node.getContentSize().width/2+.5*this.tileSize.width,n.y*this.tileSize.height-this.node.getContentSize().height/2+.5*this.tileSize.height),s=e[t].name||"1",c=parseInt(s);0!=o.getInstance().hasFruit(c)&&null!=o.getInstance().fruitFrameList[c-1]||(c=o.getInstance().getFinalFruitId(c));var a=this.createFruit();a.getComponent("Fruit").init(c),null==a&&console.log("fruit is null fruitType = "+c),a.parent=this.node,a.cellPos=n;var r=0,l=0;0===o.getInstance().fruitDirection?(r=0,l=500):1===o.getInstance().fruitDirection?(r=-500,l=0):2===o.getInstance().fruitDirection&&(r=500,l=0),a.position=cc.v2(i.x+r,i.y+l);var h=Math.floor(4*Math.random()+2)/10,d=cc.moveBy(h,cc.v2(-r,-l));a.runAction(d),a.fruitType=c,a.zIndex=1,1==cc.isValid(a.trippleKnife)&&a.trippleKnife.destroy(),this.fruitList.push(a),this.dealFruitRotate(a)}this.totalFruitNum=e.length,1==this.isBombLevel()&&this.dealBomb()},isBombLevel:function(){return!1},dealBomb:function(){var e=s.random(1);this.fruitList.sort(function(e,t){var n=e.position.x*e.position.x+e.position.y*e.position.y;return t.position.x*t.position.x+t.position.y*t.position.y-n});for(var t=0;t<e;t++)this.fruitList[t].getComponent("Fruit").setBomb();this.totalFruitNum-=e},clearFruit:function(){for(var e=0;e<this.fruitList.length;e++)this.destroyFruit(this.fruitList[e])},dealFruitRotate:function(e){var t=s.random(1),n=(s.random(1001)+2e3)/1e3,i=(s.random(1e3)+500)/1e3,o=s.random(255)+45;0==t&&(o*=-1);var c=cc.delayTime(n),a=cc.rotateBy(i,o),r=cc.sequence(a,c);e.runAction(cc.repeatForever(r))},parsePath:function(){this.pathList=[];var e=this.map.getObjectGroup("path");if(null!=e){this.pathList=e.getObjects(),this.pathList.sort(function(e,t){e.name,t.name});for(var t=[],n=0;n<this.pathList.length;n++){var i=this.pathList[n],s=i.polylinePoints,c=i.time||.5,a=(cc.v2(0,0),i.tween),r=null;null!=a&&(this.level-o.getInstance().levelData.length>0?r=this.randomTween():null!=cc[a]&&(r=cc[a]));for(var l=0;l<s.length;l++){var h=cc.v2(0,0);h.x=s[l].x+i.x-this.node.getContentSize().width/2,h.y=-s[l].y+i.y-this.node.getContentSize().height/2;var d,g=cc.v2(this.originPos.x+h.x,this.originPos.y+h.y);if(0==n&&0==l&&(this.node.position=g),0!=l)d=null!=r?cc.moveTo(c,cc.v2(g.x,g.y)).easing(r()):cc.moveTo(c,cc.v2(g.x,g.y)),t.push(d)}}if(0!=this.pathList.length)if(1==t.length){var u=t[0],f=cc.repeatForever(u);this.node.runAction(f)}else if(t.length>1){var p=cc.sequence(t);f=cc.repeatForever(p);this.node.runAction(f)}}},parseRotation:function(){var e=this.map.getObjectGroup("rotate");if(null!=e){var t=this.level-o.getInstance().levelData.length,n=0;(n=t%10==0?t/10*.05:.05*Math.ceil(t/10))>=.3&&(n=.3);for(var i=[],s=1;s<=this.maxRotationNum;s++){var c="r"+s,a=e.getProperty(c);if(null==a)break;var r,l=a.split("|"),h=parseFloat(l[0]),d=parseFloat(l[1]);r=l[2];var g=void 0;this.level-o.getInstance().levelData.length>0?g=this.randomTween():null!=r&&(g=cc[r]),u=null==g?cc.rotateBy(h-h*n,d):cc.rotateBy(h-h*n,d).easing(g()),i.push(u)}if(1==i.length){var u=i[0],f=cc.repeatForever(u);this.node.runAction(f)}else if(i.length>1){var p=cc.sequence(i);f=cc.repeatForever(p);this.node.runAction(f)}}},parseScale:function(){var e=this.map.getObjectGroup("scale");if(null!=e){var t=e.getProperty("x-axis"),n=e.getProperty("x-inner-scale")||0,i=e.getProperty("x-inner-time")||.5,o=e.getProperty("x-out-scale")||n,s=e.getProperty("x-out-time")||i,c=e.getProperty("y-axis"),a=e.getProperty("y-inner-scale")||0,r=e.getProperty("y-inner-time")||.5,l=e.getProperty("y-out-scale")||a,h=e.getProperty("y-out-time")||r;if(null!=t){t-=this.node.getContentSize().width/2;for(var d=0;d<this.fruitList.length;d++){var g=(E=(C=this.fruitList[d]).x-t)*o,u=E*n,f=cc.moveBy(s,cc.v2(g,0)),p=cc.moveBy(s,cc.v2(-g)),m=cc.moveBy(i,cc.v2(-u,0)),v=cc.moveBy(i,cc.v2(u,0)),A=cc.sequence(f,p,m,v),I=cc.repeatForever(A);C.runAction(I)}}if(null!=c){c-=this.node.getContentSize().height/2;for(d=0;d<this.fruitList.length;d++){var C,E;g=(E=(C=this.fruitList[d]).y-c)*l,u=E*a,f=cc.moveBy(h,cc.v2(0,g)),p=cc.moveBy(h,cc.v2(0,-g)),m=cc.moveBy(r,cc.v2(0,-g)),v=cc.moveBy(r,cc.v2(0,g)),A=cc.sequence(f,p,m,v),I=cc.repeatForever(A);C.runAction(I)}}}},translateTilePosToCellPos:function(e,t){for(var n=cc.v2(0,0),i=0;i<this.col;i++)if(e>=i*this.tileSize.width&&e<(i+1)*this.tileSize.width){n.x=i;break}for(i=0;i<this.row;i++)if(t>=i*this.tileSize.height&&t<(i+1)*this.tileSize.height){n.y=i;break}return n},getFruitNum:function(){for(var e=0,t=0;t<this.fruitList.length;t++){var n=this.fruitList[t];1==n.getChildByName("img").active&&1!=n.getComponent("Fruit").isBomb&&e++}return e},getTotalFruitNum:function(){return this.totalFruitNum},addTrippleKnife:function(){var e=cc.instantiate(this.trippleKnifePrefab),t=s.random(this.fruitList.length)-1,n=this.fruitList[t],i=s.random(360);e.parent=n,e.position=cc.v2(0,0),e.rotation=i,this.trippleKnife=e,this.trippleKnife.zIndex=1,n.trippleKnife=this.trippleKnife},hasTrippleKnife:function(){return!!this.trippleKnife},releaseTrippleKnife:function(){this.trippleKnife=null},onDestroy:function(){o.gNode.targetOff(this)}}),cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game",Util:"Util"}],TipConfig:[function(e,t,n){"use strict";cc._RF.push(t,"8c196uaHBxJGqMabXGy7G/t","TipConfig"),cc.Class({extends:cc.Component,properties:{},statics:{tipText:["\u5c0f\u63d0\u793a\uff1a\u5148\u89c2\u5bdf\u65cb\u8f6c\uff0c\u518d\u627e\u673a\u4f1a\u51fa\u5200\u54e6\uff01","\u5c0f\u63d0\u793a\uff1a\u53ef\u4ee5\u8bd5\u8bd5\u6b66\u5668\u56de\u65cb\u6216\u8005\u4e09\u53c9\u621f\u653b\u514b\u96be\u5173\uff01","\u5c0f\u63d0\u793a\uff1a\u852c\u83dc\u8f6c\u5230\u4e0b\u65b9\u518d\u51fa\u5200\u547d\u4e2d\u7387\u66f4\u9ad8\u54e6\uff01","\u5c0f\u63d0\u793a\uff1a\u5e78\u8fd0\u8f6c\u76d8\u91cc\u7684\u6b66\u5668\u4e0d\u5bb9\u9519\u8fc7\uff01","\u5c0f\u63d0\u793a\uff1a\u6709\u65f6\u4e0d\u7528\u76f2\u76ee\u8ffd\u6c42\u4e00\u5200\u5207\uff0c\u8fc7\u5173\u624d\u662f\u738b\u9053\uff01","\u5c0f\u63d0\u793a\uff1a\u6bcf\u4e2a\u5173\u5361\u90fd\u6709\u89c4\u5f8b\u53ef\u5faa\uff0c\u4ed4\u7ec6\u89c2\u5bdf\u518d\u51fa\u5200\uff01","\u5c0f\u63d0\u793a\uff1a\u9694\u51e0\u5c0f\u65f6\u4e0a\u7ebf\u4f1a\u5f97\u5230\u79bb\u7ebf\u6536\u76ca\uff0c\u8bb0\u5f97\u56de\u6765\u54e6\uff01","\u5c0f\u63d0\u793a\uff1a\u70b9\u51fb\u201c\u6362\u6b66\u5668\u201d\u6309\u94ae\uff0c\u7528\u91d1\u5e01\u8d2d\u4e70\u70ab\u9177\u7684\u6b66\u5668","\u5c0f\u63d0\u793a\uff1a\u591a\u591a\u95ef\u5173\u89e3\u9501\u65b0\u852c\u83dc\uff0c\u852c\u83dc\u5e97\u89c4\u6a21\u4f1a\u53d8\u5927\uff01","\u5c0f\u63d0\u793a\uff1a\u5e78\u8fd0\u76ae\u80a4\u662f\u968f\u673a\u51fa\u73b0\u7684\uff0c\u559c\u6b22\u5c31\u5165\u624b\u54e6\uff01","\u5c0f\u63d0\u793a\uff1a\u6bcf\u8fc74\u5173\u5c31\u4f1a\u6709\u4e00\u6b21\u5e78\u8fd0\u8f6c\u76d8\u673a\u4f1a\uff0c\u52a0\u6cb9\uff01","\u5c0f\u63d0\u793a\uff1a\u522b\u5fd8\u8bb0\u67e5\u770b\u6210\u5c31\u5e76\u9886\u53d6\u60a8\u7684\u5956\u52b1\uff01","\u5c0f\u63d0\u793a\uff1a\u4e00\u5200\u5207\u5b8c\u6240\u6709\u852c\u83dc\u4f1a\u989d\u5916\u5956\u52b1100\u91d1\u5e01\uff01"],fruitTips:["\u5927\u767d\u83dc\u4e2d\u542b\u6709\u5927\u91cf\u7684\u7c97\u7ea4\u7ef4\uff0c\u53ef\u4fc3\u8fdb\u80a0\u58c1\u8815\u52a8\uff0c\u5e2e\u52a9\u6d88\u5316\u3002\u5e38\u98df\u6709\u52a9\u4e8e\u589e\u5f3a\u673a\u4f53\u514d\u75ab\u529f\u80fd\uff0c\u5bf9\u51cf\u80a5\u5065\u7f8e\u4e5f\u5177\u6709\u610f\u4e49\u3002","\u571f\u8c46\u542b\u6709\u5927\u91cf\u6dc0\u7c89\u3001\u86cb\u767d\u8d28\u3001B\u65cf\u7ef4\u751f\u7d20\u3001\u7ef4\u751f\u7d20C\u7b49\uff0c\u80fd\u4fc3\u8fdb\u813e\u80c3\u7684\u6d88\u5316\u529f\u80fd\u3002\u4f46\u7cd6\u5c3f\u75c5\u60a3\u8005\u4e0d\u4e88\u8fc7\u5ea6\u98df\u7528\u3002","\u897f\u7ea2\u67ff\u65e2\u662f\u83dc\u4e2d\u4f73\u5473\uff0c\u53c8\u662f\u679c\u4e2d\u7f8e\u54c1\uff0c\u6709\u591a\u79cd\u529f\u7528\uff0c\u88ab\u79f0\u4e3a\u795e\u5947\u7684\u83dc\u4e2d\u4e4b\u679c\u3002\u6709\u751f\u6d25\u6b62\u6e34\uff0c\u51c9\u8840\u517b\u809d\uff0c\u6e05\u70ed\u89e3\u6bd2\u4e4b\u6548\u3002","\u9ec4\u74dc\u5473\u7518\uff0c\u751c\u3001\u6027\u51c9\u3001\u82e6\u3001\u65e0\u6bd2\uff0c\u5165\u813e\u3001\u80c3\u3001\u5927\u80a0\uff1b\u5177\u6709\u9664\u70ed\uff0c\u5229\u6c34\u5229\u5c3f\uff0c\u6e05\u70ed\u89e3\u6bd2\u7684\u529f\u6548\uff0c\u9ec4\u74dc\u70ed\u91cf\u5f88\u4f4e\uff0c\u662f\u51cf\u80a5\u4f73\u54c1\u3002","\u8304\u5b50\u53ef\u964d\u4f4e\u9ad8\u8840\u8102\uff0c\u9ad8\u8840\u538b\uff0c\u5176\u542b\u6709\u7684\u9f99\u8475\u78b1\u5bf9\u4e8e\u9632\u6cbb\u80c3\u764c\u6709\u4e00\u5b9a\u6548\u679c\uff0c\u8304\u5b50\u542b\u6709\u7684\u7ef4\u751f\u7d20E\u5bf9\u80fd\u5ef6\u7f13\u8870\u8001\u3002","\u9e21\u7fc5\u6709\u6e29\u4e2d\u76ca\u6c14\u3001\u8865\u7cbe\u6dfb\u9ad3\u3001\u5f3a\u8170\u5065\u80c3\u7b49\u529f\u6548\uff0c\u5b83\u7684\u80f6\u539f\u86cb\u767d\u542b\u91cf\u4e30\u5bcc\uff0c\u5bf9\u4e8e\u4fdd\u6301\u76ae\u80a4\u5149\u6cfd\u3001\u589e\u5f3a\u76ae\u80a4\u5f39\u6027\u5747\u6709\u597d\u5904\u3002","\u80e1\u841d\u535c\u662f\u4e00\u79cd\u8d28\u8106\u5473\u7f8e\u3001\u8425\u517b\u4e30\u5bcc\u7684\u5bb6\u5e38\u852c\u83dc\uff0c\u7d20\u6709\u201c\u5c0f\u4eba\u53c2\u201d\u4e4b\u79f0\u3002\u6bcf\u5929\u5403\u4e09\u6839\u80e1\u841d\u535c\uff0c\u6709\u52a9\u4e8e\u9884\u9632\u5fc3\u810f\u75be\u75c5\u548c\u80bf\u7624\u3002","\u7528\u83b2\u85d5\u5236\u6210\u7c89\uff0c\u80fd\u6d88\u98df\u6b62\u6cfb\uff0c\u5f00\u80c3\u6e05\u70ed\uff0c\u6ecb\u8865\u517b\u6027\uff0c\u9884\u9632\u5185\u51fa\u8840\uff0c\u662f\u5987\u5b7a\u7ae5\u59aa\u3001\u4f53\u5f31\u591a\u75c5\u8005\u4e0a\u597d\u7684\u6d41\u8d28\u98df\u54c1\u548c\u6ecb\u8865\u4f73\u73cd\u3002","\u8c4c\u8c46\u79cd\u5b50\u542b\u6dc0\u7c89\u3001\u6cb9\u8102\uff0c\u53ef\u4f5c\u836f\u7528\uff0c\u6709\u5f3a\u58ee\u3001\u5229\u5c3f\u3001\u6b62\u6cfb\u4e4b\u6548\uff1b\u830e\u53f6\u80fd\u6e05\u51c9\u89e3\u6691\uff0c\u5e76\u4f5c\u7eff\u80a5\u3001\u9972\u6599\u6216\u71c3\u6599\u3002","\u5357\u74dc\u4e2d\u7684\u679c\u80f6\u6709\u5f88\u597d\u7684\u5438\u9644\u6027\uff0c\u80fd\u9ecf\u7ed3\u548c\u6d88\u9664\u4f53\u5185\u7ec6\u83cc\u6bd2\u7d20\u548c\u4e00\u4e9b\u91cd\u91d1\u5c5e\u5143\u7d20\uff08\u94c5\u3001\u6c5e\u7b49\uff09\uff0c\u8d77\u5230\u89e3\u6bd2\u4f5c\u7528\u3002","\u7389\u7c73\u4e00\u76f4\u90fd\u88ab\u8a89\u4e3a\u957f\u5bff\u98df\u54c1\uff0c\u5176\u5bcc\u542b\u7684\u6728\u8d28\u7d20\u548c\u9541\u5143\u7d20\u662f\u516c\u8ba4\u6709\u6548\u6291\u5236\u764c\u7ec6\u80de\u7684\u8425\u517b\u5143\u7d20\u3002","\u65e5\u672c\u6700\u8fd1\u4e00\u9879\u7814\u7a76\u5f97\u51fa\u7ed3\u8bba\uff1a\u897f\u84dd\u82b1\u7684\u5e73\u5747\u8425\u517b\u4ef7\u503c\u53ca\u9632\u75c5\u4f5c\u7528\u8fdc\u8fdc\u8d85\u51fa\u5176\u4ed6\u852c\u83dc\uff0c\u540d\u5217\u7b2c\u4e00\u3002","\u6d77\u5e26\u662f\u975e\u5e38\u666e\u901a\u5e38\u89c1\u7684\u6d77\u4ea7\u54c1\uff0c\u5927\u5bb6\u90fd\u77e5\u9053\u7684\u662f\u5403\u6d77\u5e26\u53ef\u4ee5\u8865\u7898\uff0c\u9632\u6cbb\u7532\u51cf\u7b49\u75be\u75c5\u3002","\u9999\u83c7\u7d20\u6709\u5c71\u73cd\u4e4b\u738b\u4e4b\u79f0\uff0c\u662f\u9ad8\u86cb\u767d\u3001\u4f4e\u8102\u80aa\u7684\u8425\u517b\u4fdd\u5065\u98df\u54c1\u3002\u4e3b\u6cbb\u98df\u6b32\u51cf\u9000\uff0c\u5c11\u6c14\u4e4f\u529b\u3002","\u897f\u65b9\u4eba\u7231\u5403\u8f83\u751f\u53e3\u5473\u7684\u725b\u6392\uff0c\u8fd9\u79cd\u725b\u6392\u542b\u6cb9\u9002\u4e2d\u53c8\u7565\u5e26\u8089\u6c41\uff0c\u53e3\u611f\u751a\u662f\u9c9c\u7f8e\uff0c\u800c\u4e1c\u65b9\u4eba\u66f4\u504f\u72317\u6210\u719f\u3002","\u8c46\u8150\u7d20\u6709\u201c\u690d\u7269\u8089\u201d\u4e4b\u7f8e\u79f0\uff0c\u4e3a\u8865\u76ca\u6e05\u70ed\u517b\u751f\u98df\u54c1\uff0c\u5e38\u98df\u53ef\u8865\u4e2d\u76ca\u6c14\u3001\u6e05\u70ed\u6da6\u71e5\u3001\u751f\u6d25\u6b62\u6e34\u3001\u6e05\u6d01\u80a0\u80c3\u3002","\u51ac\u74dc\u8089\u53ca\u74e4\u6709\u5229\u5c3f\u3001\u6e05\u70ed\u3001\u5316\u75f0\u3001\u89e3\u6e34\u7b49\u529f\u6548\u3002\u4ea6\u53ef\u6cbb\u7597\u6c34\u80bf\u3001\u75f0\u5598\u3001\u6691\u70ed\u3001\u75d4\u75ae\u7b49\u75c7\u3002","\u82e6\u74dc\u6700\u597d\u7684\u5403\u6cd5\u8fd8\u662f\u51c9\u62cc\u3002\u51c9\u62cc\u80fd\u591f\u5f88\u597d\u5730\u4fdd\u7559\u82e6\u74dc\u4e2d\u6240\u542b\u6709\u7684\u7ef4\u751f\u7d20\u3002\u5982\u679c\u7528\u6e05\u7092\u7684\u65b9\u6cd5\u4f1a\u4f7f\u7ef4\u751f\u7d20\u5927\u91cf\u6d41\u5931\u3002","\u5c0f\u767d\u83dc\u4e3a\u542b\u7ef4\u751f\u7d20\u548c\u77ff\u7269\u8d28\u6700\u4e30\u5bcc\u7684\u852c\u83dc\u4e4b\u4e00\uff0c\u4e3a\u4fdd\u8bc1\u8eab\u4f53\u7684\u751f\u7406\u9700\u8981\u63d0\u4f9b\u7269\u8d28\u6761\u4ef6\uff0c\u6709\u52a9\u4e8e\u589e\u5f3a\u673a\u4f53\u514d\u75ab\u80fd\u529b\u3002","\u9f99\u867e\u4e0d\u4ec5\u8089\u8d28\u6d01\u767d\u7ec6\u5ae9\uff0c\u5473\u9053\u9c9c\u7f8e\uff0c\u9ad8\u86cb\u767d\u4f4e\u8102\u80aa\uff0c\u8fd8\u6709\u836f\u7528\u4ef7\u503c\uff0c\u80fd\u5316\u75f0\u6b62\u54b3\uff0c\u4fc3\u8fdb\u624b\u672f\u540e\u7684\u4f24\u53e3\u751f\u808c\u6108\u5408\u3002"]},onLoad:function(){}}),cc._RF.pop()},{}],TitleView:[function(e,t,n){"use strict";cc._RF.push(t,"92474Bi8xFI2qrQUCT+5WCi","TitleView");var i=e("Game");cc.Class({extends:cc.Component,properties:{coin:cc.Node,mask:cc.Node,level:cc.Node,coinNum:0,desc:cc.Node},onLoad:function(){this.mask.originSize=this.mask.getContentSize();var e=i.getInstance().getLevel();this.setLevel(e,i.getInstance().subLevel)},start:function(){},setPercent:function(e){var t=this.mask.originSize.width*e;this.mask.width=t},setLevel:function(e,t){var n=i.getInstance().getSubLevelNum();this.setPercent((t-1)/n),this.level.getComponent(cc.Label).string=e.toString()},setCoin:function(e){this.coinNum=e,this.coin.getComponent(cc.Label).string=e.toString()},addCoin:function(e){this.coinNum+=e,this.coin.getComponent(cc.Label).string=this.coinNum.toString()},showDesc:function(e){this.desc.active=e}}),cc._RF.pop()},{Game:"Game"}],TowerView:[function(e,t,n){"use strict";cc._RF.push(t,"6662bNWA+ND4IvSCvXpaxIv","TowerView");var i=e("Game"),o=cc.Class({extends:cc.Component,properties:{btnBack:cc.Node,floorList:{default:[],type:[cc.Node]},title:cc.Node,repairNode:cc.Node,reward:cc.Node,fruitInfoPre:cc.Prefab,flyPoint:cc.Node,coinPre:cc.Prefab,coinNode:cc.Node,guideFinger:cc.Node},statics:{intentLevel:null,intentSubLevel:null,isLock:!1},onLoad:function(){var e=this;this.btnBack.on("click",function(){null==o.intentLevel?i.getInstance().enterStart():i.getInstance().enterFruit()}),window.tt&&i.getInstance().setBannerAdVisible(!1),cc.sys.platform===cc.sys.VIVO_GAME&&i.getInstance().supportedVivoAd&&i.getInstance().openVedioAd(),this.isAddCoin=!0,this.isCompleteGuide=i.getInstance().getStoreData(),this.repairNode.active=!1,this.title.active=!1;for(var t=i.getInstance().getFruitList(),n=0;n<this.floorList.length;n++)this.floorList[n].active=!1;for(var s=0,c=1;c<=this.floorList.length;c++){if(!(c<=4)){this.repairNode.active=!0;var a=this.floorList[c-2];this.repairNode.parent=a,console.log("bottomFloor.y = "+a.y),this.repairNode.y=a.getContentSize().height/2,this.repairNode.x=0,console.log(this.repairNode.y);break}var r=this.floorList[c-1];r.active=!0;for(var l=function(n){var a=t[d=5*(c-1)+n],l=t.length;if(null!=t[d]){if(g=r.getChildByName("towerFruitNode").getChildByName("towerCell"+(n+1)),r.getChildByName("towerFruitNode").getChildByName("towerCell"+(n+1)).getChildByName("lock").active=!1,(u=new cc.Node).addComponent(cc.Sprite),u.getComponent(cc.Sprite).spriteFrame=i.getInstance().fruitFrameList[a-1],u.parent=g,o.isLock&&d===l-1){var h=e.flyPoint.convertToWorldSpaceAR(cc.v2(0,0)),f=g.convertToNodeSpaceAR(h);u.setPosition(f),e.isAddCoin=!1;var p=cc.sequence(cc.spawn(cc.moveTo(1,cc.v2(0,0)),cc.rotateBy(1,360)),cc.scaleTo(.2,.6),cc.scaleTo(.2,.45),cc.callFunc(function(){o.isLock=!1;for(var t=e.coinNode.convertToWorldSpaceAR(cc.v2(0,0)),n=u.convertToNodeSpaceAR(t),c=function(t){var o=cc.instantiate(e.coinPre);o.parent=u;var c=.3*Math.random();o.runAction(cc.sequence(cc.delayTime(c),e.createBezier(.5,cc.v2(0,0),cc.v2(30+3*t,2*t-150),100+2*t,40+t),cc.delayTime(c),cc.moveTo(1.5,n),cc.callFunc(function(){o.active=!1,o.destroy(),e.isAddCoin||(s+=i.getInstance().offlineRewardList[a-1],e.reward.getComponent(cc.Label).string=s.toString(),e.reward.runAction(cc.sequence(cc.scaleTo(.2,1.1),cc.scaleTo(.2,1))),e.isAddCoin=!0,e.isCompleteGuide||(e.guideFinger.parent.parent=u,e.guideFinger.parent.setPosition(cc.v2(0,0)),e.guideFinger.active=!0,e.guideFinger.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.5,50,-50),cc.moveBy(.5,-50,50)))),e.isCompleteGuide=!0,i.getInstance().setStoreData("true")))})))},r=0;r<20;r++)c(r)}));u.runAction(p)}else s+=i.getInstance().offlineRewardList[a-1];u.scaleX=.45,u.scaleY=.45,u.on(cc.Node.EventType.TOUCH_START,function(){e.guideFinger.active=!1;var t=cc.instantiate(e.fruitInfoPre);t.parent=e.node,t.getComponent("FruitInfo").init(a)})}},h=0;h<5;h++){var d,g,u;l(h)}}this.reward.getComponent(cc.Label).string=s.toString()},createBezier:function(e,t,n,i,o){0===Math.floor(2*Math.random())&&(n.x+=Math.floor(100*Math.random()),n.x*=-1);var s=3.14*o/180,c=t.x+(n.x-t.x)/4,a=cc.v2(c,i+t.y+Math.cos(s)*c),r=t.x+(n.x-t.x)/2,l=cc.v2(r,i+t.y+Math.cos(s)*r);return cc.bezierTo(e,[a,l,n])},onDestroy:function(){window.tt&&null!=i.getInstance().startView&&i.getInstance().setBannerAdVisible(!0)}});cc._RF.pop()},{Game:"Game"}],TrippleDialog:[function(e,t,n){"use strict";cc._RF.push(t,"08288jBjh1A3Z4To8FWhgMG","TrippleDialog");var i=e("Game"),o=e("EventConfig");cc.Class({extends:cc.Component,properties:{btnClose:cc.Node,knife:cc.Node,btnApply:cc.Node,nameNode:cc.Node,numNode:cc.Node,nextNode:cc.Node,shareFrame:cc.SpriteFrame,btnSkip:cc.Node},onLoad:function(){var e=this;this.btnClose.on("click",function(){e.node.destroy()}),this.btnSkip.on("click",function(){e.node.destroy()}),i.getInstance().isQQ()&&(i.getInstance().isShareHide()||(this.btnClose.active=!1,this.btnSkip.active=!0,i.getInstance().setBannerAdVisible(!1),this.scheduleOnce(function(){i.getInstance().setBannerAdVisible(!0),e.scheduleOnce(function(){e.btnSkip.y=e.btnSkip.y+i.getInstance().btHeight+180},.2)},1))),this.videoAd=i.getInstance().registVedioAd(4,this.btnApply,this.shareFrame,function(){var t=i.getInstance().getTrippleNum();t+=i.TRIPPLE_REWARD_NUM,i.getInstance().setTrippleNum(t),i.gNode.emit(o.EVT_TRIPPLE_ROUND_CHANGED,i.TRIPPLE_REWARD_NUM),e.node.destroy()})},setNum:function(e){this.numNode.getComponent(cc.Label).string=e.toString()},setKnifeName:function(e){this.nameNode.getComponent(cc.Label).string=e},onDestroy:function(){window.tt||cc.sys.platform===cc.sys.VIVO_GAME||i.getInstance().isQQ()||(null!=this.videoAd&&cc.sys.platform!==cc.sys.OPPO_GAME?this.videoAd.offClose():null!=this.videoAd&&cc.sys.platform===cc.sys.OPPO_GAME&&this.videoAd.destroy())}}),cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game"}],TurnplateView:[function(e,t,n){"use strict";cc._RF.push(t,"49671qQGN9Pwbhw584TPx/j","TurnplateView");var i=e("Game"),o=(e("Knife"),e("EventConfig")),s=e("Util"),c=cc.Class({extends:cc.Component,properties:{knife:cc.Node,turnplateNode:cc.Node,toast:cc.Node,btnHome:cc.Node,btnAgain1:cc.Node,btnAgain2:cc.Node,btnStart:cc.Node,nextNode:cc.Node,uiOver:cc.Node,uiStart:cc.Node,lockOper:!0,offsetDegree:-270},statics:{turnplateSkinId:null},onLoad:function(){this.randomReward(),this.addEvent(),this.initUI(),this.initKnife(),this.initToast(),this.initTurnplate()},randomReward:function(){if(this.rewardCoinList=[200,800,200,1200,200,-1,200,400],null==c.turnplateSkinId){for(var e=[],t=1;t<i.getInstance().knifeSkinList1.length;t++){var n=i.GAME_PROP.WEAPON_PT+t;i.getInstance().getPropNum(n)<=0&&e.push(n)}for(t=1;t<i.getInstance().knifeSkinList2.length;t++){n=i.GAME_PROP.WEAPON_XY+t;i.getInstance().getPropNum(n)<=0&&e.push(n)}for(t=1;t<i.getInstance().knifeSkinList3.length;t++){n=i.GAME_PROP.WEAPON_ZY+t;i.getInstance().getPropNum(n)<=0&&e.push(n)}for(t=1;t<i.getInstance().knifeSkinList4.length;t++){n=i.GAME_PROP.WEAPON_SS+t;i.getInstance().getPropNum(n)<=0&&e.push(n)}for(t=1;t<i.getInstance().knifeSkinList5.length;t++){n=i.GAME_PROP.WEAPON_CS+t;i.getInstance().getPropNum(n)<=0&&e.push(n)}if(0==e.length){var o=s.random(5);e=i.getInstance()["knifeSkinList"+o];var a=s.random(e.length);1==o?this.skinId=i.GAME_PROP.WEAPON_PT+a:2==o?this.skinId=i.GAME_PROP.WEAPON_XY+a:3==o?this.skinId=i.GAME_PROP.WEAPON_ZY+a:4==o?this.skinId=i.GAME_PROP.WEAPON_SS+a:5==o&&(this.skinId=i.GAME_PROP.WEAPON_CS+a)}else{var r=s.random(e.length)-1;this.skinId=e[r]}c.turnplateSkinId=this.skinId}else this.skinId=c.turnplateSkinId;var l=i.getInstance().getFrameBySkinId(this.skinId);this.turnplateNode.getChildByName("img").getChildByName("turnplateItem6").getChildByName("knife").getComponent(cc.Sprite).spriteFrame=l,i.getInstance().isShareHide&&(this.turnplateNode.getChildByName("img").getChildByName("turnplateItem6").getChildByName("knife").color=cc.Color.WHITE)},addEvent:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){console.log("=======TurnplateView TOUCH_START========="),1!=e.lockOper?e.flyKnife():console.log("oper is locked")}),i.gNode.on(o.EVT_COLLIDER,function(e){this.knife.stopAllActions(),this.knife.getComponent(cc.BoxCollider).active=!1,this.knife.rotation=0,this.turnplateNode.stopAllActions(),this.balance(),this.lockOper=!0}.bind(this),this)},initUI:function(){var e=this;this.btnHome.on("click",function(){i.getInstance().enterStart(),c.turnplateSkinId=null}.bind(this)),this.btnAgain1.on("click",function(){i.getInstance().openVedioAd(2,function(){i.gNode.emit(o.EVT_TURNPLATE_RESET)})}.bind(this)),this.btnAgain2.on("click",function(){i.share.shareWechat(3,function(){i.gNode.emit(o.EVT_TURNPLATE_RESET)})}.bind(this)),this.btnAgain1.active=i.getInstance().haveAdvertisement(),this.btnAgain2.active=!i.getInstance().isShareHide(),this.btnStart.on("click",function(){this.startTurning()}.bind(this)),this.nextNode.on(cc.Node.EventType.TOUCH_END,function(){i.gNode.emit(o.EVT_NEXT_LEVEL),e.node.destroy(),c.turnplateSkinId=null}),this.uiOver.active=!1,this.uiStart.active=!0},initKnife:function(){var e=i.getInstance().getSkinId();this.knife.getComponent(cc.Sprite).spriteFrame=i.getInstance().getFrameBySkinId(e),this.knife.getComponent(cc.BoxCollider).size=this.knife.getContentSize(),this.knife.getComponent(cc.BoxCollider).offset=cc.v2(0,0),this.knife.active=!1},initToast:function(){this.toast.active=!1},initTurnplate:function(){var e=this;this.turnplateNode.active=!0,this.degreeLineList=[3,-50,-89,-148,-177,-244,-269,-319],this.uiOver.active=!1,this.uiStart.active=!1,this.turnplateNode.scaleX=.5,this.turnplateNode.scaleY=.5,this.turnplateNode.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(function(){e.uiOver.active=!1,e.uiStart.active=!0})))},startTurning:function(){this.uiStart.active=!1,this.knife.active=!0,this.lockOper=!1;var e=cc.rotateBy(4,450).easing(cc.easeSineInOut()),t=cc.repeatForever(e);this.turnplateNode.runAction(t)},flyKnife:function(){var e=cc.repeatForever(cc.rotateBy(.2,720));this.knife.runAction(e);var t=cc.moveBy(.5,cc.v2(0,800));this.knife.runAction(t)},balance:function(){for(var e=this.offsetDegree-this.turnplateNode.rotation,t=1,n=0;n<this.degreeLineList.length;n++){var s=n,c=s+1;c>=this.degreeLineList.length&&(c=0);var a=(e-this.degreeLineList[s])%360;a>0&&(a-=360);var r=(this.degreeLineList[c]-this.degreeLineList[s])%360;if(r>0&&(r-=360),a>r){t=n;break}}if(console.log("balance index = "+t),this.uiOver.active=!0,this.toast.active=!0,-1==this.rewardCoinList[t]){this.toast.getChildByName("knife").active=!0,this.toast.getChildByName("num").active=!1,this.toast.getChildByName("coin").active=!1;var l=i.getInstance().getFrameBySkinId(this.skinId);this.toast.getChildByName("knife").getComponent(cc.Sprite).spriteFrame=l,i.getInstance().addSkinId(this.skinId),i.gNode.emit(o.EVT_CHANGE_WEAPON,this.skinId)}else i.getInstance().addCoin(this.rewardCoinList[t]),this.toast.getChildByName("knife").active=!1,this.toast.getChildByName("num").active=!0,this.toast.getChildByName("coin").active=!0,this.toast.getChildByName("num").getComponent(cc.Label).string=""+this.rewardCoinList[t]},setReward:function(e){this.toast.getChildByName("num").getComponent(cc.Label).string="+"+e},onDestroy:function(){i.gNode.targetOff(this)}});cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game",Knife:"Knife",Util:"Util"}],UnlockDialog:[function(e,t,n){"use strict";cc._RF.push(t,"614d19Dl4VKj4NCDJ10s88y","UnlockDialog");var i=e("Game");cc.Class({extends:cc.Component,properties:{btnClose:cc.Node,btnShow:cc.Node,imgFruit:cc.Node},onLoad:function(){var t=this;this.btnClose.on("click",function(){t.node.destroy()}),this.btnShow.on("click",function(){var e=i.getInstance().getLevel(),t=i.getInstance().subLevel;i.getInstance().enterTower(e,t)}),e("TowerView").isLock=!0},initFruit:function(e,t,n){this.imgFruit.getComponent(cc.Sprite).spriteFrame=i.getInstance().fruitFrameList[e-1]}}),cc._RF.pop()},{Game:"Game",TowerView:"TowerView"}],Util:[function(e,t,n){"use strict";cc._RF.push(t,"0220f9WYbVBHIvRQYsPpEc0","Util");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};cc.Class({extends:cc.Component,statics:{replaceAtlasFrame:function(e,t,n){if(e&&t){console.log("png = "+n);var i=t.getSpriteFrame(n);console.log("frame = "+i),e.getComponent(cc.Sprite).spriteFrame=i}},replaceAtlasButtonFrame:function(e,t,n,i,o){if(e&&t){var s=t.getSpriteFrame(n),c=t.getSpriteFrame(i),a=t.getSpriteFrame(o),r=e.getComponent(cc.Button);r.normalSprite=s,r.pressedSprite=c,r.hoverSprite=s,r.disabledSprite=a;var l=e.getComponent(cc.Sprite);l&&(l.spriteFrame=s)}},random:function(e){return Math.floor(Math.random()*Math.floor(e)+1)},clone:function(){var e;if("object"==("undefined"==typeof obj?"undefined":i(obj)))if(null===obj)e=null;else if(obj instanceof Array){e=[];for(var t=0,n=obj.length;t<n;t++)e.push(this.clone(obj[t]))}else{e={};for(var o in obj)e[o]=this.clone(obj[o])}else e=obj;return e},isToday:function(e){var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);var n=e.getTime()-t.getTime();return n>=0&&n<=864e5},isSameDay:function(e,t){t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);var n=e.getTime()-t.getTime();return n>=0&&n<=864e5},isSameWeek:function(e,t){var n=parseInt(e.getTime()/864e5),i=parseInt(t.getTime()/864e5);return parseInt((n+4)/7)==parseInt((i+4)/7)}}}),cc._RF.pop()},{}],WeaponDialog:[function(e,t,n){"use strict";cc._RF.push(t,"b682dGpqrVFhbXELsLJ3msF","WeaponDialog");var i=e("Game"),o=e("EventConfig"),s=e("Util"),c=cc.Class({extends:cc.Component,statics:{MAX_ROW:4,MAX_COL:4},properties:{btnBack:cc.Node,btnGet:cc.Node,btnAdv:cc.Node,btnShare:cc.Node,advText:cc.Node,shareText:cc.Node,coin:cc.Node,pageView:cc.Node,weaponPagePrefab:cc.Prefab,weaponCellPrefab:cc.Prefab,grayFrame:cc.SpriteFrame,cellBackFrameList:[cc.SpriteFrame],knife:cc.Node,randomPrice:cc.Node,advPrice:cc.Node,sharePrice:cc.Node,toastPrefab:cc.Prefab,bottomUINode:cc.Node,speicalTextNode:cc.Node,tagList:[cc.Node],tagFrame:[cc.SpriteFrame]},showToast:function(e){var t=cc.instantiate(this.toastPrefab);t.zIndex=3,t.position=cc.v2(0,0),t.parent=this.node;var n=t.getChildByName("text");n.getComponent(cc.Label).string=e,n.on("size-changed",function(){n.getContentSize().width>t.getContentSize().width&&t.setContentSize(cc.size(n.getContentSize().width+100,t.getContentSize().height))});var i=cc.moveBy(2,cc.v2(0,300)),o=cc.fadeTo(2,100),s=cc.spawn(i,o);t.runAction(cc.sequence(s,cc.callFunc(function(){t.destroy()})))},onLoad:function(){var e=this;i.getInstance().setBannerAdVisible(!1);var t=i.getInstance().getWeaponVedioShareInfo();this.leftTopPos=cc.v2(-319,340),this.interval=210,this.btnBack.on("click",function(){i.getInstance().isInGameChange&&(i.getInstance().isInGameChange=!1,i.gNode.emit(o.EVT_EXIT_CHANGE)),e.node.destroy()}),this.btnGet.on("click",function(){1!=e.isPageViewLocked()&&e.handleGetKnife()}),this.btnAdv.on("click",function(){i.getInstance().openVedioAd(1,function(){i.getInstance().addCoin(800);var t=i.getInstance().getWeaponVedioShareInfo();t.vedio<2&&(i.getInstance().setWeaponVedioTimes(t.vedio+1),t.vedio+1>=2&&(e.btnAdv.active=!1,e.advText.active=!1),e.advText.getComponent(cc.Label).string=t.vedio+1+"/2\u6b21")})}),this.btnShare.on("click",function(){i.share.shareWechat(4,function(){i.getInstance().addCoin(800);var t=i.getInstance().getWeaponVedioShareInfo();t.share<2&&(i.getInstance().setWeaponShareTimes(t.share+1),t.share+1>=2&&(e.btnShare.active=!1,e.shareText.active=!1),e.shareText.getComponent(cc.Label).string=t.share+1+"/2\u6b21")})});for(var n=this.tagList.length,s=function(t){e.tagList[t].on("click",function(){e.tagClick(t)})},c=0;c<n;c++)s(c);t.vedio<2?(this.btnAdv.active=!0,this.advText.active=!0,this.advText.getComponent(cc.Label).string=t.vedio+"/2\u6b21"):(this.btnAdv.active=!1,this.advText.active=!1);var a=i.getInstance().getCoin();this.coin.getComponent(cc.Label).string=""+a;for(var r=0,l=1;l<=100&&null!=i.getInstance()["knifeSkinList"+l];l++)r++;for(l=0;l<r;l++){var h=cc.instantiate(this.weaponPagePrefab);this.pageView.getComponent(cc.PageView).addPage(h);var d=!1;window.tt||i.getInstance().isQQ()||i.getInstance().isQttGame()||cc.sys.platform===cc.sys.OPPO_GAME||cc.sys.platform===cc.sys.VIVO_GAME||l==r-1&&(d=!0),this.fillPage(h,l,d)}this.pageView.on("page-turning",function(t){for(var n=t.getCurrentPageIndex(),o=0;o<e.tagList.length&&5!==n;o++)e.tagList[o].getComponent(cc.Sprite).spriteFrame=o===n?e.tagFrame[1]:e.tagFrame[0];if(5==n)e.bottomUINode.active=!1,e.speicalTextNode.active=!0,e.speicalTextNode.getComponent(cc.Label).string="\u6dfb\u52a0\u5230\u201c\u6211\u7684\u5c0f\u7a0b\u5e8f\u201d\u83b7\u5f97";else{var s=i.getInstance().priceList[n];e.randomPrice.getComponent(cc.Label).string=s.toString(),e.bottomUINode.active=!0,e.speicalTextNode.active=!1}}),i.gNode.on(o.EVT_COIN_CHANGE,function(){var t=i.getInstance().getCoin();e.coin.getComponent(cc.Label).string=""+t},this),this.setKnifeSkin(i.getInstance().getSkinId()),this.playKnifeAnim(),this.randomPrice.getComponent(cc.Label).string=i.getInstance().priceList[0],this.btnShare.active=!1,this.shareText.active=!1,this.btnAdv.active=i.getInstance().haveAdvertisement(),this.advText.active=i.getInstance().haveAdvertisement(),cc.sys.platform!==cc.sys.VIVO_GAME||i.getInstance().supportedVivoAd||(this.btnAdv.active=!1,this.advText.active=!1),cc.sys.platform===cc.sys.OPPO_GAME||cc.sys.platform===cc.sys.VIVO_GAME||i.getInstance().isQttGame()?(this.btnAdv.x=0,this.advText.x=0):(this.btnShare.active=!0,this.shareText.active=!0,1==i.getInstance().isShareHide()?(this.btnShare.active=!1,this.shareText.active=!1,this.btnAdv.x=0,this.advText.x=0):t.share<2?(this.btnShare.active=!0,this.shareText.active=!0,this.shareText.getComponent(cc.Label).string=t.share+"/2\u6b21"):(this.btnShare.active=!1,this.shareText.active=!1))},lockPageView:function(){this.pageView.getComponent(cc.PageView).enabled=!1},unlockPageView:function(){this.pageView.getComponent(cc.PageView).enabled=!0},isPageViewLocked:function(){return!this.pageView.getComponent(cc.PageView).enabled},playKnifeAnim:function(){var e=cc.moveBy(1,cc.v2(0,100)),t=cc.moveBy(1,cc.v2(0,-100)),n=[];n.push(e),n.push(t);var i=cc.sequence(n),o=cc.repeatForever(i);this.knife.runAction(o)},setKnifeSkin:function(e){var t=i.getInstance().getFrameBySkinId(e);this.knife.getComponent(cc.Sprite).spriteFrame=t},handleGetKnife:function(){var e=this.pageView.getComponent(cc.PageView).getCurrentPageIndex(),t=i.getInstance().priceList[e];if(i.getInstance().getCoin()<t)this.showToast("\u91d1\u5e01\u4e0d\u8db3");else{for(var n=i.getInstance()["knifeSkinList"+(e+1)],c=[],a=[],r=this.pageView.getComponent(cc.PageView).getPages()[e].cellList,l=0;l<n.length;l++){var h=i.GAME_PROP.WEAPON_PT+1e3*e+l+1;i.getInstance().getPropNum(h)<=0&&(c.push(h),a.push(r[l]))}if(0==c.length)return void this.showToast("\u606d\u559c\u5927\u795e\uff0c\u60a8\u5df2\u7ecf\u96c6\u9f50\u6b64\u7ea7\u522b\u6240\u6709\u6b66\u5668\uff01");this.lockPageView();var d;for(h=c[s.random(c.length)-1],l=0;l<a.length;l++){d=l;var g=a[l],u=[cc.delayTime(.1*d),cc.scaleTo(.1,1.1*g.originScale),cc.scaleTo(.1,1*g.originScale)];g.runAction(cc.sequence(u))}d++;for(l=0;l<a.length;l++){d+=l;g=a[l],u=[cc.delayTime(.1*d),cc.scaleTo(.05,1.1*g.originScale),cc.scaleTo(.05,1*g.originScale)];if(c[l]==h&&u.push(cc.callFunc(function(){var n=this;i.getInstance().setCoin(i.getInstance().getCoin()-t),this.setKnifeSkin(h),i.getInstance().addSkinId(h),i.gNode.emit(o.EVT_CHANGE_WEAPON,h),this.updatePage(e);var s=g.getChildByName("icon");s.scaleX=1.2,s.scaleY=1.2;var c=cc.rotateBy(.5,360),a=cc.scaleTo(.5,.8),r=cc.spawn(c,a);s.runAction(cc.sequence(r,cc.callFunc(function(){n.unlockPageView()})))}.bind(this))),g.runAction(cc.sequence(u)),c[l]==h)break}}},updatePage:function(e){var t=this.pageView.getComponent(cc.PageView).getPages()[e];if(e==this.pageView.getComponent(cc.PageView).getPages().length-1){var n=!1;i.getInstance().getPropNum(i.GAME_PROP.WEAPON_YTJ)>0&&(n=!0),this.setCellInfo(t.cellList[0],i.GAME_PROP.WEAPON_YTJ,n,!0,e-1)}else for(var o=i.getInstance()["knifeSkinList"+(e+1)],s=0;s<o.length;s++){var c=i.GAME_PROP.WEAPON_PT+1e3*e+s+1;n=!1;i.getInstance().getPropNum(c)>0&&(n=!0),this.setCellInfo(t.cellList[s],c,n,!(2==e),e)}},fillPage:function(e,t,n){this.pageView.getComponent(cc.PageView).getPages();if(1==n){(g=cc.instantiate(this.weaponCellPrefab)).position=cc.v2(this.leftTopPos.x,this.leftTopPos.y),g.parent=e,g.originScale=g.scale;var o=!1,s=i.GAME_PROP.WEAPON_YTJ;i.getInstance().getPropNum(s)>0&&(o=!0),this.setCellInfo(g,s,o,!0,t-1),e.cellList=[g]}else{var a=0,r=0,l=!0;2==t&&(l=!1),e.cellList=[];for(var h=i.getInstance()["knifeSkinList"+(t+1)],d=0;d<h.length;d++){var g;r=0==(a=d%c.MAX_COL)?d/c.MAX_COL:Math.floor(d/c.MAX_COL),(g=cc.instantiate(this.weaponCellPrefab)).position=cc.v2(this.leftTopPos.x+this.interval*a,this.leftTopPos.y-r*this.interval),g.parent=e,g.originScale=g.scale;var u=!1;s=i.GAME_PROP.WEAPON_PT+1e3*t+d+1;i.getInstance().getPropNum(s)>0&&(u=!0),this.setCellInfo(g,s,u,l,t),e.cellList.push(g)}}},setCellInfo:function(e,t,n,o,s){var c=this;e.skinId=t;var a=i.getInstance().getFrameBySkinId(t),r=e.getChildByName("icon"),l=e.getChildByName("highlight"),h=e.getChildByName("bg");r.getComponent(cc.Sprite).spriteFrame=a,1==n?(r.color=cc.color(255,255,255),h.getComponent(cc.Sprite).spriteFrame=this.cellBackFrameList[s]):(r.color=cc.color(0,0,0),h.getComponent(cc.Sprite).spriteFrame=this.grayFrame),r.rotation=1==o?45:0,i.getInstance().getSkinId()==t?l.active=!0:l.active=!1,e.targetOff(e),e.on(cc.Node.EventType.TOUCH_END,function(){c.handleSelectCell(e,t)},e)},handleSelectCell:function(e,t){if(console.log("skin = "+t+" is touched"),1!=this.isPageViewLocked()){if(!(i.getInstance().getPropNum(t)<=0)){i.getInstance().setSkinId(t),this.setKnifeSkin(t);for(var n=this.pageView.getComponent(cc.PageView).getPages(),s=0;s<n.length;s++)for(var c=0;c<n[s].cellList.length;c++){t==(e=n[s].cellList[c]).skinId?(console.log("i = "+s+" j = "+c),e.getChildByName("highlight").active=!0):e.getChildByName("highlight").active=!1}i.gNode.emit(o.EVT_CHANGE_WEAPON,t)}}else console.log("pageView is locked")},tagClick:function(e){this.pageView.getComponent(cc.PageView).setCurrentPageIndex(e);for(var t=0;t<this.tagList.length&&5!==e;t++)this.tagList[t].getComponent(cc.Sprite).spriteFrame=t===e?this.tagFrame[1]:this.tagFrame[0];if(e!=this.pageView.getComponent(cc.PageView).getPages().length-1||cc.sys.platform!==cc.sys.WECHAT_GAME||window.tt||i.getInstance().isQQ()){var n=i.getInstance().priceList[e];this.randomPrice.getComponent(cc.Label).string=n.toString(),this.bottomUINode.active=!0,this.speicalTextNode.active=!1}else this.bottomUINode.active=!1,this.speicalTextNode.active=!0,this.speicalTextNode.getComponent(cc.Label).string="\u6dfb\u52a0\u5230\u201c\u6211\u7684\u5c0f\u7a0b\u5e8f\u201d\u83b7\u5f97"},onDestroy:function(){i.gNode.targetOff(this),window.tt||null==i.getInstance().gameView&&null==i.getInstance().startView||i.getInstance().setBannerAdVisible(!0),window.tt&&null!=i.getInstance().startView&&i.getInstance().setBannerAdVisible(!0)}});cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game",Util:"Util"}],cell:[function(e,t,n){"use strict";cc._RF.push(t,"34d44kiX+VI8ri4k7whT10J","cell"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,o=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankLabel=null,t.rankSp=null,t.spriteFrameList=[],t.imgHead=null,t.titleNode=null,t.scoreNode=null,t.nameNode=null,t.tmplID=0,t.itemID=0,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.initItem=function(e){var t=this;this.itemID=e.ranking,e.ranking<3?(this.rankSp.getComponent(cc.Sprite).spriteFrame=this.spriteFrameList[e.ranking],this.rankSp.active=!0,this.rankLabel.node.active=!1):(this.rankSp.active=!1,this.rankLabel.string=this.itemID.toString(),this.rankLabel.node.active=!0);var n=e.score;this.scoreNode.getComponent(cc.Label).string="\u7b2c"+n+"\u5173",this.nameNode.getComponent(cc.Label).string=e.attr_info.nick.Value;var i=e.attr_info.avatar.Value;cc.loader.load(i,function(e,n){if(e)console.log(e);else{var i=new cc.SpriteFrame(n);t.imgHead.getComponent(cc.Sprite).spriteFrame=i}});var o="";o=n<=10?"\u852c\u83dc\u840c\u65b0":n<=30?"\u852c\u83dc\u65b0\u79c0":n<=60?"\u852c\u83dc\u719f\u624b":n<=100?"\u852c\u83dc\u8fbe\u4eba":"\u852c\u83dc\u5927\u5e08",this.titleNode.getComponent(cc.Label).string=o},t.prototype.updateItem=function(e){this.initItem(e)},__decorate([s(cc.Label)],t.prototype,"rankLabel",void 0),__decorate([s(cc.Node)],t.prototype,"rankSp",void 0),__decorate([s(cc.SpriteFrame)],t.prototype,"spriteFrameList",void 0),__decorate([s(cc.Node)],t.prototype,"imgHead",void 0),__decorate([s(cc.Node)],t.prototype,"titleNode",void 0),__decorate([s(cc.Node)],t.prototype,"scoreNode",void 0),__decorate([s(cc.Node)],t.prototype,"nameNode",void 0),t=__decorate([o],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],rankListView:[function(e,t,n){"use strict";cc._RF.push(t,"bcceaZeJ0JK24vo+RuqPSaP","rankListView");var i=e("Game");cc.Class({extends:cc.Component,properties:{scrollView:cc.ScrollView,item:cc.Prefab,btnClose:cc.Node,bufferSize:0,spacing:0,spawnCount:0,totalCount:0,ownRank:cc.Node},onLoad:function(){var e=this;this.items=[],this.lastContentPosY=0,this.content=this.scrollView.content,this.btnClose.on("click",function(){e.node.active=!1},this),this.scrollView.node.on("scrolling",this.updateList.bind(this),this),i.getInstance().sendRankInfoReq(function(t){e.initialize(t.infos),e.ownRank.getComponent("cell").initItem(t.info)})},initialize:function(e){this.infos=e,this.content=this.scrollView.content,this.content.height=this.totalCount*(this.item.data.height+this.spacing)-this.spacing;for(var t=e.length<this.spawnCount?e.length:this.spawnCount,n=0;n<t;n++){var i=cc.instantiate(this.item);this.content.addChild(i),i.getComponent("cell").initItem(e[n]),i.setPosition(0,-n*(i.height+this.spacing)),this.items.push(i)}this.updateList()},getPositionInView:function(e){var t=e.parent.convertToWorldSpaceAR(e.getPosition());return this.scrollView.node.convertToNodeSpaceAR(t)},updateList:function(){for(var e=this.items,t=this.bufferSize,n=this.scrollView.content.y<this.lastContentPosY,i=(this.item.data.height+this.spacing)*e.length,o=0;o<e.length;o++){var s=this.getPositionInView(e[o]);n?s.y<-t&&e[o].y+i<=0&&(e[o].y=e[o].y+i,e[o].getComponent("cell").updateItem(this.infos[e[o].getComponent("cell").itemID-e.length])):s.y>t&&e[o].y-i>-this.content.height&&(e[o].y=e[o].y-i,e[o].getComponent("cell").updateItem(e[o].getComponent("cell").itemID+e.length))}this.lastContentPosY=this.scrollView.content.y}}),cc._RF.pop()},{Game:"Game"}],treasureBoxDialog:[function(e,t,n){"use strict";cc._RF.push(t,"c0997BOEVtADJ7CtDpyvhx3","treasureBoxDialog");var i=e("Game"),o=e("Util"),s=e("EventConfig");cc.Class({extends:cc.Component,properties:{btnRefuse:cc.Node,btnApply:cc.Node,tittle:cc.Node,tittleFrameList:[cc.SpriteFrame]},onLoad:function(){var e=this;this.reward=Object.create(null),this.btnRefuse.on("click",function(){var t=cc.scaleTo(.1,.2),n=cc.fadeOut(.1),i=cc.spawn(t,n);e.node.runAction(cc.sequence(i,cc.callFunc(function(){e.node.destroy()})))}),this.btnRefuse.active=!1,this.scheduleOnce(function(){e.btnRefuse.active=!0},2)},init:function(e,t,n){var c,a=this;if(this.tittle.getComponent(cc.Sprite).spriteFrame=this.tittleFrameList[e],0===e)t!==i.GAME_PROP.COIN&&(n=2e3),c=0,8;else{var r,l,h,d,g;i.getInstance().hasSDKConfig()?(r=parseInt(i.getInstance().sdkConfig.data.bonusRate1),l=parseInt(i.getInstance().sdkConfig.data.bonusRate2),h=parseInt(i.getInstance().sdkConfig.data.bonusRate3),d=parseInt(i.getInstance().sdkConfig.data.bonusRate4),g=parseInt(i.getInstance().sdkConfig.data.bonusRate5)):(r=40,l=60,h=80,d=90,g=100);var u=o.random(100);u<r?(c=0,n=666):u>=r&&u<l?(c=0,n=888):u>=l&&u<h?(c=0,n=1e3):u>=h&&u<d?(c=1,n=0):u>=d&&u<g&&(c=2,n=0),9}this.reward={propType:c,content:n},this.videoAd=i.getInstance().registVedioAd(2,this.btnApply,this.shareFrame,function(){if(0===a.reward.propType){i.getInstance().addCoin(a.reward.content);var e="\u606d\u559c\u60a8\u83b7\u5f97"+a.reward.content+"\u91d1\u5e01";i.getInstance().showToast(e)}else if(1===a.reward.propType){var t=i.getInstance().getTrippleNum();t+=i.TRIPPLE_REWARD_NUM,i.getInstance().setTrippleNum(t),i.gNode.emit(s.EVT_TRIPPLE_ROUND_CHANGED,i.TRIPPLE_REWARD_NUM)}else i.getInstance().setSlowDownNum(i.getInstance().getSlowDownNum()+1),i.gNode.emit(s.EVT_SLOW_DOWN);var n=cc.scaleTo(.1,.2),o=cc.fadeOut(.1),c=cc.spawn(n,o);a.node.runAction(cc.sequence(c,cc.callFunc(function(){a.node.destroy()})))})},onDestroy:function(){window.tt||cc.sys.platform===cc.sys.VIVO_GAME||i.getInstance().isQQ()||(null!=this.videoAd&&cc.sys.platform!==cc.sys.OPPO_GAME?this.videoAd.offClose():null!=this.videoAd&&cc.sys.platform===cc.sys.OPPO_GAME&&this.videoAd.destroy())}}),cc._RF.pop()},{EventConfig:"EventConfig",Game:"Game",Util:"Util"}]},{},["Game","Share","EventConfig","EventDispatcher","Module","NetworkManager","Avatar","ClickSound","TipConfig","Util","MatrixRotation","AchieveCell","AchieveDialog","CircleRoundDialog","FailDialog","FruitInfo","LeaderDialog","LuckDialog","NativeAdDialog","OfflineDialog","PassDialog","RankView","ReviveDialog","SignDialog","StoreProgramDialog","TrippleDialog","UnlockDialog","WeaponDialog","cell","rankListView","treasureBoxDialog","ColliderListener","Fruit","Knife","Slice","Tiled","GameView","InitView","LoadingView","StartView","TitleView","TowerView","TurnplateView","HotMod","Item","Quee"]);